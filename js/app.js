var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function s(e){e.forEach(t)}function l(e){return"function"==typeof e}function o(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function i(t,n,s){t.$$.on_destroy.push(function(t,...n){if(null==t)return e;const s=t.subscribe(...n);return s.unsubscribe?()=>s.unsubscribe():s}(n,s))}function r(e){return null==e?"":e}function a(e,t,n=t){return e.set(n),t}function c(e,t){e.appendChild(t)}function u(e,t,n){e.insertBefore(t,n||null)}function h(e){e.parentNode.removeChild(e)}function f(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function g(e){return document.createElement(e)}function p(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function m(e){return document.createTextNode(e)}function d(){return m(" ")}function v(){return m("")}function $(e,t,n,s){return e.addEventListener(t,n,s),()=>e.removeEventListener(t,n,s)}function w(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function x(e){return""===e?void 0:+e}function y(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function b(e,t){e.value=null==t?"":t}function _(e,t,n,s){e.style.setProperty(t,n,s?"important":"")}function k(e,t){for(let n=0;n<e.options.length;n+=1){const s=e.options[n];if(s.__value===t)return void(s.selected=!0)}}function S(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}function C(e,t,n){e.classList[n?"add":"remove"](t)}let P;function M(e){P=e}function H(){if(!P)throw new Error("Function called outside component initialization");return P}function j(){const e=H();return(t,n)=>{const s=e.$$.callbacks[t];if(s){const l=function(e,t){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}(t,n);s.slice().forEach((t=>{t.call(e,l)}))}}}const O=[],E=[],W=[],q=[],N=Promise.resolve();let R=!1;function z(e){W.push(e)}function T(e){q.push(e)}let B=!1;const A=new Set;function L(){if(!B){B=!0;do{for(let e=0;e<O.length;e+=1){const t=O[e];M(t),D(t.$$)}for(O.length=0;E.length;)E.pop()();for(let e=0;e<W.length;e+=1){const t=W[e];A.has(t)||(A.add(t),t())}W.length=0}while(O.length);for(;q.length;)q.pop()();R=!1,B=!1,A.clear()}}function D(e){if(null!==e.fragment){e.update(),s(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(z)}}const G=new Set;let I;function U(){I={r:0,c:[],p:I}}function F(){I.r||s(I.c),I=I.p}function Y(e,t){e&&e.i&&(G.delete(e),e.i(t))}function J(e,t,n,s){if(e&&e.o){if(G.has(e))return;G.add(e),I.c.push((()=>{G.delete(e),s&&(n&&e.d(1),s())})),e.o(t)}}function K(e,t,n){const s=e.$$.props[t];void 0!==s&&(e.$$.bound[s]=n,n(e.$$.ctx[s]))}function Q(e){e&&e.c()}function V(e,n,o){const{fragment:i,on_mount:r,on_destroy:a,after_update:c}=e.$$;i&&i.m(n,o),z((()=>{const n=r.map(t).filter(l);a?a.push(...n):s(n),e.$$.on_mount=[]})),c.forEach(z)}function X(e,t){const n=e.$$;null!==n.fragment&&(s(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Z(e,t){-1===e.$$.dirty[0]&&(O.push(e),R||(R=!0,N.then(L)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function ee(t,l,o,i,r,a,c=[-1]){const u=P;M(t);const f=l.props||{},g=t.$$={fragment:null,ctx:null,props:a,update:e,not_equal:r,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:[]),callbacks:n(),dirty:c,skip_bound:!1};let p=!1;if(g.ctx=o?o(t,f,((e,n,...s)=>{const l=s.length?s[0]:n;return g.ctx&&r(g.ctx[e],g.ctx[e]=l)&&(!g.skip_bound&&g.bound[e]&&g.bound[e](l),p&&Z(t,e)),n})):[],g.update(),p=!0,s(g.before_update),g.fragment=!!i&&i(g.ctx),l.target){if(l.hydrate){const e=function(e){return Array.from(e.childNodes)}(l.target);g.fragment&&g.fragment.l(e),e.forEach(h)}else g.fragment&&g.fragment.c();l.intro&&Y(t.$$.fragment),V(t,l.target,l.anchor),L()}M(u)}class te{$destroy(){X(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const ne=[];function se(t,n=e){let s;const l=[];function i(e){if(o(t,e)&&(t=e,s)){const e=!ne.length;for(let e=0;e<l.length;e+=1){const n=l[e];n[1](),ne.push(n,t)}if(e){for(let e=0;e<ne.length;e+=2)ne[e][0](ne[e+1]);ne.length=0}}}return{set:i,update:function(e){i(e(t))},subscribe:function(o,r=e){const a=[o,r];return l.push(a),1===l.length&&(s=n(i)||e),o(t),()=>{const e=l.indexOf(a);-1!==e&&l.splice(e,1),0===l.length&&(s(),s=null)}}}}const le={version_1_0_1:"< update key to update settings",language:"fr"===(navigator.language.slice(0,2)||navigator.userLanguage.slice(0,2)).slice(0,2)?"fr":"en",material:{width:49,height:97,thickness:.75,margins:.3},nestTypeColumn:!1,nestOrder:"automatic",nestDirectionBottom:!0,units:!1,tools:{profile:"9",engraver:"3",tool:"9"},cnc:{1:{type:"End mill",diameter:.1875,mm:!1,spindle:12e3,feed:150,plunge:100,ramp:1,max_depth:.875,pass_depth:.125,step_over:.125},2:{type:"End mill",diameter:.75,mm:!1,spindle:15e3,feed:200,plunge:75,ramp:5,max_depth:3,pass_depth:.25,step_over:.625},3:{type:"Ball-nose",diameter:.125,mm:!1,spindle:12e3,feed:50,plunge:50,ramp:1,max_depth:.75,pass_depth:.0625,step_over:.0625},4:{type:"Edge Finisher",diameter:.75,mm:!1,spindle:2e4,feed:75,plunge:30,ramp:4,max_depth:2.25,pass_depth:2.25,step_over:.05},5:{type:"Drill",diameter:5,mm:!0,spindle:8500,feed:0,plunge:75,ramp:0,max_depth:1,pass_depth:1,step_over:0},6:{type:"End mill",diameter:.25,mm:!1,spindle:18e3,feed:150,plunge:40,ramp:1,max_depth:1,pass_depth:.25,step_over:.2},7:{type:"Drill",diameter:8,mm:!0,spindle:8500,feed:0,plunge:75,ramp:0,max_depth:1,pass_depth:1,step_over:0},8:{type:"Surfacing",diameter:32,mm:!0,spindle:12e3,feed:200,plunge:30,ramp:5,max_depth:1,pass_depth:.125,step_over:0},9:{type:"End mill",diameter:.375,mm:!1,spindle:18e3,feed:400,plunge:70,ramp:1,max_depth:.875,pass_depth:.875,step_over:.3},10:{type:"End mill",diameter:.5,mm:!1,spindle:18e3,feed:400,plunge:70,ramp:1,max_depth:.875,pass_depth:.875,step_over:.4},11:{type:"Drill",diameter:10,mm:!0,spindle:18e3,feed:0,plunge:75,ramp:0,max_depth:1,pass_depth:1,step_over:0},12:{type:"V-groove",diameter:1.5,mm:!1,spindle:12e3,feed:75,plunge:30,ramp:1,max_depth:.75,pass_depth:.25,step_over:.125}},subsettings:{show:!1,project:!0,profile:!1,engraver:!1,library:!1,sheet:!1,nest:!0,offset:!1},activePanel:""},oe={en:[["Project","New","Material","Plywood","Project Info","doors"],["Borders","Top","Right","Bottom","Left"],[0,0,0,0,0],["Metric?",!1],["Panel","Quantity","Width","Height"],[1,0,0,0]],fr:[["Projét","Nouveau","Matèriaux","Plaquage","Modèle Portes",""],["Borders","haut","droit","bas","gauche"],[0,0,0,0,0],["Metrique?",!1],["Panneaux","Quantité","Largeur","Hauteur"],[1,0,0,0]]},ie={name:"",sheets:[],errors:[],offset:{X:0,Y:0,Z:0},tools:{engraver:{tool:3,engrave:!1,cut_depth:.005,xStart:1,yStart:1,size:.3,spacing:.1,direction:"ltr"},profile:{tool:9,cut_depth:.75,link:.02,min_size:12}},csv:{new:[...oe[le.language]],contents:[...oe[le.language]],panels:[],headerRows:5,output:""},svg:"",cnc:""},re=((e,t)=>{const n=e=>JSON.stringify(e,null,2);function s(){return JSON.parse(localStorage.getItem(e))}var l,o;localStorage.getItem(e)||localStorage.setItem(e,n(t)),l=s(),o=t,Object.keys(l).join()!==Object.keys(o).join()&&(console.log(s(),t),localStorage.setItem(e,n(t)));const{subscribe:i,set:r,update:a}=se(s());return{subscribe:i,set:t=>(localStorage.setItem(e,n(t)),r(t)),update:a}})("settings",le),ae=((e,t)=>{const n=e=>JSON.stringify(e,null,2);sessionStorage.getItem(e)||sessionStorage.setItem(e,n(t));const{subscribe:s,set:l,update:o}=se(JSON.parse(sessionStorage.getItem(e)));return{subscribe:s,set:t=>(sessionStorage.setItem(e,n(t)),l(t)),update:o}})("data",ie);function ce(e,t){return Math.round(parseFloat(e)*10**t)/10**t}function ue(e,t=5){return ce(e,t)}function he(e){return ue(25.4*e,3)}function fe(e){return ue(e/25.4)}function ge(e,t){const n=e=>("0"+e).slice(-2),s={mm:n(e.getMonth()+1),dd:n(e.getDate()),yy:e.getFullYear().toString().slice(-2),yyyy:e.getFullYear(),HH:n(e.getHours()),MM:n(e.getMinutes()),SS:n(e.getSeconds()),T:"T",h:"h"};return t.replace(/mm|dd|yyyy|yy|HH|MM|SS/gi,(e=>s[e]))}function pe(e,t=0){const n=new RegExp("\r|\n","i"),s=new RegExp(",|;|:","i");let l=e.split(n).map((e=>e.split(s).map((e=>/\d/.test(e)?function(e){return isNaN(e)?e.includes("/")&&!e.includes(".")?e.split(" ").filter((e=>""!==e)).reduce(((e,t)=>{if(t.includes("/")){let n=t.split("/").filter((e=>""!==e));return e+ue(n[0]/n[1])}return e+ue(t)}),0):e:ue(e)}(e):e))));return function(){if(l[0][0]==oe.en[0][0]||l[0][0]==oe.fr[0][0])return;const e=oe[le.language].slice(0,-1);"number"==typeof l[0][2]&&(l=[...e,...l]);"string"==typeof l[0][2]&&"number"==typeof l[1][2]&&(l=[...e,...l.slice(1)])}(),l.filter(((e,n)=>n<t||e.filter((e=>""!==e)).length))}function me(t){let n,s,l,o,i,r=(t[3].language.includes("fr")?t[1]:t[0])+"";return{c(){n=g("div"),s=g("div"),l=d(),o=g("div"),i=m(r),w(s,"class","pointer svelte-1pkt9tg"),w(o,"class","tip svelte-1pkt9tg"),w(n,"class","tooltip svelte-1pkt9tg"),C(n,"under",t[2])},m(e,t){u(e,n,t),c(n,s),c(n,l),c(n,o),c(o,i)},p(e,[t]){11&t&&r!==(r=(e[3].language.includes("fr")?e[1]:e[0])+"")&&y(i,r),4&t&&C(n,"under",e[2])},i:e,o:e,d(e){e&&h(n)}}}function de(e,t,n){let s;i(e,re,(e=>n(3,s=e)));let{english:l=""}=t,{french:o=""}=t,{under:r=!1}=t;return e.$$set=e=>{"english"in e&&n(0,l=e.english),"french"in e&&n(1,o=e.french),"under"in e&&n(2,r=e.under)},[l,o,r,s]}class ve extends te{constructor(e){super(),ee(this,e,de,me,o,{english:0,french:1,under:2})}}function $e(t){let n,s,l,o,i;return{c(){n=g("div"),s=d(),l=g("div"),o=d(),i=g("div"),w(n,"class","file-icon dl-csv-block blocked svelte-5vo5by"),w(l,"class","file-icon dl-svg-block blocked svelte-5vo5by"),w(i,"class","file-icon dl-cnc-block blocked svelte-5vo5by")},m(e,t){u(e,n,t),u(e,s,t),u(e,l,t),u(e,o,t),u(e,i,t)},p:e,i:e,o:e,d(e){e&&h(n),e&&h(s),e&&h(l),e&&h(o),e&&h(i)}}}function we(e){let t,n,s,l,o,i,r,a,c,f,p,m,v,$,x;return n=new ve({props:{french:"téléchargez le fichier .csv  (alt + v)",english:"download .csv file (alt + v)"}}),r=new ve({props:{french:"telechargez le fichier .svg (alt + g)",english:"download .svg file (alt + g)"}}),m=new ve({props:{french:"ntelechargez le fichier .cnc (alt + c)",english:"download .cnc file (alt + c)"}}),{c(){t=g("a"),Q(n.$$.fragment),o=d(),i=g("a"),Q(r.$$.fragment),f=d(),p=g("a"),Q(m.$$.fragment),w(t,"href",s="data:text/plain;charset=utf-8,"+encodeURIComponent(e[5].csv.output)),w(t,"download",l=e[5].name+e[6]()+".csv"),w(t,"role","button"),w(t,"class","file-icon dl-csv svelte-5vo5by"),w(i,"href",a="data:text/plain;charset=utf-8,"+encodeURIComponent(e[5].svg)),w(i,"download",c=e[5].name+e[6]()+".svg"),w(i,"alt","download svg file"),w(i,"role","button"),w(i,"class","file-icon dl-svg svelte-5vo5by"),w(p,"href",v="data:text/plain;charset=utf-8,"+encodeURIComponent(e[5].cnc)),w(p,"download",$=e[5].name+e[6]()+".cnc"),w(p,"role","button"),w(p,"class","file-icon dl-cnc svelte-5vo5by")},m(s,l){u(s,t,l),V(n,t,null),e[13](t),u(s,o,l),u(s,i,l),V(r,i,null),e[14](i),u(s,f,l),u(s,p,l),V(m,p,null),e[15](p),x=!0},p(e,n){(!x||32&n&&s!==(s="data:text/plain;charset=utf-8,"+encodeURIComponent(e[5].csv.output)))&&w(t,"href",s),(!x||32&n&&l!==(l=e[5].name+e[6]()+".csv"))&&w(t,"download",l),(!x||32&n&&a!==(a="data:text/plain;charset=utf-8,"+encodeURIComponent(e[5].svg)))&&w(i,"href",a),(!x||32&n&&c!==(c=e[5].name+e[6]()+".svg"))&&w(i,"download",c),(!x||32&n&&v!==(v="data:text/plain;charset=utf-8,"+encodeURIComponent(e[5].cnc)))&&w(p,"href",v),(!x||32&n&&$!==($=e[5].name+e[6]()+".cnc"))&&w(p,"download",$)},i(e){x||(Y(n.$$.fragment,e),Y(r.$$.fragment,e),Y(m.$$.fragment,e),x=!0)},o(e){J(n.$$.fragment,e),J(r.$$.fragment,e),J(m.$$.fragment,e),x=!1},d(s){s&&h(t),X(n),e[13](null),s&&h(o),s&&h(i),X(r),e[14](null),s&&h(f),s&&h(p),X(m),e[15](null)}}}function xe(e){let t,n,l,o,i,r,a,f,p,m,v,x,y,b,_,k,S;document.title=t="Ahhh Nest: "+e[5].csv.contents[0][1]||"Ahhh! Nest",a=new ve({props:{french:"ouvrir fichier .csv (alt + o)",english:"open .csv file (alt + o)"}}),v=new ve({props:{french:"nouveau fichier (alt + n)",english:"new file (alt + n)"}});const C=[we,$e],P=[];function M(e,t){return e[5].sheets.length?0:1}return y=M(e),b=P[y]=C[y](e),{c(){n=d(),l=g("div"),o=g("input"),i=d(),r=g("label"),Q(a.$$.fragment),p=d(),m=g("div"),Q(v.$$.fragment),x=d(),b.c(),w(o,"class","inputfile svelte-5vo5by"),w(o,"name","file"),w(o,"id","file"),w(o,"type","file"),w(r,"for","file"),w(r,"class",f="file-icon "+(e[0]?"badfile":"upload")+" svelte-5vo5by"),w(m,"tabindex","0"),w(m,"role","button"),w(m,"class","file-icon new svelte-5vo5by"),w(l,"class","file-mgmt svelte-5vo5by")},m(t,s){u(t,n,s),u(t,l,s),c(l,o),e[11](o),c(l,i),c(l,r),V(a,r,null),c(l,p),c(l,m),V(v,m,null),c(l,x),P[y].m(l,null),_=!0,k||(S=[$(window,"keydown",e[7]),$(window,"keyup",e[8]),$(o,"change",e[10]),$(r,"mouseover",e[12]),$(m,"click",e[9])],k=!0)},p(e,[n]){(!_||32&n)&&t!==(t="Ahhh Nest: "+e[5].csv.contents[0][1]||"Ahhh! Nest")&&(document.title=t),(!_||1&n&&f!==(f="file-icon "+(e[0]?"badfile":"upload")+" svelte-5vo5by"))&&w(r,"class",f);let s=y;y=M(e),y===s?P[y].p(e,n):(U(),J(P[s],1,1,(()=>{P[s]=null})),F(),b=P[y],b||(b=P[y]=C[y](e),b.c()),Y(b,1),b.m(l,null))},i(e){_||(Y(a.$$.fragment,e),Y(v.$$.fragment,e),Y(b),_=!0)},o(e){J(a.$$.fragment,e),J(v.$$.fragment,e),J(b),_=!1},d(t){t&&h(n),t&&h(l),e[11](null),X(a),X(v),P[y].d(),k=!1,s(S)}}}function ye(e,t,n){let s,l;i(e,re,(e=>n(17,s=e))),i(e,ae,(e=>n(5,l=e)));const o=j();let r,c,u,h,f=!1,g={};function p(){a(re,s.units=JSON.parse(l.csv.contents[3][1]),s),o("update")}function m(){a(ae,l.csv.contents=[...l.csv.new],l),p(),o("name")}return[f,r,c,u,h,l,()=>ge(new Date,"-HHhMM"),function(e){g[e.code]=!0;const t=e=>(g.AltLeft||g.AltRight)&&g[e];t("KeyO")&&setTimeout((()=>file.click()),140),t("KeyN")&&m(),t("KeyV")&&r.click(),t("KeyG")&&c.click(),t("KeyC")&&u.click(),t("KeyP")&&a(re,s.subsettings.show=!s.subsettings.show,s)},function(e){delete g[e.code]},m,function(){if(h.files[0]){if(h.files[0].name.includes(".csv")){let e=new FileReader;e.readAsText(h.files[0]),e.onload=function(e){a(ae,l.csv.contents=pe(e.target.result,l.csv.headerRows),l),n(0,f=!1),p()}}n(0,f=!0)}},function(e){E[e?"unshift":"push"]((()=>{h=e,n(4,h)}))},()=>n(0,f=!1),function(e){E[e?"unshift":"push"]((()=>{r=e,n(1,r)}))},function(e){E[e?"unshift":"push"]((()=>{c=e,n(2,c)}))},function(e){E[e?"unshift":"push"]((()=>{u=e,n(3,u)}))}]}class be extends te{constructor(e){super(),ee(this,e,ye,xe,o,{})}}function _e(e,t,n){const s=e.slice();return s[20]=t[n],s}function ke(e,t,n){const s=e.slice();return s[23]=t[n],s[24]=t,s[25]=n,s}function Se(e){let t,n,l,o,i,a,f,p,m,v,y,_,k,S,P,M,H,j,O,E,W,q,N,R,z,T,B,A;function L(){e[11].call(l,e[24],e[25])}function D(){e[12].call(p,e[24],e[25])}function G(){e[13].call(k,e[24],e[25])}function I(){e[14].call(E,e[24],e[25])}function U(...t){return e[15](e[23],...t)}return i=new ve({props:{under:!0,french:"Nom de panneau",english:"Panel Name"}}),v=new ve({props:{under:!0,french:"Quantité",english:"Quantity"}}),H=new ve({props:{under:!0,french:"Largeur ("+(e[0]?"mm":"po")+")",english:"Width ("+(e[0]?"mm":"in")+")"}}),R=new ve({props:{under:!0,french:"Hauteur ("+(e[0]?"mm":"po")+")",english:"Height ("+(e[0]?"mm":"in")+")"}}),{c(){t=g("ul"),n=g("li"),l=g("input"),o=d(),Q(i.$$.fragment),a=d(),f=g("li"),p=g("input"),m=d(),Q(v.$$.fragment),y=d(),_=g("li"),k=g("input"),M=d(),Q(H.$$.fragment),j=d(),O=g("li"),E=g("input"),N=d(),Q(R.$$.fragment),w(l,"type","text"),w(l,"class","svelte-xl6goq"),w(n,"class","svelte-xl6goq"),w(p,"type","number"),w(p,"min","0"),w(p,"max","100"),w(p,"class","svelte-xl6goq"),w(f,"class","svelte-xl6goq"),w(k,"type","number"),w(k,"min","0"),w(k,"max",S=e[2]("width")),w(k,"step",P=e[0]?.25:.03125),w(k,"class","svelte-xl6goq"),C(k,"error",e[23][2]>e[2]("width")),w(_,"class","svelte-xl6goq"),w(E,"type","number"),w(E,"min","0"),w(E,"max",W=e[2]("height")),w(E,"step",q=e[0]?.25:.03125),w(E,"class","svelte-xl6goq"),C(E,"error",e[23][3]>e[2]("height")),w(O,"class","svelte-xl6goq"),w(t,"class",z=r(e[3].activePanel==e[23][0]?"active":"")+" svelte-xl6goq")},m(s,r){u(s,t,r),c(t,n),c(n,l),b(l,e[23][0]),c(n,o),V(i,n,null),c(t,a),c(t,f),c(f,p),b(p,e[23][1]),c(f,m),V(v,f,null),c(t,y),c(t,_),c(_,k),b(k,e[23][2]),c(_,M),V(H,_,null),c(t,j),c(t,O),c(O,E),b(E,e[23][3]),c(O,N),V(R,O,null),T=!0,B||(A=[$(l,"input",L),$(l,"focus",je),$(p,"input",D),$(p,"focus",je),$(k,"input",G),$(k,"focus",je),$(E,"input",I),$(E,"focus",je),$(t,"mouseenter",U),$(t,"mouseleave",e[16])],B=!0)},p(n,s){e=n,2&s&&l.value!==e[23][0]&&b(l,e[23][0]),2&s&&x(p.value)!==e[23][1]&&b(p,e[23][1]),(!T||4&s&&S!==(S=e[2]("width")))&&w(k,"max",S),(!T||1&s&&P!==(P=e[0]?.25:.03125))&&w(k,"step",P),2&s&&x(k.value)!==e[23][2]&&b(k,e[23][2]),6&s&&C(k,"error",e[23][2]>e[2]("width"));const o={};1&s&&(o.french="Largeur ("+(e[0]?"mm":"po")+")"),1&s&&(o.english="Width ("+(e[0]?"mm":"in")+")"),H.$set(o),(!T||4&s&&W!==(W=e[2]("height")))&&w(E,"max",W),(!T||1&s&&q!==(q=e[0]?.25:.03125))&&w(E,"step",q),2&s&&x(E.value)!==e[23][3]&&b(E,e[23][3]),6&s&&C(E,"error",e[23][3]>e[2]("height"));const i={};1&s&&(i.french="Hauteur ("+(e[0]?"mm":"po")+")"),1&s&&(i.english="Height ("+(e[0]?"mm":"in")+")"),R.$set(i),(!T||10&s&&z!==(z=r(e[3].activePanel==e[23][0]?"active":"")+" svelte-xl6goq"))&&w(t,"class",z)},i(e){T||(Y(i.$$.fragment,e),Y(v.$$.fragment,e),Y(H.$$.fragment,e),Y(R.$$.fragment,e),T=!0)},o(e){J(i.$$.fragment,e),J(v.$$.fragment,e),J(H.$$.fragment,e),J(R.$$.fragment,e),T=!1},d(e){e&&h(t),X(i),X(v),X(H),X(R),B=!1,s(A)}}}function Ce(e){let t,n,s,l,o,i,r=e[1].errors.length>1?"S":"",a=e[1].errors,p=[];for(let t=0;t<a.length;t+=1)p[t]=Pe(_e(e,a,t));return{c(){t=g("div"),n=g("h5"),s=m("ERREUR"),l=m(r),o=m(":"),i=d();for(let e=0;e<p.length;e+=1)p[e].c();w(n,"class","error svelte-xl6goq"),w(t,"class","info error svelte-xl6goq")},m(e,r){u(e,t,r),c(t,n),c(n,s),c(n,l),c(n,o),c(t,i);for(let e=0;e<p.length;e+=1)p[e].m(t,null)},p(e,n){if(2&n&&r!==(r=e[1].errors.length>1?"S":"")&&y(l,r),2&n){let s;for(a=e[1].errors,s=0;s<a.length;s+=1){const l=_e(e,a,s);p[s]?p[s].p(l,n):(p[s]=Pe(l),p[s].c(),p[s].m(t,null))}for(;s<p.length;s+=1)p[s].d(1);p.length=a.length}},d(e){e&&h(t),f(p,e)}}}function Pe(e){let t,n,s=e[20]+"";return{c(){t=g("p"),n=m(s),w(t,"class","error svelte-xl6goq")},m(e,s){u(e,t,s),c(t,n)},p(e,t){2&t&&s!==(s=e[20]+"")&&y(n,s)},d(e){e&&h(t)}}}function Me(e){let t,n,s,l,o,i,r,a,f,p,v,x,b,_,k=ce(e[1].averageWaste.all,1)+"",S=(e[1].sheets.length>1?ce(e[1].averageWaste.full,1):0)+"";return{c(){t=g("div"),n=g("h5"),n.textContent="✕",s=d(),l=g("h5"),o=m("Moyen perte/feuille: "),i=m(k),r=m(" %"),a=d(),f=g("h5"),p=m("Moyen perte/feuille plein:\n        "),v=m(S),x=m("\n        %"),w(n,"class","check svelte-xl6goq"),w(t,"class","info svelte-xl6goq")},m(h,g){u(h,t,g),c(t,n),c(t,s),c(t,l),c(l,o),c(l,i),c(l,r),c(t,a),c(t,f),c(f,p),c(f,v),c(f,x),b||(_=$(t,"click",e[17]),b=!0)},p(e,t){2&t&&k!==(k=ce(e[1].averageWaste.all,1)+"")&&y(i,k),2&t&&S!==(S=(e[1].sheets.length>1?ce(e[1].averageWaste.full,1):0)+"")&&y(v,S)},d(e){e&&h(t),b=!1,_()}}}function He(e){let t,n,l,o,i,r,a,p,v,x,y,b,_,k,S,C,P,M,H,j,O,E,W,q,N,R,z,T,B,A;a=new ve({props:{under:!0,french:"Nom de panneau",english:"Panel Name"}}),b=new ve({props:{under:!0,french:"Quantité",english:"Quantity"}}),P=new ve({props:{under:!0,french:"Largeur ("+(e[0]?"mm":"po")+")",english:"Width ("+(e[0]?"mm":"in")+")"}}),E=new ve({props:{under:!0,french:"Hauteur ("+(e[0]?"mm":"po")+")",english:"Height ("+(e[0]?"mm":"in")+")"}});let L=e[1].csv.panels,D=[];for(let t=0;t<L.length;t+=1)D[t]=Se(ke(e,L,t));const G=e=>J(D[e],1,1,(()=>{D[e]=null}));let I=e[1].errors.length&&Ce(e),K=e[1].averageWaste&&Me(e);return{c(){t=g("div"),n=g("div"),l=g("ul"),o=g("li"),i=g("h1"),r=m("⊛\n          "),Q(a.$$.fragment),p=d(),v=g("li"),x=g("h1"),y=m("⧉\n          "),Q(b.$$.fragment),_=d(),k=g("li"),S=g("h1"),C=m("⍈\n          "),Q(P.$$.fragment),M=d(),H=g("li"),j=g("h1"),O=m("⍗\n          "),Q(E.$$.fragment),W=d();for(let e=0;e<D.length;e+=1)D[e].c();q=d(),N=g("ul"),N.textContent="+",R=d(),I&&I.c(),z=d(),K&&K.c(),w(o,"class","svelte-xl6goq"),w(v,"class","svelte-xl6goq"),w(k,"class","svelte-xl6goq"),w(H,"class","svelte-xl6goq"),w(l,"class","header svelte-xl6goq"),w(N,"class","new-row svelte-xl6goq"),w(N,"role","button"),w(n,"class","svelte-xl6goq"),w(t,"class","wrapper svelte-xl6goq")},m(s,h){u(s,t,h),c(t,n),c(n,l),c(l,o),c(o,i),c(i,r),V(a,i,null),c(l,p),c(l,v),c(v,x),c(x,y),V(b,x,null),c(l,_),c(l,k),c(k,S),c(S,C),V(P,S,null),c(l,M),c(l,H),c(H,j),c(j,O),V(E,j,null),c(n,W);for(let e=0;e<D.length;e+=1)D[e].m(n,null);c(n,q),c(n,N),c(t,R),I&&I.m(t,null),c(t,z),K&&K.m(t,null),T=!0,B||(A=[$(o,"click",e[7]),$(v,"click",e[8]),$(k,"click",e[9]),$(H,"click",e[10]),$(N,"click",e[4])],B=!0)},p(e,[s]){const l={};1&s&&(l.french="Largeur ("+(e[0]?"mm":"po")+")"),1&s&&(l.english="Width ("+(e[0]?"mm":"in")+")"),P.$set(l);const o={};if(1&s&&(o.french="Hauteur ("+(e[0]?"mm":"po")+")"),1&s&&(o.english="Height ("+(e[0]?"mm":"in")+")"),E.$set(o),15&s){let t;for(L=e[1].csv.panels,t=0;t<L.length;t+=1){const l=ke(e,L,t);D[t]?(D[t].p(l,s),Y(D[t],1)):(D[t]=Se(l),D[t].c(),Y(D[t],1),D[t].m(n,q))}for(U(),t=L.length;t<D.length;t+=1)G(t);F()}e[1].errors.length?I?I.p(e,s):(I=Ce(e),I.c(),I.m(t,z)):I&&(I.d(1),I=null),e[1].averageWaste?K?K.p(e,s):(K=Me(e),K.c(),K.m(t,null)):K&&(K.d(1),K=null)},i(e){if(!T){Y(a.$$.fragment,e),Y(b.$$.fragment,e),Y(P.$$.fragment,e),Y(E.$$.fragment,e);for(let e=0;e<L.length;e+=1)Y(D[e]);T=!0}},o(e){J(a.$$.fragment,e),J(b.$$.fragment,e),J(P.$$.fragment,e),J(E.$$.fragment,e),D=D.filter(Boolean);for(let e=0;e<D.length;e+=1)J(D[e]);T=!1},d(e){e&&h(t),X(a),X(b),X(P),X(E),f(D,e),I&&I.d(),K&&K.d(),B=!1,s(A)}}}function je(){this.select()}function Oe(e,t,n){let s,l;i(e,ae,(e=>n(1,s=e))),i(e,re,(e=>n(3,l=e)));const o=j();function r(e){a(ae,s.csv.panels=s.csv.panels.sort(((t,n)=>t[e]-n[e])),s)}function c(e){a(ae,s.csv.panels=s.csv.panels.sort(((t,n)=>n[e]-t[e])),s)}let u,h;return e.$$.update=()=>{2&e.$$.dirty&&n(0,u=JSON.parse(s.csv.contents[3][1])),9&e.$$.dirty&&n(2,h=e=>{let t=l.material[e]-2*l.material.margins;return u?he(t):t})},[u,s,h,l,function(){let e=[s.csv.panels.length+1,0,0,0];a(ae,s.csv.contents=[...s.csv.contents,e],s),o("update")},r,c,()=>r(0),()=>c(1),()=>c(2),()=>c(3),function(e,t){e[t][0]=this.value},function(e,t){e[t][1]=x(this.value)},function(e,t){e[t][2]=x(this.value)},function(e,t){e[t][3]=x(this.value)},e=>a(re,l.activePanel=e[0],l),()=>a(re,l.activePanel="",l),()=>a(ae,s.averageWaste=!1,s)]}class Ee extends te{constructor(e){super(),ee(this,e,Oe,He,o,{})}}function We(e,t,n){const s=e.slice();return s[18]=t[n],s}function qe(e,t,n){const s=e.slice();return s[15]=t[n],s[17]=n,s}function Ne(e){let t,n,s,l,o,i,r,a,f,p,v,$,x,b,k,S,C,P,M,H,j=e[5].sheets[e[0]].id+"",O=ce(e[5].sheets[e[0]].area/144,2)+"",E=ce(e[5].sheets[e[0]].waste_area/144,2)+"",W=ce(100*e[5].sheets[e[0]].waste_ratio,2)+"";return{c(){t=g("div"),n=g("h4"),s=m(j),l=d(),o=g("p"),i=m("area des panneaux:\n      "),r=m(O),a=m("\n      pi"),f=g("sup"),f.textContent="2",p=d(),v=g("p"),$=m("area de perte:\n      "),x=m(E),b=m("\n      pi"),k=g("sup"),k.textContent="2",S=d(),C=g("p"),P=m("% de perte: "),M=m(W),H=m("%"),w(f,"class","svelte-63mnd5"),w(k,"class","svelte-63mnd5"),w(t,"class","infocard svelte-63mnd5"),_(t,"left",e[3]+"px"),_(t,"top",e[2]+"px")},m(e,h){u(e,t,h),c(t,n),c(n,s),c(t,l),c(t,o),c(o,i),c(o,r),c(o,a),c(o,f),c(t,p),c(t,v),c(v,$),c(v,x),c(v,b),c(v,k),c(t,S),c(t,C),c(C,P),c(C,M),c(C,H)},p(e,n){33&n&&j!==(j=e[5].sheets[e[0]].id+"")&&y(s,j),33&n&&O!==(O=ce(e[5].sheets[e[0]].area/144,2)+"")&&y(r,O),33&n&&E!==(E=ce(e[5].sheets[e[0]].waste_area/144,2)+"")&&y(x,E),33&n&&W!==(W=ce(100*e[5].sheets[e[0]].waste_ratio,2)+"")&&y(M,W),8&n&&_(t,"left",e[3]+"px"),4&n&&_(t,"top",e[2]+"px")},d(e){e&&h(t)}}}function Re(e){let t,n,l,o,i,r,a,f,g,d,v,x,b,k,S=e[18].id+"";return{c(){t=p("rect"),f=p("text"),g=m(S),_(t,"stroke-width",e[6].cnc[e[6].tools.profile].diameter*e[7]+"px"),w(t,"class",n="panel "+(e[6].activePanel==e[18].id?"active":"")+" print svelte-63mnd5"),w(t,"id",l=e[18].id),w(t,"x",o=(e[18].x+e[13](e[17]).x)*e[7]),w(t,"y",i=(e[12](e[18].y,e[18].height)+e[13](e[17]).y)*e[7]),w(t,"width",r=e[18].width*e[7]),w(t,"height",a=e[18].height*e[7]),_(f,"font-size",e[7]*(e[18].id.length>6?Math.min(.4*e[18].height,2.5):Math.min(.8*e[18].height,5))+"px"),w(f,"class",d="id "+(e[6].activePanel==e[18].id?"active":"")+" print svelte-63mnd5"),w(f,"x",v=(e[18].x+e[13](e[17]).x+e[18].width/2)*e[7]),w(f,"y",x=(e[12](e[18].y,e[18].height)+e[13](e[17]).y+Math.min(.8*e[18].height,5)/3+e[18].height/2)*e[7])},m(n,s){u(n,t,s),u(n,f,s),c(f,g),b||(k=[$(t,"mouseover",e[8]),$(t,"mouseleave",e[9])],b=!0)},p(e,s){64&s&&_(t,"stroke-width",e[6].cnc[e[6].tools.profile].diameter*e[7]+"px"),96&s&&n!==(n="panel "+(e[6].activePanel==e[18].id?"active":"")+" print svelte-63mnd5")&&w(t,"class",n),32&s&&l!==(l=e[18].id)&&w(t,"id",l),32&s&&o!==(o=(e[18].x+e[13](e[17]).x)*e[7])&&w(t,"x",o),32&s&&i!==(i=(e[12](e[18].y,e[18].height)+e[13](e[17]).y)*e[7])&&w(t,"y",i),32&s&&r!==(r=e[18].width*e[7])&&w(t,"width",r),32&s&&a!==(a=e[18].height*e[7])&&w(t,"height",a),32&s&&S!==(S=e[18].id+"")&&y(g,S),32&s&&_(f,"font-size",e[7]*(e[18].id.length>6?Math.min(.4*e[18].height,2.5):Math.min(.8*e[18].height,5))+"px"),96&s&&d!==(d="id "+(e[6].activePanel==e[18].id?"active":"")+" print svelte-63mnd5")&&w(f,"class",d),32&s&&v!==(v=(e[18].x+e[13](e[17]).x+e[18].width/2)*e[7])&&w(f,"x",v),32&s&&x!==(x=(e[12](e[18].y,e[18].height)+e[13](e[17]).y+Math.min(.8*e[18].height,5)/3+e[18].height/2)*e[7])&&w(f,"y",x)},d(e){e&&h(t),e&&h(f),b=!1,s(k)}}}function ze(e){let t,n,l,o,i,r,a,g,m,d,v=e[15].group,x=[];for(let t=0;t<v.length;t+=1)x[t]=Re(We(e,v,t));return{c(){t=p("g"),n=p("rect"),g=p("g");for(let e=0;e<x.length;e+=1)x[e].c();_(n,"stroke-width",e[6].material.margins*e[7]+"px"),w(n,"class","sheet print svelte-63mnd5"),w(n,"id",l=e[17]),w(n,"x",o=(e[13](e[17]).x+e[6].material.margins/2-e[5].offset.X)*e[7]),w(n,"y",i=(e[13](e[17]).y+e[6].material.margins/2+e[5].offset.Y)*e[7]),w(n,"width",r=(e[15].sheet_width-e[6].material.margins)*e[7]),w(n,"height",a=(e[15].sheet_height-e[6].material.margins)*e[7]),w(t,"id","sheets"),w(g,"id","panels")},m(s,l){u(s,t,l),c(t,n),u(s,g,l);for(let e=0;e<x.length;e+=1)x[e].m(g,null);m||(d=[$(n,"mouseover",e[10]),$(n,"mouseleave",e[11])],m=!0)},p(e,t){if(64&t&&_(n,"stroke-width",e[6].material.margins*e[7]+"px"),96&t&&o!==(o=(e[13](e[17]).x+e[6].material.margins/2-e[5].offset.X)*e[7])&&w(n,"x",o),96&t&&i!==(i=(e[13](e[17]).y+e[6].material.margins/2+e[5].offset.Y)*e[7])&&w(n,"y",i),96&t&&r!==(r=(e[15].sheet_width-e[6].material.margins)*e[7])&&w(n,"width",r),96&t&&a!==(a=(e[15].sheet_height-e[6].material.margins)*e[7])&&w(n,"height",a),13280&t){let n;for(v=e[15].group,n=0;n<v.length;n+=1){const s=We(e,v,n);x[n]?x[n].p(s,t):(x[n]=Re(s),x[n].c(),x[n].m(g,null))}for(;n<x.length;n+=1)x[n].d(1);x.length=v.length}},d(e){e&&h(t),e&&h(g),f(x,e),m=!1,s(d)}}}function Te(t){let n,s,l,o,i,r,a=t[1]&&Ne(t),m=t[5].sheets,v=[];for(let e=0;e<m.length;e+=1)v[e]=ze(qe(t,m,e));return{c(){a&&a.c(),n=d(),s=g("div"),l=p("svg");for(let e=0;e<v.length;e+=1)v[e].c();w(l,"class","print svelte-63mnd5"),w(l,"version","1.1"),w(l,"xmlns","http://www.w3.org/2000/svg"),w(l,"xmlns:xlink","http://www.w3.org/1999/xlink"),w(l,"width",o=t[13](t[5].sheets.last).w*t[7]||0),w(l,"height",i=t[13](t[5].sheets.last).h*t[7]||0),w(l,"viewBox",r="0 0 "+(t[13](t[5].sheets.last).w*t[7]||0)+" "+(t[13](t[5].sheets.last).h*t[7]||0)),w(l,"preserveAspectRatio","xMidYMid meet"),w(s,"class","viewer svelte-63mnd5")},m(e,o){a&&a.m(e,o),u(e,n,o),u(e,s,o),c(s,l);for(let e=0;e<v.length;e+=1)v[e].m(l,null);t[14](s)},p(e,[t]){if(e[1]?a?a.p(e,t):(a=Ne(e),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null),16352&t){let n;for(m=e[5].sheets,n=0;n<m.length;n+=1){const s=qe(e,m,n);v[n]?v[n].p(s,t):(v[n]=ze(s),v[n].c(),v[n].m(l,null))}for(;n<v.length;n+=1)v[n].d(1);v.length=m.length}32&t&&o!==(o=e[13](e[5].sheets.last).w*e[7]||0)&&w(l,"width",o),32&t&&i!==(i=e[13](e[5].sheets.last).h*e[7]||0)&&w(l,"height",i),32&t&&r!==(r="0 0 "+(e[13](e[5].sheets.last).w*e[7]||0)+" "+(e[13](e[5].sheets.last).h*e[7]||0))&&w(l,"viewBox",r)},i:e,o:e,d(e){a&&a.d(e),e&&h(n),e&&h(s),f(v,e),t[14](null)}}}function Be(e,t,n){let s,l;i(e,ae,(e=>n(5,s=e))),i(e,re,(e=>n(6,l=e)));let o,r,c=!1,u=0,h=0;var f;return f=()=>{a(ae,s.svg=r.innerHTML.toString(),s)},H().$$.after_update.push(f),[o,c,u,h,r,s,l,90,function(){a(re,l.activePanel=this.id,l)},function(){a(re,l.activePanel="",l)},function(){n(1,c=!0);let e=this.getBoundingClientRect();n(2,u=(e.bottom-e.top)/2+e.top),n(3,h=(e.right-e.left)/2+e.left),n(0,o=this.id)},function(){n(1,c=!1)},function(e,t){return l.material.height-t-e},function(e){let t=Math.ceil(s.sheets.length/5),n=Math.ceil(s.sheets.length/t),o=Math.ceil((e+1)/n)-1;return{x:e%n*l.material.width,y:o*l.material.height,w:n*l.material.width,h:t*l.material.height}},function(e){E[e?"unshift":"push"]((()=>{r=e,n(4,r)}))}]}class Ae extends te{constructor(e){super(),ee(this,e,Be,Te,o,{})}}function Le(t){let n,l,o,i,r,a,f,p,v,x,b,_=(t[4].language.includes("fr")?t[2]:t[1])+"",k=t[0]?"⩓":"⩔";return{c(){n=g("div"),l=g("h3"),o=g("span"),i=m(t[3]),r=d(),a=m(_),f=d(),p=g("span"),v=m(k),w(o,"class","svelte-l11dgs"),w(l,"class","svelte-l11dgs"),w(p,"class","end svelte-l11dgs"),w(n,"class","drop svelte-l11dgs"),C(n,"open",t[0])},m(e,s){u(e,n,s),c(n,l),c(l,o),c(o,i),c(l,r),c(l,a),c(n,f),c(n,p),c(p,v),x||(b=[$(n,"click",t[5]),$(n,"focus",t[6])],x=!0)},p(e,[t]){8&t&&y(i,e[3]),22&t&&_!==(_=(e[4].language.includes("fr")?e[2]:e[1])+"")&&y(a,_),1&t&&k!==(k=e[0]?"⩓":"⩔")&&y(v,k),1&t&&C(n,"open",e[0])},i:e,o:e,d(e){e&&h(n),x=!1,s(b)}}}function De(e,t,n){let s;i(e,re,(e=>n(4,s=e)));const l=j();let{open:o}=t,{english:r=""}=t,{french:a=""}=t,{icon:c=""}=t;return e.$$set=e=>{"open"in e&&n(0,o=e.open),"english"in e&&n(1,r=e.english),"french"in e&&n(2,a=e.french),"icon"in e&&n(3,c=e.icon)},[o,r,a,c,s,function(){l("toggle")},function(){l("focused")}]}class Ge extends te{constructor(e){super(),ee(this,e,De,Le,o,{open:0,english:1,french:2,icon:3})}}function Ie(t){let n,l,o,i,r,a,f,p,v,_=(t[7].language.includes("fr")?t[5]:t[4])+"";return{c(){n=g("h5"),l=m(_),o=m(":\n  "),i=g("input"),r=d(),a=g("span"),f=m(t[6]),w(i,"type","number"),w(i,"min",t[1]),w(i,"max",t[2]),w(i,"step",t[3]),w(i,"class","svelte-17gjz45"),w(a,"class","svelte-17gjz45"),w(n,"class","svelte-17gjz45")},m(e,s){u(e,n,s),c(n,l),c(n,o),c(n,i),b(i,t[0]),c(n,r),c(n,a),c(a,f),p||(v=[$(i,"click",Ue),$(i,"change",t[8]),$(i,"input",t[11]),$(a,"click",t[9])],p=!0)},p(e,[t]){176&t&&_!==(_=(e[7].language.includes("fr")?e[5]:e[4])+"")&&y(l,_),2&t&&w(i,"min",e[1]),4&t&&w(i,"max",e[2]),8&t&&w(i,"step",e[3]),1&t&&x(i.value)!==e[0]&&b(i,e[0]),64&t&&y(f,e[6])},i:e,o:e,d(e){e&&h(n),p=!1,s(v)}}}function Ue(){this.select()}function Fe(e,t,n){let s;i(e,re,(e=>n(7,s=e)));const l=j();let{value:o}=t,{min:r=0}=t,{max:a}=t,{step:c}=t,{english:u=""}=t,{french:h=""}=t,{measurement:f=""}=t,{unit:g=""}=t;return e.$$set=e=>{"value"in e&&n(0,o=e.value),"min"in e&&n(1,r=e.min),"max"in e&&n(2,a=e.max),"step"in e&&n(3,c=e.step),"english"in e&&n(4,u=e.english),"french"in e&&n(5,h=e.french),"measurement"in e&&n(6,f=e.measurement),"unit"in e&&n(10,g=e.unit)},[o,r,a,c,u,h,f,s,function(){l("changed")},function(){l("convert"),n(10,g=!g)},g,function(){o=x(this.value),n(0,o)}]}class Ye extends te{constructor(e){super(),ee(this,e,Fe,Ie,o,{value:0,min:1,max:2,step:3,english:4,french:5,measurement:6,unit:10})}}function Je(t){let n,l,o,i,r,a,f=(t[3].language.includes("fr")?t[2]:t[1])+"";return{c(){n=g("h5"),l=m(f),o=m(":\n  "),i=g("input"),w(i,"type","text"),w(i,"class","svelte-1k7s5l6"),w(n,"class","svelte-1k7s5l6")},m(e,s){u(e,n,s),c(n,l),c(n,o),c(n,i),b(i,t[0]),r||(a=[$(i,"click",Ke),$(i,"input",t[4])],r=!0)},p(e,[t]){14&t&&f!==(f=(e[3].language.includes("fr")?e[2]:e[1])+"")&&y(l,f),1&t&&i.value!==e[0]&&b(i,e[0])},i:e,o:e,d(e){e&&h(n),r=!1,s(a)}}}function Ke(){this.select()}function Qe(e,t,n){let s;i(e,re,(e=>n(3,s=e)));let{value:l}=t,{english:o=""}=t,{french:r=""}=t;return e.$$set=e=>{"value"in e&&n(0,l=e.value),"english"in e&&n(1,o=e.english),"french"in e&&n(2,r=e.french)},[l,o,r,s,function(){l=this.value,n(0,l)}]}class Ve extends te{constructor(e){super(),ee(this,e,Qe,Je,o,{value:0,english:1,french:2})}}function Xe(t){let n,l,o,i,r,a,f,p,v,x,b,_=(t[6].language.includes("fr")?t[5]:t[4])+"";return{c(){n=g("h5"),l=m(_),o=m(t[3]),i=d(),r=g("label"),a=g("input"),f=d(),p=g("div"),w(a,"type","checkbox"),w(a,"class","svelte-13h5iuk"),w(p,"class","slider svelte-13h5iuk"),w(p,"data-content",v=t[0]?t[1]:t[2]),w(r,"class","switch svelte-13h5iuk"),w(n,"class","svelte-13h5iuk")},m(e,s){u(e,n,s),c(n,l),c(n,o),c(n,i),c(n,r),c(r,a),a.checked=t[0],c(r,f),c(r,p),x||(b=[$(a,"click",t[7]),$(a,"change",t[8])],x=!0)},p(e,[t]){112&t&&_!==(_=(e[6].language.includes("fr")?e[5]:e[4])+"")&&y(l,_),8&t&&y(o,e[3]),1&t&&(a.checked=e[0]),7&t&&v!==(v=e[0]?e[1]:e[2])&&w(p,"data-content",v)},i:e,o:e,d(e){e&&h(n),x=!1,s(b)}}}function Ze(e,t,n){let s;i(e,re,(e=>n(6,s=e)));const l=j();let{checked:o}=t,{on:r}=t,{off:a}=t,{separator:c=":"}=t,{english:u=""}=t,{french:h=""}=t;return e.$$set=e=>{"checked"in e&&n(0,o=e.checked),"on"in e&&n(1,r=e.on),"off"in e&&n(2,a=e.off),"separator"in e&&n(3,c=e.separator),"english"in e&&n(4,u=e.english),"french"in e&&n(5,h=e.french)},[o,r,a,c,u,h,s,function(){l("toggle")},function(){o=this.checked,n(0,o)}]}class et extends te{constructor(e){super(),ee(this,e,Ze,Xe,o,{checked:0,on:1,off:2,separator:3,english:4,french:5})}}function tt(e,t,n){const s=e.slice();return s[53]=t[n],s}function nt(e,t,n){const s=e.slice();return s[56]=t[n],s[57]=t,s[58]=n,s}function st(e,t,n){const s=e.slice();return s[53]=t[n],s}function lt(e,t,n){const s=e.slice();return s[53]=t[n],s}function ot(e){let t,n,s;function l(t){e[23].call(null,t)}let o={english:"Placement direction",french:"Direction de placement",on:(e[2]?"Colonnes":"Columns")+" ⇈",off:(e[2]?"Lignes":"Rows")+" ⇉"};return void 0!==e[0].nestTypeColumn&&(o.checked=e[0].nestTypeColumn),t=new et({props:o}),E.push((()=>K(t,"checked",l))),{c(){Q(t.$$.fragment)},m(e,n){V(t,e,n),s=!0},p(e,s){const l={};!n&&1&s[0]&&(n=!0,l.checked=e[0].nestTypeColumn,T((()=>n=!1))),t.$set(l)},i(e){s||(Y(t.$$.fragment,e),s=!0)},o(e){J(t.$$.fragment,e),s=!1},d(e){X(t,e)}}}function it(e){let t,n,s,l,o,i,r,a,f,p=e[53]+"",v=e[0].cnc[e[53]].diameter+"",$=e[0].cnc[e[53]].type+"";return{c(){t=g("option"),n=m("("),s=m(p),l=m(") -\n                "),o=m(v),i=d(),r=m($),a=d(),t.__value=f=e[53],t.value=t.__value,w(t,"class","svelte-sibth6")},m(e,h){u(e,t,h),c(t,n),c(t,s),c(t,l),c(t,o),c(t,i),c(t,r),c(t,a)},p(e,n){1&n[0]&&p!==(p=e[53]+"")&&y(s,p),1&n[0]&&v!==(v=e[0].cnc[e[53]].diameter+"")&&y(o,v),1&n[0]&&$!==($=e[0].cnc[e[53]].type+"")&&y(r,$),1&n[0]&&f!==(f=e[53])&&(t.__value=f,t.value=t.__value)},d(e){e&&h(t)}}}function rt(e){let t,n=e[0].cnc[e[53]].type.includes("mill"),s=n&&it(e);return{c(){s&&s.c(),t=v()},m(e,n){s&&s.m(e,n),u(e,t,n)},p(e,l){1&l[0]&&(n=e[0].cnc[e[53]].type.includes("mill")),n?s?s.p(e,l):(s=it(e),s.c(),s.m(t.parentNode,t)):s&&(s.d(1),s=null)},d(e){s&&s.d(e),e&&h(t)}}}function at(e){let t,n,s,l,o,i,r,a,f,p=e[53]+"",v=e[0].cnc[e[53]].diameter+"",$=e[0].cnc[e[53]].type+"";return{c(){t=g("option"),n=m("("),s=m(p),l=m(") -\n                "),o=m(v),i=d(),r=m($),a=d(),t.__value=f=e[53],t.value=t.__value,w(t,"class","svelte-sibth6")},m(e,h){u(e,t,h),c(t,n),c(t,s),c(t,l),c(t,o),c(t,i),c(t,r),c(t,a)},p(e,n){1&n[0]&&p!==(p=e[53]+"")&&y(s,p),1&n[0]&&v!==(v=e[0].cnc[e[53]].diameter+"")&&y(o,v),1&n[0]&&$!==($=e[0].cnc[e[53]].type+"")&&y(r,$),1&n[0]&&f!==(f=e[53])&&(t.__value=f,t.value=t.__value)},d(e){e&&h(t)}}}function ct(e){let t,n=e[0].cnc[e[53]].type.includes("nose")||e[0].cnc[e[53]].type.includes("V-"),s=n&&at(e);return{c(){s&&s.c(),t=v()},m(e,n){s&&s.m(e,n),u(e,t,n)},p(e,l){1&l[0]&&(n=e[0].cnc[e[53]].type.includes("nose")||e[0].cnc[e[53]].type.includes("V-")),n?s?s.p(e,l):(s=at(e),s.c(),s.m(t.parentNode,t)):s&&(s.d(1),s=null)},d(e){s&&s.d(e),e&&h(t)}}}function ut(e){let t,n,s,l;function o(t){e[37].call(null,t,e[56])}function i(t){e[38].call(null,t)}let r={english:e[56],french:e[56],max:e[0].units?2800:121,step:e[0].units?.5:.03125,measurement:e[0].units?"mm":'"'};return void 0!==e[1].offset[e[56]]&&(r.value=e[1].offset[e[56]]),void 0!==e[0].units&&(r.unit=e[0].units),t=new Ye({props:r}),E.push((()=>K(t,"value",o))),E.push((()=>K(t,"unit",i))),{c(){Q(t.$$.fragment)},m(e,n){V(t,e,n),l=!0},p(l,o){e=l;const i={};2&o[0]&&(i.english=e[56]),2&o[0]&&(i.french=e[56]),1&o[0]&&(i.max=e[0].units?2800:121),1&o[0]&&(i.step=e[0].units?.5:.03125),1&o[0]&&(i.measurement=e[0].units?"mm":'"'),!n&&2&o[0]&&(n=!0,i.value=e[1].offset[e[56]],T((()=>n=!1))),!s&&1&o[0]&&(s=!0,i.unit=e[0].units,T((()=>s=!1))),t.$set(i)},i(e){l||(Y(t.$$.fragment,e),l=!0)},o(e){J(t.$$.fragment,e),l=!1},d(e){X(t,e)}}}function ht(e){let t,n,s,l,o,i,r,a,f,p,v=e[53]+"",$=e[0].cnc[e[53]].diameter+"",x=e[0].cnc[e[53]].mm?"mm":'"',b=e[0].cnc[e[53]].type+"";return{c(){t=g("option"),n=m("("),s=m(v),l=m(") -\n                "),o=m($),i=m(x),r=d(),a=m(b),f=d(),t.__value=p=e[53],t.value=t.__value,w(t,"class","svelte-sibth6")},m(e,h){u(e,t,h),c(t,n),c(t,s),c(t,l),c(t,o),c(t,i),c(t,r),c(t,a),c(t,f)},p(e,n){1&n[0]&&v!==(v=e[53]+"")&&y(s,v),1&n[0]&&$!==($=e[0].cnc[e[53]].diameter+"")&&y(o,$),1&n[0]&&x!==(x=e[0].cnc[e[53]].mm?"mm":'"')&&y(i,x),1&n[0]&&b!==(b=e[0].cnc[e[53]].type+"")&&y(a,b),1&n[0]&&p!==(p=e[53])&&(t.__value=p,t.value=t.__value)},d(e){e&&h(t)}}}function ft(e){let t,n=e[0].cnc[e[53]]&&ht(e);return{c(){n&&n.c(),t=v()},m(e,s){n&&n.m(e,s),u(e,t,s)},p(e,s){e[0].cnc[e[53]]?n?n.p(e,s):(n=ht(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&h(t)}}}function gt(e){let t,n,l,o,i,r,a,p,v,x,b,_,S,P,M,H,j,O,W,q,N,R,B,A,L,D,G,I,Z,ee,te,ne,se,le,oe,ie,re,ae,ce,ue,he,fe,ge,pe,me,de,ve,$e,we,xe,ye,be,_e,ke,Se,Ce,Pe,Me,He,je,Oe,Ee,We,qe,Ne,Re,ze,Te,Be,Ae,Le,De,Ie,Ue,Fe,Je,Ke,Qe,Xe,Ze,it,at,ht,gt,pt,mt,dt,vt,$t,wt,xt,yt,bt,_t,kt,St,Ct,Pt,Mt,Ht,jt,Ot,Et,Wt,qt,Nt,Rt,zt,Tt,Bt,At,Lt,Dt,Gt,It,Ut,Ft,Yt,Jt,Kt,Qt,Vt,Xt,Zt,en,tn,nn,sn,ln,on,rn,an,cn,un,hn,fn,gn,pn,mn,dn,vn,$n,wn,xn,yn,bn,_n,kn,Sn,Cn,Pn,Mn,Hn,jn=e[0].subsettings.show?"⩚":"⩛",On=e[2]?"Classé par le:":"Sorted by:",En=e[2]?"Outil:":"Tool:",Wn=e[2]?"Outil:":"Tool:",qn=e[2]?"Outil #":"Tool #";function Nn(t){e[10].call(null,t)}v=new Ge({props:{open:e[0].subsettings.project,icon:"⟐",french:"Projet",english:"Project"}}),v.$on("toggle",e[9]);let Rn={english:"Billing #",french:"Facture #"};function zn(t){e[11].call(null,t)}void 0!==e[1].csv.contents[0][1]&&(Rn.value=e[1].csv.contents[0][1]),_=new Ve({props:Rn}),E.push((()=>K(_,"value",Nn)));let Tn={english:e[1].csv.contents[0][4]?e[1].csv.contents[0][4]:"Product",french:e[1].csv.contents[0][4]?e[1].csv.contents[0][4]:"Produit"};function Bn(t){e[12].call(null,t)}void 0!==e[1].csv.contents[0][5]&&(Tn.value=e[1].csv.contents[0][5]),M=new Ve({props:Tn}),E.push((()=>K(M,"value",zn)));let An={on:"☑︎",off:"☐",french:"Graver les noms des panneaux",english:"Engrave the panel names"};function Ln(t){e[13].call(null,t)}void 0!==e[1].tools.engraver.engrave&&(An.checked=e[1].tools.engraver.engrave),O=new et({props:An}),E.push((()=>K(O,"checked",Bn)));let Dn={on:"mm",off:e[0].language.includes("fr")?"po":"in",french:"Unites",english:"Units"};function Gn(t){e[15].call(null,t)}void 0!==e[0].units&&(Dn.checked=e[0].units),N=new et({props:Dn}),E.push((()=>K(N,"checked",Ln))),N.$on("toggle",e[4]),A=new Ge({props:{open:e[0].subsettings.sheet,icon:"☐",english:"Material",french:"Matériau"}}),A.$on("toggle",e[14]);let In={english:e[1].csv.contents[0][2]?e[1].csv.contents[0][2]:"Type of panel",french:e[1].csv.contents[0][2]?e[1].csv.contents[0][2]:"Sorte de panneau"};function Un(t){e[16].call(null,t)}void 0!==e[1].csv.contents[0][3]&&(In.value=e[1].csv.contents[0][3]),G=new Ve({props:In}),E.push((()=>K(G,"value",Gn)));let Fn={english:"Width",french:"Largeur",max:"61",step:"0.0625",measurement:'"'};function Yn(t){e[17].call(null,t)}void 0!==e[0].material.width&&(Fn.value=e[0].material.width),ee=new Ye({props:Fn}),E.push((()=>K(ee,"value",Un)));let Jn={english:"Height",french:"Hauteur",max:"121",step:"0.0625",measurement:'"'};function Kn(t){e[18].call(null,t)}void 0!==e[0].material.height&&(Jn.value=e[0].material.height),se=new Ye({props:Jn}),E.push((()=>K(se,"value",Yn)));let Qn={english:"Thickness",french:"Épaisseur",max:"5",step:"0.005",measurement:'"'};function Vn(t){e[19].call(null,t)}void 0!==e[0].material.thickness&&(Qn.value=e[0].material.thickness),ie=new Ye({props:Qn}),E.push((()=>K(ie,"value",Kn))),ie.$on("changed",e[3]);let Xn={english:"Margins",french:"Marges",max:"5",step:"0.05",measurement:'"'};function Zn(t){e[21].call(null,t)}void 0!==e[0].material.margins&&(Xn.value=e[0].material.margins),ce=new Ye({props:Xn}),E.push((()=>K(ce,"value",Vn))),fe=new Ge({props:{open:e[0].subsettings.nest,icon:"⊞",english:"Nesting",french:"Nesting"}}),fe.$on("toggle",e[20]);let es={english:"Aligned to the",french:"Aligné avec le",on:(e[2]?"bas":"Bottom")+" ⤓",off:(e[2]?"haut":"Top")+" ⤒"};void 0!==e[0].nestDirectionBottom&&(es.checked=e[0].nestDirectionBottom),me=new et({props:es}),E.push((()=>K(me,"checked",Zn)));let ts="automatic"!=e[0].nestOrder&&ot(e);Be=new Ge({props:{open:e[0].subsettings.profile,icon:"⨆",english:"Profile cut",french:"Coupe profile"}}),Be.$on("toggle",e[24]);let ns=Object.keys(e[0].cnc),ss=[];for(let t=0;t<ns.length;t+=1)ss[t]=rt(lt(e,ns,t));function ls(t){e[26].call(null,t)}let os={english:"Cut depth",french:"Profondeur coupe",max:e[0].cnc[e[0].tools.profile].max_depth,step:"0.05",measurement:'"'};function is(t){e[27].call(null,t)}void 0!==e[1].tools.profile.cut_depth&&(os.value=e[1].tools.profile.cut_depth),Xe=new Ye({props:os}),E.push((()=>K(Xe,"value",ls)));let rs={english:"Smallest for one pass",french:"Plus petit pour un passe",max:e[0].material.width,step:"0.5",measurement:'"'};function as(t){e[28].call(null,t)}void 0!==e[1].tools.profile.min_size&&(rs.value=e[1].tools.profile.min_size),at=new Ye({props:rs}),E.push((()=>K(at,"value",is)));let cs={english:"Last pass link",french:"Lien pour dernier passe",max:e[0].material.thickness,step:"0.005",measurement:'"'};void 0!==e[1].tools.profile.link&&(cs.value=e[1].tools.profile.link),pt=new Ye({props:cs}),E.push((()=>K(pt,"value",as))),vt=new Ge({props:{open:e[0].subsettings.engraver,icon:"⋁",english:"Engraving",french:"Graver"}}),vt.$on("toggle",e[29]);let us=Object.keys(e[0].cnc),hs=[];for(let t=0;t<us.length;t+=1)hs[t]=ct(st(e,us,t));function fs(t){e[31].call(null,t)}let gs={english:"Cut depth",french:"Profondeur coupe",max:e[0].cnc[e[0].tools.engraver].max_depth,step:"0.005",measurement:'"'};function ps(t){e[32].call(null,t)}void 0!==e[1].tools.engraver.cut_depth&&(gs.value=e[1].tools.engraver.cut_depth),Pt=new Ye({props:gs}),E.push((()=>K(Pt,"value",fs)));let ms={english:"Placement from left",french:"Placement de gauche",max:"10",step:"0.125",measurement:'"'};function ds(t){e[33].call(null,t)}void 0!==e[1].tools.engraver.xStart&&(ms.value=e[1].tools.engraver.xStart),jt=new Ye({props:ms}),E.push((()=>K(jt,"value",ps)));let vs={english:"Placement from bottom",french:"Placement de bas",max:"10",step:"0.125",measurement:'"'};function $s(t){e[34].call(null,t)}void 0!==e[1].tools.engraver.yStart&&(vs.value=e[1].tools.engraver.yStart),Wt=new Ye({props:vs}),E.push((()=>K(Wt,"value",ds)));let ws={english:"Letter height",french:"Hauteur de la lettre",max:"3",step:"0.05",measurement:'"'};function xs(t){e[35].call(null,t)}void 0!==e[1].tools.engraver.size&&(ws.value=e[1].tools.engraver.size),Rt=new Ye({props:ws}),E.push((()=>K(Rt,"value",$s)));let ys={english:"Space between letters",french:"Espace entre les lettres",max:"2",step:"0.05",measurement:'"'};void 0!==e[1].tools.engraver.spacing&&(ys.value=e[1].tools.engraver.spacing),Bt=new Ye({props:ys}),E.push((()=>K(Bt,"value",xs))),Dt=new Ge({props:{open:e[0].subsettings.offset,icon:"⩐",english:"CNC Offset",french:"Offset CNC"}}),Dt.$on("toggle",e[36]);let bs=Object.keys(e[1].offset),_s=[];for(let t=0;t<bs.length;t+=1)_s[t]=ut(nt(e,bs,t));const ks=e=>J(_s[e],1,1,(()=>{_s[e]=null}));Ft=new Ge({props:{open:e[0].subsettings.library,icon:"⩐",english:"CNC Library",french:"Bibliotheque CNC"}}),Ft.$on("toggle",e[39]);let Ss=Object.keys(e[0].cnc),Cs=[];for(let t=0;t<Ss.length;t+=1)Cs[t]=ft(tt(e,Ss,t));function Ps(t){e[41].call(null,t)}function Ms(t){e[42].call(null,t)}let Hs={english:"Diameter",french:"Diametre",max:e[0].cnc[e[0].tools.tool].mm?150:5,step:e[0].cnc[e[0].tools.tool].mm?.5:.03125,measurement:e[0].cnc[e[0].tools.tool].mm?"mm":'"'};function js(t){e[43].call(null,t)}void 0!==e[0].cnc[e[0].tools.tool].diameter&&(Hs.value=e[0].cnc[e[0].tools.tool].diameter),void 0!==e[0].cnc[e[0].tools.tool].mm&&(Hs.unit=e[0].cnc[e[0].tools.tool].mm),nn=new Ye({props:Hs}),E.push((()=>K(nn,"value",Ps))),E.push((()=>K(nn,"unit",Ms))),nn.$on("convert",e[5]);let Os={english:"Type",french:"Type"};function Es(t){e[44].call(null,t)}void 0!==e[0].cnc[e[0].tools.tool].type&&(Os.value=e[0].cnc[e[0].tools.tool].type),rn=new Ve({props:Os}),E.push((()=>K(rn,"value",js)));let Ws={english:"Spindle speed",french:"Vitesse spindle",max:"30000",step:"100",measurement:"RPM"};function qs(t){e[45].call(null,t)}void 0!==e[0].cnc[e[0].tools.tool].spindle&&(Ws.value=e[0].cnc[e[0].tools.tool].spindle),un=new Ye({props:Ws}),E.push((()=>K(un,"value",Es)));let Ns={english:"Plunge rate",french:"Vitesse de plonge",max:"1000",step:"5",measurement:'"/min'};function Rs(t){e[46].call(null,t)}void 0!==e[0].cnc[e[0].tools.tool].plunge&&(Ns.value=e[0].cnc[e[0].tools.tool].plunge),gn=new Ye({props:Ns}),E.push((()=>K(gn,"value",qs)));let zs={english:"Plunge ramp",french:"Longeur de plonge",max:"5",step:"0.125",measurement:'"'};function Ts(t){e[47].call(null,t)}void 0!==e[0].cnc[e[0].tools.tool].ramp&&(zs.value=e[0].cnc[e[0].tools.tool].ramp),dn=new Ye({props:zs}),E.push((()=>K(dn,"value",Rs)));let Bs={english:"Feed rate",french:"itesse de coupe",max:"1000",step:"10",measurement:'"/min'};function As(t){e[48].call(null,t)}void 0!==e[0].cnc[e[0].tools.tool].feed&&(Bs.value=e[0].cnc[e[0].tools.tool].feed),wn=new Ye({props:Bs}),E.push((()=>K(wn,"value",Ts)));let Ls={english:"Max cut depth",french:"Max profondeur coupe",max:"5",step:"0.03125",measurement:'"'};function Ds(t){e[49].call(null,t)}void 0!==e[0].cnc[e[0].tools.tool].max_depth&&(Ls.value=e[0].cnc[e[0].tools.tool].max_depth),bn=new Ye({props:Ls}),E.push((()=>K(bn,"value",As)));let Gs={english:"Max depth/pass",french:"Max profondeur/passe",max:"5",step:"0.03125",measurement:'"'};return void 0!==e[0].cnc[e[0].tools.tool].pass_depth&&(Gs.value=e[0].cnc[e[0].tools.tool].pass_depth),Sn=new Ye({props:Gs}),E.push((()=>K(Sn,"value",Ds))),{c(){t=g("div"),n=g("div"),l=g("span"),l.textContent="❁"+(e[2]?"Parametre":"Settings"),o=d(),i=g("span"),r=m(jn),a=d(),p=g("div"),Q(v.$$.fragment),x=d(),b=g("div"),Q(_.$$.fragment),P=d(),Q(M.$$.fragment),j=d(),Q(O.$$.fragment),q=d(),Q(N.$$.fragment),B=d(),Q(A.$$.fragment),L=d(),D=g("div"),Q(G.$$.fragment),Z=d(),Q(ee.$$.fragment),ne=d(),Q(se.$$.fragment),oe=d(),Q(ie.$$.fragment),ae=d(),Q(ce.$$.fragment),he=d(),Q(fe.$$.fragment),ge=d(),pe=g("div"),Q(me.$$.fragment),ve=d(),$e=g("h5"),we=m(On),xe=d(),ye=g("span"),ye.textContent="",be=d(),_e=g("div"),_e.textContent="",ke=d(),Se=g("select"),Ce=g("option"),Pe=g("span"),Pe.textContent=""+(e[2]?"Automatique":"Automatic"),Me=d(),He=g("option"),je=g("span"),je.textContent=(e[2]?"Plus large":"Widest")+" ↔︎",Oe=d(),Ee=g("option"),We=g("span"),We.textContent=(e[2]?"Plus haut":"Tallest")+" ↕︎",qe=d(),Ne=g("option"),Re=g("span"),Re.textContent=(e[2]?"Plus grand":"Biggest")+" ⤢",ze=d(),ts&&ts.c(),Te=d(),Q(Be.$$.fragment),Ae=d(),Le=g("div"),De=g("h5"),Ie=m(En),Ue=d(),Fe=g("span"),Fe.textContent="",Je=d(),Ke=g("select");for(let e=0;e<ss.length;e+=1)ss[e].c();Qe=d(),Q(Xe.$$.fragment),it=d(),Q(at.$$.fragment),gt=d(),Q(pt.$$.fragment),dt=d(),Q(vt.$$.fragment),$t=d(),wt=g("div"),xt=g("h5"),yt=m(Wn),bt=d(),_t=g("span"),_t.textContent="",kt=d(),St=g("select");for(let e=0;e<hs.length;e+=1)hs[e].c();Ct=d(),Q(Pt.$$.fragment),Ht=d(),Q(jt.$$.fragment),Et=d(),Q(Wt.$$.fragment),Nt=d(),Q(Rt.$$.fragment),Tt=d(),Q(Bt.$$.fragment),Lt=d(),Q(Dt.$$.fragment),Gt=d(),It=g("div");for(let e=0;e<_s.length;e+=1)_s[e].c();Ut=d(),Q(Ft.$$.fragment),Yt=d(),Jt=g("div"),Kt=g("h5"),Qt=m(qn),Vt=d(),Xt=g("span"),Xt.textContent="",Zt=d(),en=g("select");for(let e=0;e<Cs.length;e+=1)Cs[e].c();tn=d(),Q(nn.$$.fragment),on=d(),Q(rn.$$.fragment),cn=d(),Q(un.$$.fragment),fn=d(),Q(gn.$$.fragment),mn=d(),Q(dn.$$.fragment),$n=d(),Q(wn.$$.fragment),yn=d(),Q(bn.$$.fragment),kn=d(),Q(Sn.$$.fragment),w(i,"class","transparent svelte-sibth6"),w(n,"class","title svelte-sibth6"),C(n,"active",e[0].subsettings.show),w(b,"class","subsetting svelte-sibth6"),C(b,"active",e[0].subsettings.project),w(D,"class","subsetting svelte-sibth6"),C(D,"active",e[0].subsettings.sheet),w(ye,"class","spread svelte-sibth6"),w(_e,"class","filler"),Ce.__value="automatic",Ce.value=Ce.__value,w(Ce,"class","svelte-sibth6"),He.__value="widest",He.value=He.__value,w(He,"class","svelte-sibth6"),Ee.__value="tallest",Ee.value=Ee.__value,w(Ee,"class","svelte-sibth6"),Ne.__value="biggest",Ne.value=Ne.__value,w(Ne,"class","svelte-sibth6"),w(Se,"class","right svelte-sibth6"),void 0===e[0].nestOrder&&z((()=>e[22].call(Se))),w($e,"class","svelte-sibth6"),w(pe,"class","subsetting svelte-sibth6"),C(pe,"active",e[0].subsettings.nest),w(Fe,"class","spread svelte-sibth6"),w(Ke,"class","svelte-sibth6"),void 0===e[0].tools.profile&&z((()=>e[25].call(Ke))),w(De,"class","svelte-sibth6"),w(Le,"class","subsetting svelte-sibth6"),C(Le,"active",e[0].subsettings.profile),w(_t,"class","spread svelte-sibth6"),w(St,"class","svelte-sibth6"),void 0===e[0].tools.engraver&&z((()=>e[30].call(St))),w(xt,"class","svelte-sibth6"),w(wt,"class","subsetting svelte-sibth6"),C(wt,"active",e[0].subsettings.engraver),w(It,"class","subsetting svelte-sibth6"),C(It,"active",e[0].subsettings.offset),w(Xt,"class","spread svelte-sibth6"),w(en,"class","svelte-sibth6"),void 0===e[0].tools.tool&&z((()=>e[40].call(en))),w(Kt,"class","svelte-sibth6"),w(Jt,"class","subsetting svelte-sibth6"),C(Jt,"active",e[0].subsettings.library),w(p,"class","subsetting svelte-sibth6"),C(p,"active",e[0].subsettings.show),w(t,"class","settings svelte-sibth6")},m(s,h){u(s,t,h),c(t,n),c(n,l),c(n,o),c(n,i),c(i,r),c(t,a),c(t,p),V(v,p,null),c(p,x),c(p,b),V(_,b,null),c(b,P),V(M,b,null),c(b,j),V(O,b,null),c(b,q),V(N,b,null),c(p,B),V(A,p,null),c(p,L),c(p,D),V(G,D,null),c(D,Z),V(ee,D,null),c(D,ne),V(se,D,null),c(D,oe),V(ie,D,null),c(D,ae),V(ce,D,null),c(p,he),V(fe,p,null),c(p,ge),c(p,pe),V(me,pe,null),c(pe,ve),c(pe,$e),c($e,we),c($e,xe),c($e,ye),c($e,be),c($e,_e),c($e,ke),c($e,Se),c(Se,Ce),c(Ce,Pe),c(Ce,Me),c(Se,He),c(He,je),c(He,Oe),c(Se,Ee),c(Ee,We),c(Ee,qe),c(Se,Ne),c(Ne,Re),k(Se,e[0].nestOrder),c(pe,ze),ts&&ts.m(pe,null),c(p,Te),V(Be,p,null),c(p,Ae),c(p,Le),c(Le,De),c(De,Ie),c(De,Ue),c(De,Fe),c(De,Je),c(De,Ke);for(let e=0;e<ss.length;e+=1)ss[e].m(Ke,null);k(Ke,e[0].tools.profile),c(Le,Qe),V(Xe,Le,null),c(Le,it),V(at,Le,null),c(Le,gt),V(pt,Le,null),c(p,dt),V(vt,p,null),c(p,$t),c(p,wt),c(wt,xt),c(xt,yt),c(xt,bt),c(xt,_t),c(xt,kt),c(xt,St);for(let e=0;e<hs.length;e+=1)hs[e].m(St,null);k(St,e[0].tools.engraver),c(wt,Ct),V(Pt,wt,null),c(wt,Ht),V(jt,wt,null),c(wt,Et),V(Wt,wt,null),c(wt,Nt),V(Rt,wt,null),c(wt,Tt),V(Bt,wt,null),c(p,Lt),V(Dt,p,null),c(p,Gt),c(p,It);for(let e=0;e<_s.length;e+=1)_s[e].m(It,null);c(p,Ut),V(Ft,p,null),c(p,Yt),c(p,Jt),c(Jt,Kt),c(Kt,Qt),c(Kt,Vt),c(Kt,Xt),c(Kt,Zt),c(Kt,en);for(let e=0;e<Cs.length;e+=1)Cs[e].m(en,null);k(en,e[0].tools.tool),c(Jt,tn),V(nn,Jt,null),c(Jt,on),V(rn,Jt,null),c(Jt,cn),V(un,Jt,null),c(Jt,fn),V(gn,Jt,null),c(Jt,mn),V(dn,Jt,null),c(Jt,$n),V(wn,Jt,null),c(Jt,yn),V(bn,Jt,null),c(Jt,kn),V(Sn,Jt,null),Pn=!0,Mn||(Hn=[$(n,"click",e[8]),$(Se,"change",e[22]),$(Ke,"change",e[25]),$(Ke,"change",e[7]),$(St,"change",e[30]),$(St,"change",e[6]),$(en,"change",e[40])],Mn=!0)},p(e,t){(!Pn||1&t[0])&&jn!==(jn=e[0].subsettings.show?"⩚":"⩛")&&y(r,jn),1&t[0]&&C(n,"active",e[0].subsettings.show);const s={};1&t[0]&&(s.open=e[0].subsettings.project),v.$set(s);const l={};!S&&2&t[0]&&(S=!0,l.value=e[1].csv.contents[0][1],T((()=>S=!1))),_.$set(l);const o={};2&t[0]&&(o.english=e[1].csv.contents[0][4]?e[1].csv.contents[0][4]:"Product"),2&t[0]&&(o.french=e[1].csv.contents[0][4]?e[1].csv.contents[0][4]:"Produit"),!H&&2&t[0]&&(H=!0,o.value=e[1].csv.contents[0][5],T((()=>H=!1))),M.$set(o);const i={};!W&&2&t[0]&&(W=!0,i.checked=e[1].tools.engraver.engrave,T((()=>W=!1))),O.$set(i);const a={};1&t[0]&&(a.off=e[0].language.includes("fr")?"po":"in"),!R&&1&t[0]&&(R=!0,a.checked=e[0].units,T((()=>R=!1))),N.$set(a),1&t[0]&&C(b,"active",e[0].subsettings.project);const c={};1&t[0]&&(c.open=e[0].subsettings.sheet),A.$set(c);const u={};2&t[0]&&(u.english=e[1].csv.contents[0][2]?e[1].csv.contents[0][2]:"Type of panel"),2&t[0]&&(u.french=e[1].csv.contents[0][2]?e[1].csv.contents[0][2]:"Sorte de panneau"),!I&&2&t[0]&&(I=!0,u.value=e[1].csv.contents[0][3],T((()=>I=!1))),G.$set(u);const h={};!te&&1&t[0]&&(te=!0,h.value=e[0].material.width,T((()=>te=!1))),ee.$set(h);const f={};!le&&1&t[0]&&(le=!0,f.value=e[0].material.height,T((()=>le=!1))),se.$set(f);const g={};!re&&1&t[0]&&(re=!0,g.value=e[0].material.thickness,T((()=>re=!1))),ie.$set(g);const m={};!ue&&1&t[0]&&(ue=!0,m.value=e[0].material.margins,T((()=>ue=!1))),ce.$set(m),1&t[0]&&C(D,"active",e[0].subsettings.sheet);const d={};1&t[0]&&(d.open=e[0].subsettings.nest),fe.$set(d);const $={};!de&&1&t[0]&&(de=!0,$.checked=e[0].nestDirectionBottom,T((()=>de=!1))),me.$set($),1&t[0]&&k(Se,e[0].nestOrder),"automatic"!=e[0].nestOrder?ts?(ts.p(e,t),1&t[0]&&Y(ts,1)):(ts=ot(e),ts.c(),Y(ts,1),ts.m(pe,null)):ts&&(U(),J(ts,1,1,(()=>{ts=null})),F()),1&t[0]&&C(pe,"active",e[0].subsettings.nest);const w={};if(1&t[0]&&(w.open=e[0].subsettings.profile),Be.$set(w),1&t[0]){let n;for(ns=Object.keys(e[0].cnc),n=0;n<ns.length;n+=1){const s=lt(e,ns,n);ss[n]?ss[n].p(s,t):(ss[n]=rt(s),ss[n].c(),ss[n].m(Ke,null))}for(;n<ss.length;n+=1)ss[n].d(1);ss.length=ns.length}1&t[0]&&k(Ke,e[0].tools.profile);const x={};1&t[0]&&(x.max=e[0].cnc[e[0].tools.profile].max_depth),!Ze&&2&t[0]&&(Ze=!0,x.value=e[1].tools.profile.cut_depth,T((()=>Ze=!1))),Xe.$set(x);const P={};1&t[0]&&(P.max=e[0].material.width),!ht&&2&t[0]&&(ht=!0,P.value=e[1].tools.profile.min_size,T((()=>ht=!1))),at.$set(P);const j={};1&t[0]&&(j.max=e[0].material.thickness),!mt&&2&t[0]&&(mt=!0,j.value=e[1].tools.profile.link,T((()=>mt=!1))),pt.$set(j),1&t[0]&&C(Le,"active",e[0].subsettings.profile);const E={};if(1&t[0]&&(E.open=e[0].subsettings.engraver),vt.$set(E),1&t[0]){let n;for(us=Object.keys(e[0].cnc),n=0;n<us.length;n+=1){const s=st(e,us,n);hs[n]?hs[n].p(s,t):(hs[n]=ct(s),hs[n].c(),hs[n].m(St,null))}for(;n<hs.length;n+=1)hs[n].d(1);hs.length=us.length}1&t[0]&&k(St,e[0].tools.engraver);const q={};1&t[0]&&(q.max=e[0].cnc[e[0].tools.engraver].max_depth),!Mt&&2&t[0]&&(Mt=!0,q.value=e[1].tools.engraver.cut_depth,T((()=>Mt=!1))),Pt.$set(q);const z={};!Ot&&2&t[0]&&(Ot=!0,z.value=e[1].tools.engraver.xStart,T((()=>Ot=!1))),jt.$set(z);const B={};!qt&&2&t[0]&&(qt=!0,B.value=e[1].tools.engraver.yStart,T((()=>qt=!1))),Wt.$set(B);const L={};!zt&&2&t[0]&&(zt=!0,L.value=e[1].tools.engraver.size,T((()=>zt=!1))),Rt.$set(L);const K={};!At&&2&t[0]&&(At=!0,K.value=e[1].tools.engraver.spacing,T((()=>At=!1))),Bt.$set(K),1&t[0]&&C(wt,"active",e[0].subsettings.engraver);const Q={};if(1&t[0]&&(Q.open=e[0].subsettings.offset),Dt.$set(Q),3&t[0]){let n;for(bs=Object.keys(e[1].offset),n=0;n<bs.length;n+=1){const s=nt(e,bs,n);_s[n]?(_s[n].p(s,t),Y(_s[n],1)):(_s[n]=ut(s),_s[n].c(),Y(_s[n],1),_s[n].m(It,null))}for(U(),n=bs.length;n<_s.length;n+=1)ks(n);F()}1&t[0]&&C(It,"active",e[0].subsettings.offset);const V={};if(1&t[0]&&(V.open=e[0].subsettings.library),Ft.$set(V),1&t[0]){let n;for(Ss=Object.keys(e[0].cnc),n=0;n<Ss.length;n+=1){const s=tt(e,Ss,n);Cs[n]?Cs[n].p(s,t):(Cs[n]=ft(s),Cs[n].c(),Cs[n].m(en,null))}for(;n<Cs.length;n+=1)Cs[n].d(1);Cs.length=Ss.length}1&t[0]&&k(en,e[0].tools.tool);const X={};1&t[0]&&(X.max=e[0].cnc[e[0].tools.tool].mm?150:5),1&t[0]&&(X.step=e[0].cnc[e[0].tools.tool].mm?.5:.03125),1&t[0]&&(X.measurement=e[0].cnc[e[0].tools.tool].mm?"mm":'"'),!sn&&1&t[0]&&(sn=!0,X.value=e[0].cnc[e[0].tools.tool].diameter,T((()=>sn=!1))),!ln&&1&t[0]&&(ln=!0,X.unit=e[0].cnc[e[0].tools.tool].mm,T((()=>ln=!1))),nn.$set(X);const Z={};!an&&1&t[0]&&(an=!0,Z.value=e[0].cnc[e[0].tools.tool].type,T((()=>an=!1))),rn.$set(Z);const ne={};!hn&&1&t[0]&&(hn=!0,ne.value=e[0].cnc[e[0].tools.tool].spindle,T((()=>hn=!1))),un.$set(ne);const oe={};!pn&&1&t[0]&&(pn=!0,oe.value=e[0].cnc[e[0].tools.tool].plunge,T((()=>pn=!1))),gn.$set(oe);const ae={};!vn&&1&t[0]&&(vn=!0,ae.value=e[0].cnc[e[0].tools.tool].ramp,T((()=>vn=!1))),dn.$set(ae);const he={};!xn&&1&t[0]&&(xn=!0,he.value=e[0].cnc[e[0].tools.tool].feed,T((()=>xn=!1))),wn.$set(he);const ge={};!_n&&1&t[0]&&(_n=!0,ge.value=e[0].cnc[e[0].tools.tool].max_depth,T((()=>_n=!1))),bn.$set(ge);const ve={};!Cn&&1&t[0]&&(Cn=!0,ve.value=e[0].cnc[e[0].tools.tool].pass_depth,T((()=>Cn=!1))),Sn.$set(ve),1&t[0]&&C(Jt,"active",e[0].subsettings.library),1&t[0]&&C(p,"active",e[0].subsettings.show)},i(e){if(!Pn){Y(v.$$.fragment,e),Y(_.$$.fragment,e),Y(M.$$.fragment,e),Y(O.$$.fragment,e),Y(N.$$.fragment,e),Y(A.$$.fragment,e),Y(G.$$.fragment,e),Y(ee.$$.fragment,e),Y(se.$$.fragment,e),Y(ie.$$.fragment,e),Y(ce.$$.fragment,e),Y(fe.$$.fragment,e),Y(me.$$.fragment,e),Y(ts),Y(Be.$$.fragment,e),Y(Xe.$$.fragment,e),Y(at.$$.fragment,e),Y(pt.$$.fragment,e),Y(vt.$$.fragment,e),Y(Pt.$$.fragment,e),Y(jt.$$.fragment,e),Y(Wt.$$.fragment,e),Y(Rt.$$.fragment,e),Y(Bt.$$.fragment,e),Y(Dt.$$.fragment,e);for(let e=0;e<bs.length;e+=1)Y(_s[e]);Y(Ft.$$.fragment,e),Y(nn.$$.fragment,e),Y(rn.$$.fragment,e),Y(un.$$.fragment,e),Y(gn.$$.fragment,e),Y(dn.$$.fragment,e),Y(wn.$$.fragment,e),Y(bn.$$.fragment,e),Y(Sn.$$.fragment,e),Pn=!0}},o(e){J(v.$$.fragment,e),J(_.$$.fragment,e),J(M.$$.fragment,e),J(O.$$.fragment,e),J(N.$$.fragment,e),J(A.$$.fragment,e),J(G.$$.fragment,e),J(ee.$$.fragment,e),J(se.$$.fragment,e),J(ie.$$.fragment,e),J(ce.$$.fragment,e),J(fe.$$.fragment,e),J(me.$$.fragment,e),J(ts),J(Be.$$.fragment,e),J(Xe.$$.fragment,e),J(at.$$.fragment,e),J(pt.$$.fragment,e),J(vt.$$.fragment,e),J(Pt.$$.fragment,e),J(jt.$$.fragment,e),J(Wt.$$.fragment,e),J(Rt.$$.fragment,e),J(Bt.$$.fragment,e),J(Dt.$$.fragment,e),_s=_s.filter(Boolean);for(let e=0;e<_s.length;e+=1)J(_s[e]);J(Ft.$$.fragment,e),J(nn.$$.fragment,e),J(rn.$$.fragment,e),J(un.$$.fragment,e),J(gn.$$.fragment,e),J(dn.$$.fragment,e),J(wn.$$.fragment,e),J(bn.$$.fragment,e),J(Sn.$$.fragment,e),Pn=!1},d(e){e&&h(t),X(v),X(_),X(M),X(O),X(N),X(A),X(G),X(ee),X(se),X(ie),X(ce),X(fe),X(me),ts&&ts.d(),X(Be),f(ss,e),X(Xe),X(at),X(pt),X(vt),f(hs,e),X(Pt),X(jt),X(Wt),X(Rt),X(Bt),X(Dt),f(_s,e),X(Ft),f(Cs,e),X(nn),X(rn),X(un),X(gn),X(dn),X(wn),X(bn),X(Sn),Mn=!1,s(Hn)}}}function pt(e,t,n){let s,l;i(e,re,(e=>n(0,s=e))),i(e,ae,(e=>n(1,l=e)));const o="fr"===s.language;let r=s.material.thickness;function c(e,t){return(e?fe:he)(t)}function u(e){a(re,s.tools.tool=e,s)}return[s,l,o,function(){a(ae,l.tools.profile.cut_depth-=r-s.material.thickness,l),r=s.material.thickness},function(){let e=JSON.parse(l.csv.contents[3][1]);l.csv.panels.forEach((t=>{t[2]=c(e,t[2]),t[3]=c(e,t[3])})),a(ae,l.csv.contents[3][1]=a(re,s.units=!e,s),l)},function(){let e=s.cnc[s.tools.tool];e.diameter=c(e.mm,e.diameter)},function(){u(s.tools.engraver)},function(){u(s.tools.profile)},()=>a(re,s.subsettings.show=!s.subsettings.show,s),()=>a(re,s.subsettings.project=!s.subsettings.project,s),function(e){l.csv.contents[0][1]=e,ae.set(l)},function(e){l.csv.contents[0][5]=e,ae.set(l)},function(e){l.tools.engraver.engrave=e,ae.set(l)},function(e){s.units=e,re.set(s)},()=>a(re,s.subsettings.sheet=!s.subsettings.sheet,s),function(e){l.csv.contents[0][3]=e,ae.set(l)},function(e){s.material.width=e,re.set(s)},function(e){s.material.height=e,re.set(s)},function(e){s.material.thickness=e,re.set(s)},function(e){s.material.margins=e,re.set(s)},()=>a(re,s.subsettings.nest=!s.subsettings.nest,s),function(e){s.nestDirectionBottom=e,re.set(s)},function(){s.nestOrder=S(this),re.set(s)},function(e){s.nestTypeColumn=e,re.set(s)},()=>a(re,s.subsettings.profile=!s.subsettings.profile,s),function(){s.tools.profile=S(this),re.set(s)},function(e){l.tools.profile.cut_depth=e,ae.set(l)},function(e){l.tools.profile.min_size=e,ae.set(l)},function(e){l.tools.profile.link=e,ae.set(l)},()=>a(re,s.subsettings.engraver=!s.subsettings.engraver,s),function(){s.tools.engraver=S(this),re.set(s)},function(e){l.tools.engraver.cut_depth=e,ae.set(l)},function(e){l.tools.engraver.xStart=e,ae.set(l)},function(e){l.tools.engraver.yStart=e,ae.set(l)},function(e){l.tools.engraver.size=e,ae.set(l)},function(e){l.tools.engraver.spacing=e,ae.set(l)},()=>a(re,s.subsettings.offset=!s.subsettings.offset,s),function(e,t){l.offset[t]=e,ae.set(l)},function(e){s.units=e,re.set(s)},()=>a(re,s.subsettings.library=!s.subsettings.library,s),function(){s.tools.tool=S(this),re.set(s)},function(e){s.cnc[s.tools.tool].diameter=e,re.set(s)},function(e){s.cnc[s.tools.tool].mm=e,re.set(s)},function(e){s.cnc[s.tools.tool].type=e,re.set(s)},function(e){s.cnc[s.tools.tool].spindle=e,re.set(s)},function(e){s.cnc[s.tools.tool].plunge=e,re.set(s)},function(e){s.cnc[s.tools.tool].ramp=e,re.set(s)},function(e){s.cnc[s.tools.tool].feed=e,re.set(s)},function(e){s.cnc[s.tools.tool].max_depth=e,re.set(s)},function(e){s.cnc[s.tools.tool].pass_depth=e,re.set(s)}]}class mt extends te{constructor(e){super(),ee(this,e,pt,gt,o,{},[-1,-1,-1])}}function dt(e,t){let n=[],s=t.nestOrder||"automatic",l=t.nestDirectionBottom,o=t.nestTypeColumn,i=t.cnc[t.tools.profile].diameter||.375,r={width:t.material.width||49,height:t.material.height||97,margins:t.material.margins||.25,max_width:()=>r.width-2*r.margins,max_height:()=>r.height-2*r.margins},a=new bt(e.flatMap((e=>function([e,t,s,l]){return o();function o(){return s>r.max_width()||l>r.max_height()?(n.push(`Panneau ${e} est trop gros`),[]):s&&l&&t?a():[]}function a(){let n=0,o=[];for(s+=i,l+=i;t>n++;){let i="";t>1&&(i=`${n} sur ${t}`),o.push([i,e,s,l])}return o}}(e)))).flat();if("automatic"==s){let e=function(){let e,t=["widest","tallest","biggest"];for(let n of[!1,!0]){o=n;for(let s of t){let t=m(u(s));if(t.empty())return t;let l=t.last().area,o={isByColumns:n,order:s,sheets:t.length,sheetSpaceUsed:l};e||(e=o),e.sheets>t.length&&(e=o),e.sheets<t.length||e.sheetSpaceUsed>l&&(e=o)}}return o=e.isByColumns,m(u(e.order))}();return{sheets:e,errors:n,averageWaste:c(e)}}{let e=m(u(s));return{sheets:e,errors:n,averageWaste:c(e)}}function c(e){return!e.empty()&&{all:e.reduce(((e,t)=>e+t.waste_ratio),0)/e.length*100,full:e.slice(0,-1).reduce(((e,t)=>e+t.waste_ratio),0)/(e.length-1)*100}}function u(e){return a.map((t=>new $t([...t,e])))}function h(e){let t=new bt(e.placementBy().place()),n=t[0].height;for(;e.fitsRow(t,r.max_width());){let s=new bt(e.fitsRow(t,r.max_width()).place());for(;e.fitsColumn(s,n);)s.push(e.fitsColumn(s,n).place());1===s.length?t.push(s[0]):t.push(s)}return t.ascendingHeight()}function f(e){let t=new bt(e.placementBy().place()),n=t[0].width;for(;e.fitsColumn(t,r.max_height());){let s=new bt(e.fitsColumn(t,r.max_height()).place());for(;e.fitsRow(s,n);)s.push(e.fitsRow(s,n).place());1===s.length?t.push(s[0]):t.push(s)}return t.ascendingWidth()}function g(e){let t=new bt(e.placementBy().place());for(;e.fitsSheetColumn(t,r.max_width());)t.push(e.fitsSheetColumn(t,r.max_width()).place());return t.ascendingHeight()}function p(e){let t=new bt(e.placementBy().place());for(;e.fitsSheetRow(t,r.max_height());)t.push(e.fitsSheetRow(t,r.max_height()).place());return t.ascendingWidth()}function m(e){let t=new bt;if(o){let n=function(e){let t=new bt;for(;e.notPlaced().length>0;){let n=f(e);t.push(new wt(n.columnWidth(),n.columnHeight(),n.totalArea(),n,e[0].nestOrder))}return t}(e);for(;n.notPlaced().length>0;){let e=g(n);v(e),t.push(new yt(e.rowWidth(),e.rowHeight(),e.totalArea(),e.map((e=>e.group)).flatten(2),e,t.length+1,r))}}else{let n=function(e){let t=new bt;for(;e.notPlaced().length>0;){let n=h(e);t.push(new xt(n.rowWidth(),n.rowHeight(),n.totalArea(),n,e[0].nestOrder))}return t}(e);for(;n.notPlaced().length>0;){let e=p(n);d(e),t.push(new yt(e.columnWidth(),e.columnHeight(),e.totalArea(),e.map((e=>e.group)).flatten(2),e,t.length+1,r))}}return t}function d(e){let t=r.margins-i/2,n=new bt;e.forEach(((s,o)=>{0===o?n.push(l?t:r.height-t-s.height):n.push(l?n.last()+e[o-1].height:n.last()-s.height);let i=new bt;s.group.forEach(((s,l,r)=>{i.push($(l)?t:i.last()+r[l-1].columnWidth());let a=$(o)&&e.length>1;s instanceof $t?(s.y=a?n[o]+e[o].height-s.height:n[o],s.x=i[l]):s.forEach(((t,r)=>{t.y=$(r)?a?n[o]+e[o].height-t.height:n[o]:a?s[r-1].y-t.height:s[r-1].y+s[r-1].height,t.x=i[l]}))}))}))}function v(e){let t=r.margins-i/2,n=new bt;e.forEach(((s,o)=>{0===o?n.push(t):n.push(n.last()+e[o-1].width);let i=new bt;s.group.forEach(((s,a,c)=>{i.push($(a)?l?t:r.height-t-s.rowHeight():l?i.last()+c[a-1].rowHeight():i.last()-s.rowHeight());let u=$(o)&&e.length>1;s instanceof $t?(s.x=u?n[o]+e[o].width-s.width:n[o],s.y=i[a]):s.forEach(((t,r)=>{t.x=$(r)?u?n[o]+e[o].width-t.width:n[o]:u?s[r-1].x-t.width:s[r-1].x+s[r-1].width,t.y=l?i[a]:i[a-1]-t.height}))}))}))}function $(e){return 0===e}}class vt{constructor(e){this.placed=!1,this.nestOrder=e}place(){return this.placed=!0,this}}class $t extends vt{constructor([e,t,n,s,l]){super(l),this.nestOrder=l,this.quantityID=e,this.id=t,this.width=n,this.height=s,this.area=this.height*this.width,this.x=0,this.y=0}columnWidth(){return this.width}rowHeight(){return this.height}}class wt extends vt{constructor(e,t,n,s,l){super(l),this.width=e,this.height=t,this.area=n,this.group=s}}class xt extends wt{constructor(e,t,n,s,l){super(e,t,n,s,l)}}class yt extends wt{constructor(e,t,n,s,l,o,i){super(e,t,n,s),this.columns=l,this.sheet_width=i.width,this.sheet_height=i.height,this.sheet_area=i.width*i.height,this.waste_area=this.sheet_area-this.area,this.waste_ratio=1-this.area/this.sheet_area,this.id="Feuille "+o,delete this.placed}}class bt extends Array{first(){return this[0]}last(){return this[this.length-1]}empty(){return 0==this.length}flatten(e=1){let t=this;for(;e--;)t=t.flat();return t}ascendingWidth(){return new bt(...this).sort(((e,t)=>t.width!=e.width?t.width-e.width:t.height-e.height))}ascendingHeight(){return new bt(...this).sort(((e,t)=>t.height!=e.height?t.height-e.height:t.width-e.width))}notPlaced(){return this.filter((e=>!e.placed))}widest(){return this.notPlaced().ascendingWidth().first()}narrowest(){return this.notPlaced().ascendingWidth().last()}tallest(){return this.notPlaced().ascendingHeight().first()}shortest(){return this.notPlaced().ascendingHeight().last()}biggest(){return this.sort(((e,t)=>t.area-e.area)).notPlaced().first()}smallest(){return this.sort(((e,t)=>e.area-t.area)).notPlaced().first()}placementBy(){return{widest:this.widest(),tallest:this.tallest(),biggest:this.biggest()}[this.length?this[0].nestOrder:""]}totalWidth(){return this.reduce(((e,t)=>t instanceof bt?e+t.ascendingWidth().first().width:e+t.width),0)}totalHeight(){return this.reduce(((e,t)=>t instanceof bt?e+t.ascendingHeight().first().height:e+t.height),0)}totalArea(){return this.flatten(3).reduce(((e,t)=>e+t.area),0)}columnWidth(){return this.flat().ascendingWidth().first().width}columnHeight(){return this.totalHeight()}rowWidth(){return this.totalWidth()}rowHeight(){return this.flat().ascendingHeight().first().height}remainingWidth(e){return e-this.totalWidth()}remainingHeight(e){return e-this.totalHeight()}fitsColumn(e,t){return this.filter((t=>t.width<=e[0].width)).fitsSheetRow(e,t)}fitsRow(e,t){return this.filter((t=>t.height<=e[0].height)).fitsSheetColumn(e,t)}fitsSheetColumn(e,t){return this.notPlaced().filter((n=>n.width<e.remainingWidth(t))).placementBy()}fitsSheetRow(e,t){return this.notPlaced().filter((n=>n.height<e.remainingHeight(t))).placementBy()}}const _t={A:[[0,0],[0,1],[1,4],[2,1],[2,0],[2,1],[0,1]],B:[[0,0],[0,4],[1,4],[2,3],[1,2],[2,1],[1,0],[0,0]],C:[[2,1],[1,0],[0,1],[0,3],[1,4],[2,3]],D:[[0,0],[0,4],[1,4],[2,3],[2,1],[1,0],[0,0]],E:[[2,0],[0,0],[0,2],[1,2],[0,2],[0,4],[2,4]],F:[[0,0],[0,2],[1,2],[0,2],[0,4],[2,4]],G:[[1,2],[2,2],[2,1],[1,0],[0,1],[0,3],[1,4],[2,3]],H:[[0,0],[0,4],[0,2],[2,2],[2,4],[2,0]],I:[[0,0],[2,0],[1,0],[1,4],[0,4],[2,4]],J:[[0,1],[1,0],[2,1],[2,4],[1,4]],K:[[0,0],[0,4],[0,2],[1,2],[2,4],[1,2],[2,0]],L:[[2,1],[2,0],[0,0],[0,4]],M:[[0,0],[0,4],[1,2],[2,4],[2,0]],N:[[0,0],[0,4],[2,0],[2,4]],O:[[2,1],[1,0],[0,1],[0,3],[1,4],[2,3],[2,1]],P:[[0,0],[0,4],[1,4],[2,3],[1,2],[0,2]],Q:[[1,2],[2,1],[1,0],[0,1],[0,3],[1,4],[2,3],[2,1]],R:[[0,0],[0,4],[1,4],[2,3],[1,2],[2,0]],S:[[0,1],[1,0],[2,1],[0,3],[1,4],[2,3]],T:[[1,0],[1,4],[0,4],[2,4]],U:[[0,4],[0,1],[1,0],[2,1],[2,4]],V:[[0,4],[0,3],[1,0],[2,3],[2,4]],W:[[0,4],[0,0],[1,2],[2,0],[2,4]],X:[[0,0],[2,4],[1,2],[0,4],[2,0]],Y:[[1,0],[1,2],[0,4],[1,2],[2,4]],Z:[[2,0],[0,0],[2,4],[0,4]],1:[[0,0],[2,0],[1,0],[1,4],[0,3]],2:[[0,3],[1,4],[2,3],[0,0],[2,0]],3:[[0,1],[1,0],[2,1],[1,2],[2,3],[1,4],[0,3]],4:[[2,0],[2,4],[0,1],[2,1]],5:[[0,1],[1,0],[2,1],[2,2],[1,3],[0,2],[0,4],[2,4]],6:[[0,2],[1,2],[2,1],[1,0],[0,1],[0,3],[1,4],[2,3]],7:[[0,0],[2,4],[0,4],[0,3]],8:[[1,0],[0,1],[2,3],[1,4],[0,3],[2,1],[1,0]],9:[[0,1],[1,0],[2,1],[2,3],[1,4],[0,3],[1,2],[2,2]],0:[[0,1],[0,3],[1,4],[2,3],[2,1],[1,0],[0,1],[2,3]],"=":[[[0,1],[1,3],[2,3],[2,1],[0,1]]],"-":[[0,2],[2,2]],"[":[[0,1],[0,3],[1,3,"+"],[1,3,"-"],[2,3],[2,1],[1,1],[1,3]],"]":[[0,1],[0,3],[1,3],[1,1],[0,1],[2,1,"+"],[2,1,"-"],[2,3]],"'":[[0,1],[0,2],[2,2],[2,1],[0,1],[0,3,"+"],[0,3,"-"],[2,3]],",":[[0,1],[2,1],[2,2,"+"],[2,2,"-"],[0,2],[0,3],[2,3],[2,2]]};function kt(e,t){let n=9;const s=e.sheets,l="00",o="01",i=()=>t.cnc[n].feed,r=()=>t.cnc[n].plunge,a=e.offset.X,c=e.offset.Y,u=e.offset.Z,h=t.material.width/2||30,f=Math.min(t.material.height+10,122),g=t.material.thickness+u,p=g+.25,m=ue(Math.max(g-e.tools.profile.cut_depth,0)),d=t.cnc[n].pass_depth,v=m+e.tools.profile.link,$=e.tools.profile.min_size,w=t.tools.profile,x=e.tools.engraver.engrave,y=t.tools.engraver;let b=function(){let[,,,t,,n]=e.csv.contents[0];return`( ${ge(new Date,"dd.mm.yyyy HH:MM")} )\n( ${e.name} )\n`+(n?`( ${n} )\n`:"")+"( ------------------ )\nG40 G80 G70\n( ------------------ )\n"+`( ${s.length}: [] ${t||""} )\n`}();return s.forEach(((s,u,S)=>{b+=`( []: ${u+1} )\n`,x&&(b+=k(y),s.columns.forEach(((n,s)=>{n.group.flat().sort(((e,n)=>Ct(t.nestTypeColumn,e,n,s))).forEach((t=>b+=function({label:e,engravingDepth:t=.005,xStart:n=1,yStart:s=1,size:i=.3,spacing:r=.1,direction:a="ltr"}){return c();function c(){return t().map(((e,t)=>u(e,t))).join("");function t(){return n(e).split("")}function n(e){return e+"".toUpperCase().replace(/[^A-Z0-9\[\]\,\'\s\-\=]/gi,"")}}function u(e,c){if(c&&u()," "!==e)return`( ------------------ )\n( ${e} )\n`+h()+f();function u(){"ltr"===a?n+=r+i/2:s-=r+i}function h(){return _t[e].map((([e,t,n=""],s)=>s?_({x:m(e),y:d(t),z:v(n)}):_({g:l,x:m(e),y:d(t)})+_({g:o,z:v("-"),f:200}))).join("")}function f(){return _({g:l,z:p})}function m(e){return ue(n+$(e))}function d(e){return ue(s+$(e))}function v(e){return"+"===e?p:"-"===e?g-t:e}function $(e){return.25*e*i}}}({label:t.id,engravingDepth:e.tools.engraver.cut_depth,xStart:t.x+1+a,yStart:t.y+1+c,size:e.tools.engraver.size,spacing:e.tools.engraver.spacing,direction:e.tools.engraver.direction})))}))),b+=k(w),s.columns.forEach(((e,s)=>{e.group.flat().sort(((e,n)=>Ct(t.nestTypeColumn,e,n,s))).forEach((e=>b+=function(e){const s=ue(e.x+a),u=ue(e.y+c),h=ue(s+e.width),f=ue(u+e.height),w=ue(f-t.cnc[n].ramp);return`( ------------------ )\n( ${e.id} )\n`+_({x:s,y:w,z:p})+_({z:g+.005})+x()+_({g:l,z:p});function x(){const t=e=>_({g:o,y:f,z:e,f:r()})+_({x:h,f:i()})+_({y:u})+_({x:s})+_({y:e===m?f:w});let n=!1,l="",a=g,c=()=>a===m&&(e.width<$||e.height<$);for(;!n;)a=Math.max(a-d,m),c()&&(l+=t(v)),l+=t(a),a===m&&(n=!0);return l}}(e)))})),u!==S.length-1&&(b+="( ------------------ )\nM05 M104\n"+_({g:"90",x:h,y:f})+"M00\nM103 M03 G00\n( ------------------ )\n( CYCLE START :)\n")})),b+="( ------------------ )\nG40 G80 G91 G28 Z0 M5\nG90\n"+_({g:l,x:h,y:f})+"M30",b.replace("M05\n","");function _({g:e="",x:t="",y:n="",z:s="",f:l=""}){return(""===e?e:`G${e} `)+(""===t?t:`X${St(t)} `)+(""===n?n:`Y${St(n)} `)+(""===s?s:`Z${St(s)} `)+(""===l?l:`F${l}`)+"\n"}function k(e){return n===e?"":(n=e,`( ------------------ )\nM05\nM06 T${n}\nG43 H${n}\nS${t.cnc[n].spindle} M03\nG54 G90 G00\n`)}}function St(e){return/\./.test(e)||0===e?e:e.toFixed(1)}function Ct(e,t,n,s){return e?s%2==0?n.y!==t.y?n.y-t.y:t.x-n.x:t.y!==n.y?t.y-n.y:n.x-t.x:s%2==0?t.x!==n.x?t.x-n.x:t.y-n.y:n.x!==t.x?n.x-t.x:n.y-t.y}function Pt(e){let t;return{c(){t=g("div"),t.innerHTML='<div class="splash-img svelte-1oojyqs"></div> \n        <h1 class="svelte-1oojyqs"><span>Ahhh! Nest:</span></h1> \n        <h6 class="svelte-1oojyqs"><span>sauver une feuille, peut-être deux</span></h6>',w(t,"class","splash svelte-1oojyqs")},m(e,n){u(e,t,n)},d(e){e&&h(t)}}}function Mt(e){let t,n,l,o,i,r,a,f,p,m,v,x,y,b,_,k;o=new be({}),o.$on("update",e[2]),a=new mt({}),a.$on("update",e[2]),p=new Ee({}),p.$on("update",e[2]),x=new Ae({});let S=!e[0].sheets.length&&Pt();return{c(){t=d(),n=g("div"),l=g("div"),Q(o.$$.fragment),i=d(),r=g("div"),Q(a.$$.fragment),f=d(),Q(p.$$.fragment),m=d(),v=g("div"),Q(x.$$.fragment),y=d(),S&&S.c(),w(l,"class","import svelte-1oojyqs"),w(r,"class","controls svelte-1oojyqs"),w(v,"class","main svelte-1oojyqs"),w(n,"class","container svelte-1oojyqs")},m(s,h){u(s,t,h),u(s,n,h),c(n,l),V(o,l,null),c(n,i),c(n,r),V(a,r,null),c(r,f),V(p,r,null),c(n,m),c(n,v),V(x,v,null),c(v,y),S&&S.m(v,null),b=!0,_||(k=[$(document.body,"change",e[2]),$(v,"click",e[3])],_=!0)},p(e,[t]){e[0].sheets.length?S&&(S.d(1),S=null):S||(S=Pt(),S.c(),S.m(v,null))},i(e){b||(Y(o.$$.fragment,e),Y(a.$$.fragment,e),Y(p.$$.fragment,e),Y(x.$$.fragment,e),b=!0)},o(e){J(o.$$.fragment,e),J(a.$$.fragment,e),J(p.$$.fragment,e),J(x.$$.fragment,e),b=!1},d(e){e&&h(t),e&&h(n),X(o),X(a),X(p),X(x),S&&S.d(),_=!1,s(k)}}}function Ht(e,t,n){let s,l;function o(){a(ae,s.name=s.csv.contents[0][1],s),a(ae,s.csv.panels=s.csv.contents.slice(s.csv.headerRows),s),function(){let e=dt(t(),l);function t(){return l.units?s.csv.panels.map((e=>[e[0],e[1],fe(e[2]),fe(e[3])])):s.csv.panels}a(ae,s.sheets=e.sheets,s),a(ae,s.errors=e.errors,s),a(ae,s.averageWaste=e.averageWaste,s)}(),a(ae,s.csv.output=s.csv.contents.join("\n"),s),a(ae,s.cnc=kt(s,l),s)}i(e,ae,(e=>n(0,s=e))),i(e,re,(e=>n(1,l=e))),o();return[s,l,o,()=>a(re,l.show=!1,l)]}return new class extends te{constructor(e){super(),ee(this,e,Ht,Mt,o,{})}}({target:document.body})}();
//# sourceMappingURL=app.js.map
