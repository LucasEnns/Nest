var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function a(t){t.forEach(e)}function i(t){return"function"==typeof t}function l(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function s(e,n,a){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const a=e.subscribe(...n);return a.unsubscribe?()=>a.unsubscribe():a}(n,a))}function r(t){return null==t?"":t}function o(t,e,n=e){return t.set(n),e}function c(t,e){t.appendChild(e)}function u(t,e,n){t.insertBefore(e,n||null)}function h(t){t.parentNode.removeChild(t)}function d(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function g(t){return document.createElement(t)}function p(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function f(t){return document.createTextNode(t)}function m(){return f(" ")}function w(){return f("")}function v(t,e,n,a){return t.addEventListener(e,n,a),()=>t.removeEventListener(e,n,a)}function y(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function x(t){return""===t?void 0:+t}function b(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function $(t,e){t.value=null==e?"":e}function z(t,e,n,a){t.style.setProperty(e,n,a?"important":"")}function _(t,e){for(let n=0;n<t.options.length;n+=1){const a=t.options[n];if(a.__value===e)return void(a.selected=!0)}}function C(t,e,n){t.classList[n?"add":"remove"](e)}let k;function M(t){k=t}function H(t){(function(){if(!k)throw new Error("Function called outside component initialization");return k})().$$.before_update.push(t)}const S=[],E=[],R=[],q=[],N=Promise.resolve();let O=!1;function P(t){R.push(t)}let T=!1;const A=new Set;function B(){if(!T){T=!0;do{for(let t=0;t<S.length;t+=1){const e=S[t];M(e),W(e.$$)}for(S.length=0;E.length;)E.pop()();for(let t=0;t<R.length;t+=1){const e=R[t];A.has(e)||(A.add(e),e())}R.length=0}while(S.length);for(;q.length;)q.pop()();O=!1,T=!1,A.clear()}}function W(t){if(null!==t.fragment){t.update(),a(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(P)}}const j=new Set;function L(t,e){t&&t.i&&(j.delete(t),t.i(e))}function D(t,e,n,a){if(t&&t.o){if(j.has(t))return;j.add(t),undefined.c.push((()=>{j.delete(t),a&&(n&&t.d(1),a())})),t.o(e)}}function G(t){t&&t.c()}function I(t,n,l){const{fragment:s,on_mount:r,on_destroy:o,after_update:c}=t.$$;s&&s.m(n,l),P((()=>{const n=r.map(e).filter(i);o?o.push(...n):a(n),t.$$.on_mount=[]})),c.forEach(P)}function F(t,e){const n=t.$$;null!==n.fragment&&(a(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function U(t,e){-1===t.$$.dirty[0]&&(S.push(t),O||(O=!0,N.then(B)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Y(e,i,l,s,r,o,c=[-1]){const u=k;M(e);const d=i.props||{},g=e.$$={fragment:null,ctx:null,props:o,update:t,not_equal:r,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:[]),callbacks:n(),dirty:c,skip_bound:!1};let p=!1;if(g.ctx=l?l(e,d,((t,n,...a)=>{const i=a.length?a[0]:n;return g.ctx&&r(g.ctx[t],g.ctx[t]=i)&&(!g.skip_bound&&g.bound[t]&&g.bound[t](i),p&&U(e,t)),n})):[],g.update(),p=!0,a(g.before_update),g.fragment=!!s&&s(g.ctx),i.target){if(i.hydrate){const t=function(t){return Array.from(t.childNodes)}(i.target);g.fragment&&g.fragment.l(t),t.forEach(h)}else g.fragment&&g.fragment.c();i.intro&&L(e.$$.fragment),I(e,i.target,i.anchor),B()}M(u)}class X{$destroy(){F(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}let K="widest",Z=!0,J=!0,Q=.375,V=[],tt={width:49,height:97,margins:.25,max_width:()=>tt.width-2*tt.margins-Q,max_height:()=>tt.height-2*tt.margins-Q};function et(t,e=1,n=J,a=K,i=Z,l=Q,s=tt){V=[];const r=new ot(t.slice(e).flatMap((t=>function([t,e,n,a]){if(n>tt.max_width()||a>tt.max_height())return V.push(`Panneau ${t} est trop gros`),[];if(!n||!a||!e)return[];let i=1,l=[];for(;e>=i;){let s="";e>1&&(s=`${i} sur ${e}`),l.push([s,t,parseFloat(n),parseFloat(a)]),i++}return l}(t).map((t=>new it(t)))))).flat();function o(t){let e=new ot(t.placementBy().place()),n=e[0].height;for(;t.fitsRow(e);){let a=new ot(t.fitsRow(e).place());for(;t.fitsColumn(a,n);)a.push(t.fitsColumn(a,n).place());1===a.length?e.push(a[0]):e.push(a)}return e.ascendingHeight()}function c(t){let e=new ot(t.placementBy().place()),n=e[0].width;for(;t.fitsColumn(e);){let a=new ot(t.fitsColumn(e).place());for(;t.fitsRow(a,n);)a.push(t.fitsRow(a,n).place());1===a.length?e.push(a[0]):e.push(a)}return e.ascendingWidth()}function u(t){let e=new ot(t.placementBy().place());for(;t.fitsSheetColumn(e);)e.push(t.fitsSheetColumn(e).place());return e.ascendingHeight()}function h(t){let e=new ot(t.placementBy().place());for(;t.fitsSheetRow(e);)e.push(t.fitsSheetRow(e).place());return e.ascendingWidth()}function d(t){let e=tt.margins-Q/2,n=new ot;t.forEach(((a,i)=>{0===i?n.push(Z?e:tt.height-e-a.height):n.push(Z?n.last()+t[i-1].height:n.last()-a.height);let l=new ot;a.group.forEach(((a,s,r)=>{l.push(nt(s)?e:l.last()+r[s-1].columnWidth());let o=nt(i)&&t.length>1;a instanceof it?(a.y=o?n[i]+t[i].height-a.height:n[i],a.x=l[s]):a.forEach(((e,r)=>{e.y=nt(r)?o?n[i]+t[i].height-e.height:n[i]:o?a[r-1].y-e.height:a[r-1].y+a[r-1].height,e.x=l[s]}))}))}))}function g(t){let e=tt.margins-Q/2,n=new ot;t.forEach(((a,i)=>{0===i?n.push(e):n.push(n.last()+t[i-1].width);let l=new ot;a.group.forEach(((a,s,r)=>{l.push(nt(s)?Z?e:tt.height-e-a.rowHeight():Z?l.last()+r[s-1].rowHeight():l.last()-a.rowHeight());let o=nt(i)&&t.length>1;a instanceof it?(a.x=o?n[i]+t[i].width-a.width:n[i],a.y=l[s]):a.forEach(((e,r)=>{e.x=nt(r)?o?n[i]+t[i].width-e.width:n[i]:o?a[r-1].x-e.width:a[r-1].x+a[r-1].width,e.y=Z?l[s]:l[s-1]-e.height}))}))}))}return K=a,Z=i,J=n,Q=l,tt.width=s.width,tt.height=s.height,tt.margins=s.margins,[r,function(t){let e=new ot;if(J){let n=function(t){let e=new ot;for(;t.notPlaced().length>0;){let n=c(t);e.push(new lt(n.columnWidth(),n.columnHeight(),n.totalArea(),n))}return e}(t);for(;n.notPlaced().length>0;){let t=u(n);g(t),e.push(new rt(t.rowWidth(),t.rowHeight(),t.totalArea(),t.map((t=>t.group)).flatten(2),t,e.length+1))}}else{let n=function(t){let e=new ot;for(;t.notPlaced().length>0;){let n=o(t);e.push(new st(n.rowWidth(),n.rowHeight(),n.totalArea(),n))}return e}(t);for(;n.notPlaced().length>0;){let t=h(n);d(t),e.push(new rt(t.columnWidth(),t.columnHeight(),t.totalArea(),t.map((t=>t.group)).flatten(2),t,e.length+1))}}return e}(r),V]}function nt(t){return 0===t}class at{constructor(){this.placed=!1}place(){return this.placed=!0,this}}class it extends at{constructor([t,e,n,a]){super(),this.uniqueID=t,this.id=e,this.width=n+Q,this.height=a+Q,this.area=this.height*this.width,this.x=0,this.y=0}columnWidth(){return this.width}rowHeight(){return this.height}}class lt extends at{constructor(t,e,n,a){super(),this.width=t,this.height=e,this.area=n,this.group=a}}class st extends lt{constructor(t,e,n,a){super(t,e,n,a)}}class rt extends lt{constructor(t,e,n,a,i,l){super(t,e,n,a),this.columns=i,this.sheet_width=tt.width,this.sheet_height=tt.height,this.sheet_area=tt.width*tt.height,this.waste_area=this.sheet_area-this.area,this.waste_ratio=1-this.area/this.sheet_area,this.id="Feuille "+l,delete this.placed}}class ot extends Array{first(){return this[0]}last(){return this[this.length-1]}flatten(t=1){let e=this;for(;t--;)e=e.flat();return e}shuffle(){return this.length<3?this:new ot(...this.slice(1),this.first())}ascendingWidth(){return new ot(...this).sort(((t,e)=>e.width!=t.width?e.width-t.width:e.height-t.height))}ascendingHeight(){return new ot(...this).sort(((t,e)=>e.height!=t.height?e.height-t.height:e.width-t.width))}notPlaced(){return this.filter((t=>!t.placed))}widest(){return this.notPlaced().ascendingWidth().first()}narrowest(){return this.notPlaced().ascendingWidth().last()}tallest(){return this.notPlaced().ascendingHeight().first()}shortest(){return this.notPlaced().ascendingHeight().last()}biggest(){return this.sort(((t,e)=>e.area-t.area)).notPlaced().first()}smallest(){return this.sort(((t,e)=>t.area-e.area)).notPlaced().first()}placementBy(){switch(K){case"widest":return this.widest();case"narrowest":return this.narrowest();case"tallest":return this.tallest();case"shortest":return this.shortest();case"biggest":return this.biggest();case"smallest":return this.smallest()}}totalWidth(){return this.reduce(((t,e)=>e instanceof ot?t+e.ascendingWidth().first().width:t+e.width),0)}totalHeight(){return this.reduce(((t,e)=>e instanceof ot?t+e.ascendingHeight().first().height:t+e.height),0)}totalArea(){return this.flatten(3).reduce(((t,e)=>t+e.area),0)}columnWidth(){return this.flat().ascendingWidth().first().width}columnHeight(){return this.totalHeight()}rowWidth(){return this.totalWidth()}rowHeight(){return this.flat().ascendingHeight().first().height}remainingWidth(t){return t-this.totalWidth()}remainingHeight(t){return t-this.totalHeight()}fitsColumn(t,e){return this.filter((e=>e.width<=t[0].width)).fitsSheetRow(t,e)}fitsRow(t,e){return this.filter((e=>e.height<=t[0].height)).fitsSheetColumn(t,e)}fitsSheetColumn(t,e=tt.max_width()){return this.notPlaced().filter((n=>n.width<t.remainingWidth(e))).placementBy()}fitsSheetRow(t,e=tt.max_height()){return this.notPlaced().filter((n=>n.height<t.remainingHeight(e))).placementBy()}}function ct(t){const e=t=>parseFloat(parseFloat(t).toFixed(4));return isNaN(t)?t.includes("/")&&!t.includes(".")?t.split(" ").filter((t=>""!==t)).reduce(((t,n)=>{if(n.includes("/")){let a=n.split("/").filter((t=>""!==t));return t+e(a[0]/a[1])}return t+e(n)}),0):t:e(t)}function ut(t,e){return Math.round(t*10**e)/10**e}function ht(t,e){const n={mm:("0"+(t.getMonth()+1)).slice(-2),dd:("0"+t.getDate()).slice(-2),yy:t.getFullYear().toString().slice(-2),yyyy:t.getFullYear(),H:t.getHours(),M:t.getMinutes(),S:t.getSeconds()};return e.replace(/mm|dd|yyyy|yy|H|M|S/gi,(t=>n[t]))}function dt(t,e,n){const a=e.tool,i=e.cnc[a].spindle,l=e.cnc[a].feed,s=e.cnc[a].plunge,r=e.cnc[a].ramp,o=e.material.width/2||30,c=Math.min(e.material.height+10,122),u=e.material.thickness+.25||2,h=e.material.thickness,d=.02,g=e.language.includes("fr");let p=[...function(t,e,n,a){return[`( ${n} )`,`( ${a} feuilles a couper )`,`( ${ht(new Date,"dd.mm.yyyy H:M")} )`,"G40 G80 G70","M06 T"+t,"G43 H"+t,`S${e} M03`,"G54 G90"]}(a,i,n,t.length)];return t.forEach((t=>{var n;p.push(`( ${t.id} )`),t.columns.forEach(((t,n)=>{t.group.flat().sort(((t,a)=>e.nestTypeColumn?function(t,e,n){return n%2==0?e.y!==t.y?e.y-t.y:t.x-e.x:t.y!==e.y?t.y-e.y:e.x-t.x}(t,a,n):function(t,e,n){return n%2==0?t.x!==e.x?t.x-e.x:t.y-e.y:e.x!==t.x?e.x-t.x:e.y-t.y}(t,a,n))).forEach((t=>p.push(function(t,e){const n=gt(t.x),a=gt(t.y),i=gt(n+t.width),o=gt(a+t.height),c=gt(a+t.height/5),p=gt(c+r),$=t.width<5||t.height<5;let z=[w(n,p,d,s),v(n,o,d,l),y(i),x(a),y(n),x(c)];return[`( ${g?"coupe panneau":"cutting panel"} ${t.id} )`,t.uniqueID?`( ${t.uniqueID} )`:"",f(n,c,u),b(h+.02),$?z:"",w(n,p,0,s),v(n,o,0,l),y(i),x(a),y(n),x(p),m(u),`( ${g?"fin panneau":"finished panel"} ${t.id} )`].flat().filter((t=>""!==t))}(t))))})),p.push((n=c,["M05 M104",`G90 X${pt(o)} Y${pt(n)}`,"M00","( changez la feuille et )","( cycle start :)","M103 M03"]))})),p.pop(),p.push(["G40 G80 G91 G28 Z0 M5",`G00 G90 X${pt(o)} Y${pt(c)}`,"M30"]),p.flat().join("\n");function f(t,e,n){return`G00 X${pt(t)} Y${pt(e)} Z${pt(n)}`}function m(t){return"G00 Z"+pt(t)}function w(t,e,n,a){return`G01 X${pt(t)} Y${pt(e)} Z${pt(n)} F${a}`}function v(t,e,n,a){return`G01 X${pt(t)} Y${pt(e)} Z${pt(n)} F${a}`}function y(t){return"X"+pt(t)}function x(t){return"Y"+pt(t)}function b(t){return"Z"+pt(t)}}function gt(t){return ut(t,5)}function pt(t){return/\./.test(t)||0===t?t:t.toFixed(1)}const ft=[];function mt(e,n=t){let a;const i=[];function s(t){if(l(e,t)&&(e=t,a)){const t=!ft.length;for(let t=0;t<i.length;t+=1){const n=i[t];n[1](),ft.push(n,e)}if(t){for(let t=0;t<ft.length;t+=2)ft[t][0](ft[t+1]);ft.length=0}}}return{set:s,update:function(t){s(t(e))},subscribe:function(l,r=t){const o=[l,r];return i.push(o),1===i.length&&(a=n(s)||t),l(e),()=>{const t=i.indexOf(o);-1!==t&&i.splice(t,1),0===i.length&&(a(),a=null)}}}}const wt=(t,e)=>{const n=t=>JSON.stringify(t,null,2),a=JSON.parse;null===sessionStorage.getItem(t)&&sessionStorage.setItem(t,n(e));const i=a(sessionStorage.getItem(t)),{subscribe:l,set:s,update:r}=mt(i);return{subscribe:l,set:e=>(sessionStorage.setItem(t,n(e)),s(e)),update:r}};const vt={name:ht(new Date,"yymmdd-HM"),errors:[],contents:[["Project name:","New"],["Border (+ or -)",0],["Metric units",!1],[,,,],["Panel","Q","W","H"],[1,,,]]},yt=((t,e)=>{const n=t=>JSON.stringify(t,null,2),a=JSON.parse;null===localStorage.getItem(t)&&localStorage.setItem(t,n(e));const i=a(localStorage.getItem(t)),{subscribe:l,set:s,update:r}=mt(i);return{subscribe:l,set:e=>(localStorage.setItem(t,n(e)),s(e)),update:r}})("settings",{material:{type:"",colour:"",width:49,height:97,thickness:.75,margins:.3},tool:9,nestTypeColumn:!1,nestOrder:"widest",nestDirectionBottom:!0,units:!1,show:!0,cnc:{1:{type:"Endmill",diameter:.1875,spindle:18e3,feed:75,plunge:75,ramp:1,max_depth:.125},2:{type:"Endmill",diameter:.75,spindle:18e3,feed:150,plunge:40,ramp:3,max_depth:3},3:{type:"Ballnose",diameter:.125,spindle:18e3,feed:150,plunge:40,ramp:1,max_depth:.125},4:{type:"Edger",diameter:.75,spindle:18e3,feed:100,plunge:40,ramp:2.25,max_depth:2.25},5:{type:"drill",diameter:.19685,spindle:18e3,feed:0,plunge:70,ramp:0,max_depth:1},6:{type:"Endmill",diameter:.25,spindle:18e3,feed:150,plunge:40,ramp:1,max_depth:.125},7:{type:"drill",diameter:.31496,spindle:18e3,feed:0,plunge:70,ramp:0,max_depth:1},8:{type:"surfacing",diameter:2.5,spindle:1e4,feed:75,plunge:30,ramp:8,max_depth:.125},9:{type:"Endmill",diameter:.375,spindle:18e3,feed:400,plunge:70,ramp:1,max_depth:.875},10:{type:"Endmill",diameter:.375,spindle:18e3,feed:400,plunge:70,ramp:1,max_depth:.875},11:{type:"drill",diameter:.3937,spindle:18e3,feed:0,plunge:70,ramp:0,max_depth:1},12:{type:"Vcarve",diameter:1.5,spindle:18e3,feed:75,plunge:40,ramp:1,max_depth:.75}}}),xt=wt("sheets",[]),bt=wt("csv-file",vt),$t=wt("svg",""),zt=wt("activePanel","");var _t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var Ct,kt;(function(t,e){!function(){function e(t,e){return void 0===e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}function n(t,e,n){var a=new XMLHttpRequest;a.open("GET",t),a.responseType="blob",a.onload=function(){r(a.response,e,n)},a.onerror=function(){console.error("could not download file")},a.send()}function a(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function i(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(n){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var l="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof _t&&_t.global===_t?_t:void 0,s=l.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),r=l.saveAs||("object"!=typeof window||window!==l?function(){}:"download"in HTMLAnchorElement.prototype&&!s?function(t,e,s){var r=l.URL||l.webkitURL,o=document.createElement("a");e=e||t.name||"download",o.download=e,o.rel="noopener","string"==typeof t?(o.href=t,o.origin===location.origin?i(o):a(o.href)?n(t,e,s):i(o,o.target="_blank")):(o.href=r.createObjectURL(t),setTimeout((function(){r.revokeObjectURL(o.href)}),4e4),setTimeout((function(){i(o)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,l,s){if(l=l||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(e(t,s),l);else if(a(t))n(t,l,s);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout((function(){i(r)}))}}:function(t,e,a,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),"string"==typeof t)return n(t,e,a);var r="application/octet-stream"===t.type,o=/constructor/i.test(l.HTMLElement)||l.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||r&&o||s)&&"undefined"!=typeof FileReader){var u=new FileReader;u.onloadend=function(){var t=u.result;t=c?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=t:location=t,i=null},u.readAsDataURL(t)}else{var h=l.URL||l.webkitURL,d=h.createObjectURL(t);i?i.location=d:location.href=d,i=null,setTimeout((function(){h.revokeObjectURL(d)}),4e4)}});l.saveAs=r.saveAs=r,t.exports=r}()})(kt={path:Ct,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&kt.path)}},kt.exports),kt.exports;function Mt(e){let n,a,i,l,s;return{c(){n=g("div"),a=m(),i=g("div"),l=m(),s=g("div"),y(n,"class","file-icon dl-csv-block blocked svelte-hww559"),y(i,"class","file-icon dl-svg-block blocked svelte-hww559"),y(s,"class","file-icon dl-cnc-block blocked svelte-hww559")},m(t,e){u(t,n,e),u(t,a,e),u(t,i,e),u(t,l,e),u(t,s,e)},p:t,d(t){t&&h(n),t&&h(a),t&&h(i),t&&h(l),t&&h(s)}}}function Ht(t){let e,n,a,i,l,s,r,o,d,p,f,w,v,x,b,$,z;return{c(){e=g("a"),n=g("span"),n.textContent="download .csv file (alt + v)",s=m(),r=g("a"),o=g("span"),o.textContent="download .svg file (alt + g)",w=m(),v=g("a"),x=g("span"),x.textContent="download .cnc file (alt + c)",y(n,"class","svelte-hww559"),y(e,"href",a="data:text/plain;charset=utf-8,"+encodeURIComponent(t[10])),y(e,"download",i=t[5].name+t[11]+".csv"),y(e,"role","button"),y(e,"data-lang",l=t[8].language),y(e,"data-fr","téléchargez le fichier .csv  (alt + v)"),y(e,"class","file-icon dl-csv svelte-hww559"),y(o,"class","svelte-hww559"),y(r,"href",d="data:text/plain;charset=utf-8,"+encodeURIComponent(t[9])),y(r,"download",p=t[5].name+t[11]+".svg"),y(r,"alt","download svg file"),y(r,"role","button"),y(r,"data-lang",f=t[8].language),y(r,"data-fr","telechargez le fichier .svg (alt + g)"),y(r,"class","file-icon dl-svg svelte-hww559"),y(x,"class","svelte-hww559"),y(v,"href",b="data:text/plain;charset=utf-8,"+encodeURIComponent(t[6]())),y(v,"download",$=t[5].name+t[11]+".cnc"),y(v,"role","button"),y(v,"data-lang",z=t[8].language),y(v,"data-fr","telechargez le fichier .cnc (alt + c)"),y(v,"class","file-icon dl-cnc svelte-hww559")},m(a,i){u(a,e,i),c(e,n),t[18](e),u(a,s,i),u(a,r,i),c(r,o),t[19](r),u(a,w,i),u(a,v,i),c(v,x),t[20](v)},p(t,n){32&n&&i!==(i=t[5].name+t[11]+".csv")&&y(e,"download",i),256&n&&l!==(l=t[8].language)&&y(e,"data-lang",l),512&n&&d!==(d="data:text/plain;charset=utf-8,"+encodeURIComponent(t[9]))&&y(r,"href",d),32&n&&p!==(p=t[5].name+t[11]+".svg")&&y(r,"download",p),256&n&&f!==(f=t[8].language)&&y(r,"data-lang",f),64&n&&b!==(b="data:text/plain;charset=utf-8,"+encodeURIComponent(t[6]()))&&y(v,"href",b),32&n&&$!==($=t[5].name+t[11]+".cnc")&&y(v,"download",$),256&n&&z!==(z=t[8].language)&&y(v,"data-lang",z)},d(n){n&&h(e),t[18](null),n&&h(s),n&&h(r),t[19](null),n&&h(w),n&&h(v),t[20](null)}}}function St(e){let n,i,l,s,r,o,d,p,f,w,x,b,z,_,k,M,H,S,E,R,q,N,O,P,T,A,B;function W(t,e){return t[7].length?Ht:Mt}document.title=n="Holy! Nest: "+e[5].contents[0][1]||"Holy! Nest";let j=W(e),L=j(e);return{c(){i=m(),l=g("div"),s=g("input"),r=m(),o=g("label"),d=g("span"),d.textContent="open .csv file (alt + o)",w=m(),x=g("div"),b=g("span"),b.textContent="new file (alt + n)",_=m(),L.c(),k=m(),M=g("div"),H=g("span"),H.textContent="cnc + project settings (alt + s)",E=m(),R=g("div"),q=g("h3"),N=g("span"),N.textContent="Project:",O=m(),P=g("input"),y(s,"class","inputfile svelte-hww559"),y(s,"name","file"),y(s,"id","file"),y(s,"type","file"),y(d,"class","svelte-hww559"),y(o,"for","file"),y(o,"data-lang",p=e[8].language),y(o,"data-fr","ouvrir fichier .csv (alt + o)"),y(o,"class",f="file-icon "+(e[0]?"badfile":"upload")+" svelte-hww559"),y(b,"class","svelte-hww559"),y(x,"tabindex","0"),y(x,"role","button"),y(x,"data-lang",z=e[8].language),y(x,"data-fr","nouveau fichier (alt + n)"),y(x,"class","file-icon new svelte-hww559"),y(H,"class","svelte-hww559"),y(M,"tabindex","0"),y(M,"role","button"),y(M,"data-lang",S=e[8].language),y(M,"data-fr","cnc + projet parametre  (alt + s)"),y(M,"class","file-icon setting-icon svelte-hww559"),C(M,"active",e[8].show),y(l,"class","file-mgmt svelte-hww559"),y(P,"type","text"),y(P,"class","svelte-hww559"),y(q,"data-lang",T=e[8].language),y(q,"data-fr","Projet\n    : "),y(q,"class","svelte-hww559"),y(R,"class","project")},m(t,n){u(t,i,n),u(t,l,n),c(l,s),e[16](s),c(l,r),c(l,o),c(o,d),c(l,w),c(l,x),c(x,b),c(l,_),L.m(l,null),c(l,k),c(l,M),c(M,H),u(t,E,n),u(t,R,n),c(R,q),c(q,N),c(q,O),c(q,P),$(P,e[5].contents[0][1]),A||(B=[v(window,"keydown",e[14]),v(window,"keyup",e[15]),v(s,"change",e[13]),v(o,"mouseover",e[17]),v(x,"click",e[12]),v(M,"click",e[21]),v(P,"input",e[22])],A=!0)},p(t,[e]){32&e&&n!==(n="Holy! Nest: "+t[5].contents[0][1]||"Holy! Nest")&&(document.title=n),256&e&&p!==(p=t[8].language)&&y(o,"data-lang",p),1&e&&f!==(f="file-icon "+(t[0]?"badfile":"upload")+" svelte-hww559")&&y(o,"class",f),256&e&&z!==(z=t[8].language)&&y(x,"data-lang",z),j===(j=W(t))&&L?L.p(t,e):(L.d(1),L=j(t),L&&(L.c(),L.m(l,k))),256&e&&S!==(S=t[8].language)&&y(M,"data-lang",S),256&e&&C(M,"active",t[8].show),32&e&&P.value!==t[5].contents[0][1]&&$(P,t[5].contents[0][1]),256&e&&T!==(T=t[8].language)&&y(q,"data-lang",T)},i:t,o:t,d(t){t&&h(i),t&&h(l),e[16](null),L.d(),t&&h(E),t&&h(R),A=!1,a(B)}}}function Et(t,e,n){let a,i,l,r;s(t,bt,(t=>n(5,a=t))),s(t,xt,(t=>n(7,i=t))),s(t,yt,(t=>n(8,l=t))),s(t,$t,(t=>n(9,r=t)));let c,u=!1,h=a.contents.join("\n");const d=ht(new Date,"-yy-mm-dd");function g(){o(bt,a={...vt})}let p,f,m,w={};let v;return t.$$.update=()=>{416&t.$$.dirty&&n(6,v=()=>dt(i,l,a.name))},[u,c,p,f,m,a,v,i,l,r,h,d,g,function(){if(c.files)if(c.files[0].name.includes(".csv")){let t=new FileReader;t.readAsText(c.files[0]),t.onload=function(t){o(bt,a.contents=function(t,e=1,n=","){for(var a=new RegExp("(\\"+n+'|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\'+n+"\\r\\n]*))","gi"),i=[[]],l=null;l=a.exec(t);){var s=l[1];if(s.length&&s!=n&&i.push([]),l[2])var r=l[2].replace(new RegExp('""',"g"),'"');else r=l[3];/\d/.test(r)&&(r=ct(r)),i[i.length-1].push(r)}return i.filter(((t,n)=>n<e||t.filter((t=>""!==t)).length))}(t.target.result,5),a),n(0,u=!1)},o(bt,a.name=a.contents[0][1],a)}else n(0,u=!0)},function(t){console.log(w),w[t.code]=!0;const e=t=>(w.AltLeft||w.AltRight)&&w[t];e("KeyO")&&setTimeout((()=>c.click()),140),e("KeyN")&&g(),e("KeyV")&&p.click(),e("KeyG")&&f.click(),e("KeyC")&&m.click(),e("KeyS")&&o(yt,l.show=!l.show,l)},function(t){delete w[t.code]},function(t){E[t?"unshift":"push"]((()=>{c=t,n(1,c)}))},()=>n(0,u=!1),function(t){E[t?"unshift":"push"]((()=>{p=t,n(2,p)}))},function(t){E[t?"unshift":"push"]((()=>{f=t,n(3,f)}))},function(t){E[t?"unshift":"push"]((()=>{m=t,n(4,m)}))},()=>o(yt,l.show=!l.show,l),function(){a.contents[0][1]=this.value,bt.set(a)}]}class Rt extends X{constructor(t){super(),Y(this,t,Et,St,l,{})}}function qt(t,e,n){const a=t.slice();return a[17]=e[n],a[18]=e,a[19]=n,a}function Nt(t,e,n){const a=t.slice();return a[20]=e[n],a}function Ot(t){let e,n,i,l,s,r,o,p,f,x,b,$,z,_=t[1].errors.length&&Pt(t),C=t[0],k=[];for(let e=0;e<C.length;e+=1)k[e]=At(qt(t,C,e));return{c(){_&&_.c(),e=m(),n=g("ul"),i=g("li"),i.textContent="Panel",l=m(),s=g("li"),s.textContent="Q",r=m(),o=g("li"),o.textContent="W",p=m(),f=g("li"),f.textContent="H",x=m();for(let t=0;t<k.length;t+=1)k[t].c();b=w(),y(i,"class","svelte-1m3q460"),y(s,"class","svelte-1m3q460"),y(o,"class","svelte-1m3q460"),y(f,"class","svelte-1m3q460"),y(n,"class","svelte-1m3q460")},m(a,h){_&&_.m(a,h),u(a,e,h),u(a,n,h),c(n,i),c(n,l),c(n,s),c(n,r),c(n,o),c(n,p),c(n,f),u(a,x,h);for(let t=0;t<k.length;t+=1)k[t].m(a,h);u(a,b,h),$||(z=[v(i,"click",t[7]),v(s,"click",t[8]),v(o,"click",t[9]),v(f,"click",t[10])],$=!0)},p(t,n){if(t[1].errors.length?_?_.p(t,n):(_=Pt(t),_.c(),_.m(e.parentNode,e)):_&&(_.d(1),_=null),13&n){let e;for(C=t[0],e=0;e<C.length;e+=1){const a=qt(t,C,e);k[e]?k[e].p(a,n):(k[e]=At(a),k[e].c(),k[e].m(b.parentNode,b))}for(;e<k.length;e+=1)k[e].d(1);k.length=C.length}},d(t){_&&_.d(t),t&&h(e),t&&h(n),t&&h(x),d(k,t),t&&h(b),$=!1,a(z)}}}function Pt(t){let e,n,a,i,l,s,r=t[1].errors.length>1?"S":"",o=t[1].errors,p=[];for(let e=0;e<o.length;e+=1)p[e]=Tt(Nt(t,o,e));return{c(){e=g("h5"),n=f("ERROR"),a=f(r),i=f(":"),l=m();for(let t=0;t<p.length;t+=1)p[t].c();s=w()},m(t,r){u(t,e,r),c(e,n),c(e,a),c(e,i),u(t,l,r);for(let e=0;e<p.length;e+=1)p[e].m(t,r);u(t,s,r)},p(t,e){if(2&e&&r!==(r=t[1].errors.length>1?"S":"")&&b(a,r),2&e){let n;for(o=t[1].errors,n=0;n<o.length;n+=1){const a=Nt(t,o,n);p[n]?p[n].p(a,e):(p[n]=Tt(a),p[n].c(),p[n].m(s.parentNode,s))}for(;n<p.length;n+=1)p[n].d(1);p.length=o.length}},d(t){t&&h(e),t&&h(l),d(p,t),t&&h(s)}}}function Tt(t){let e,n,a=t[20]+"";return{c(){e=g("p"),n=f(a)},m(t,a){u(t,e,a),c(e,n)},p(t,e){2&e&&a!==(a=t[20]+"")&&b(n,a)},d(t){t&&h(e)}}}function At(t){let e,n,i,l,s,o,d,p,f,w,b,z,_,C,k,M,H,S;function E(){t[11].call(i,t[18],t[19])}function R(){t[12].call(o,t[18],t[19])}function q(){t[13].call(f,t[18],t[19])}function N(){t[14].call(_,t[18],t[19])}function O(...e){return t[15](t[17],...e)}return{c(){e=g("ul"),n=g("li"),i=g("input"),l=m(),s=g("li"),o=g("input"),d=m(),p=g("li"),f=g("input"),b=m(),z=g("li"),_=g("input"),k=m(),y(i,"type","text"),y(i,"class","svelte-1m3q460"),y(n,"class","svelte-1m3q460"),y(o,"type","number"),y(o,"min","0"),y(o,"max","100"),y(o,"class","svelte-1m3q460"),y(s,"class","svelte-1m3q460"),y(f,"type","number"),y(f,"min","0"),y(f,"max",w=t[3].material.width-2*t[3].material.margins),y(f,"step","0.03125"),y(f,"class","svelte-1m3q460"),y(p,"class","svelte-1m3q460"),y(_,"type","number"),y(_,"min","0"),y(_,"max",C=t[3].material.height-2*t[3].material.margins),y(_,"step","0.03125"),y(_,"class","svelte-1m3q460"),y(z,"class","svelte-1m3q460"),y(e,"class",M=r(t[2]==t[17][0]?"active":"")+" svelte-1m3q460")},m(a,r){u(a,e,r),c(e,n),c(n,i),$(i,t[17][0]),c(e,l),c(e,s),c(s,o),$(o,t[17][1]),c(e,d),c(e,p),c(p,f),$(f,t[17][2]),c(e,b),c(e,z),c(z,_),$(_,t[17][3]),c(e,k),H||(S=[v(i,"input",E),v(i,"focus",Wt),v(o,"input",R),v(o,"focus",Wt),v(f,"input",q),v(f,"focus",Wt),v(_,"input",N),v(_,"focus",Wt),v(e,"mouseenter",O),v(e,"mouseleave",t[16])],H=!0)},p(n,a){t=n,1&a&&i.value!==t[17][0]&&$(i,t[17][0]),1&a&&x(o.value)!==t[17][1]&&$(o,t[17][1]),8&a&&w!==(w=t[3].material.width-2*t[3].material.margins)&&y(f,"max",w),1&a&&x(f.value)!==t[17][2]&&$(f,t[17][2]),8&a&&C!==(C=t[3].material.height-2*t[3].material.margins)&&y(_,"max",C),1&a&&x(_.value)!==t[17][3]&&$(_,t[17][3]),5&a&&M!==(M=r(t[2]==t[17][0]?"active":"")+" svelte-1m3q460")&&y(e,"class",M)},d(t){t&&h(e),H=!1,a(S)}}}function Bt(e){let n,a,i,l,s,r,o=e[1].name&&Ot(e);return{c(){n=g("div"),a=g("div"),o&&o.c(),i=m(),l=g("ul"),l.textContent="+",y(l,"class","new-row svelte-1m3q460"),y(a,"class","svelte-1m3q460"),y(n,"class","wrapper svelte-1m3q460")},m(t,h){u(t,n,h),c(n,a),o&&o.m(a,null),c(a,i),c(a,l),s||(r=v(l,"click",e[4]),s=!0)},p(t,[e]){t[1].name?o?o.p(t,e):(o=Ot(t),o.c(),o.m(a,i)):o&&(o.d(1),o=null)},i:t,o:t,d(t){t&&h(n),o&&o.d(),s=!1,r()}}}function Wt(){this.select()}function jt(t,e,n){let a,i,l;function r(t){n(0,u=u.sort(((e,n)=>e[t]-n[t])))}function c(t){n(0,u=u.sort(((e,n)=>n[t]-e[t])))}s(t,bt,(t=>n(1,a=t))),s(t,zt,(t=>n(2,i=t))),s(t,yt,(t=>n(3,l=t)));let u;return t.$$.update=()=>{2&t.$$.dirty&&n(0,u=a.contents.slice(5))},[u,a,i,l,function(){let t=[u.length+1,,];o(bt,a.contents=[...a.contents,t],a)},r,c,()=>r(0),()=>c(1),()=>c(2),()=>c(3),function(t,e){t[e][0]=this.value,n(0,u),n(1,a)},function(t,e){t[e][1]=x(this.value),n(0,u),n(1,a)},function(t,e){t[e][2]=x(this.value),n(0,u),n(1,a)},function(t,e){t[e][3]=x(this.value),n(0,u),n(1,a)},t=>o(zt,i=t[0]),()=>o(zt,i="")]}class Lt extends X{constructor(t){super(),Y(this,t,jt,Bt,l,{})}}function Dt(t,e,n){const a=t.slice();return a[19]=e[n],a}function Gt(t,e,n){const a=t.slice();return a[16]=e[n],a[18]=n,a}function It(t){let e,n,a,i,l,s,r,o,d,p,w,v,x,$,_,C,k,M,H,S,E=t[7][t[0]].id+"",R=ut(t[7][t[0]].area/144,2)+"",q=ut(t[7][t[0]].waste_area/144,2)+"",N=ut(100*t[7][t[0]].waste_ratio,2)+"";return{c(){e=g("div"),n=g("h4"),a=f(E),i=m(),l=g("p"),s=f("area des panneaux: "),r=f(R),o=f(" pi"),d=g("sup"),d.textContent="2",p=m(),w=g("p"),v=f("area de perte:\n      "),x=f(q),$=f("\n      pi"),_=g("sup"),_.textContent="2",C=m(),k=g("p"),M=f("% de perte: "),H=f(N),S=f("%"),y(d,"class","svelte-1nnwdec"),y(_,"class","svelte-1nnwdec"),y(e,"class","infocard svelte-1nnwdec"),z(e,"left",t[3]+"px"),z(e,"top",t[2]+"px")},m(t,h){u(t,e,h),c(e,n),c(n,a),c(e,i),c(e,l),c(l,s),c(l,r),c(l,o),c(l,d),c(e,p),c(e,w),c(w,v),c(w,x),c(w,$),c(w,_),c(e,C),c(e,k),c(k,M),c(k,H),c(k,S)},p(t,n){129&n&&E!==(E=t[7][t[0]].id+"")&&b(a,E),129&n&&R!==(R=ut(t[7][t[0]].area/144,2)+"")&&b(r,R),129&n&&q!==(q=ut(t[7][t[0]].waste_area/144,2)+"")&&b(x,q),129&n&&N!==(N=ut(100*t[7][t[0]].waste_ratio,2)+"")&&b(H,N),8&n&&z(e,"left",t[3]+"px"),4&n&&z(e,"top",t[2]+"px")},d(t){t&&h(e)}}}function Ft(t){let e,n,i,l,s,r,o,d,g,m,w,x,$,_,C=t[19].id+"";return{c(){e=p("rect"),d=p("text"),g=f(C),z(e,"stroke-width",t[6].cnc[t[6].tool].diameter*t[8]+"px"),y(e,"class",n="panel "+(t[5]==t[19].id?"active":"")+" print svelte-1nnwdec"),y(e,"id",i=t[19].id),y(e,"x",l=(t[19].x+t[14](t[18]).x)*t[8]),y(e,"y",s=(t[13](t[19].y,t[19].height)+t[14](t[18]).y)*t[8]),y(e,"width",r=t[19].width*t[8]),y(e,"height",o=t[19].height*t[8]),z(d,"font-size",t[8]*(t[19].id.length>6?Math.min(.4*t[19].height,2.5):Math.min(.8*t[19].height,5))+"px"),y(d,"class",m="id "+(t[5]==t[19].id?"active":"")+" print svelte-1nnwdec"),y(d,"x",w=(t[19].x+t[14](t[18]).x+t[19].width/2)*t[8]),y(d,"y",x=(t[13](t[19].y,t[19].height)+t[14](t[18]).y+Math.min(.8*t[19].height,5)/3+t[19].height/2)*t[8])},m(n,a){u(n,e,a),u(n,d,a),c(d,g),$||(_=[v(e,"mouseover",t[9]),v(e,"mouseleave",t[10])],$=!0)},p(t,a){64&a&&z(e,"stroke-width",t[6].cnc[t[6].tool].diameter*t[8]+"px"),160&a&&n!==(n="panel "+(t[5]==t[19].id?"active":"")+" print svelte-1nnwdec")&&y(e,"class",n),128&a&&i!==(i=t[19].id)&&y(e,"id",i),128&a&&l!==(l=(t[19].x+t[14](t[18]).x)*t[8])&&y(e,"x",l),128&a&&s!==(s=(t[13](t[19].y,t[19].height)+t[14](t[18]).y)*t[8])&&y(e,"y",s),128&a&&r!==(r=t[19].width*t[8])&&y(e,"width",r),128&a&&o!==(o=t[19].height*t[8])&&y(e,"height",o),128&a&&C!==(C=t[19].id+"")&&b(g,C),128&a&&z(d,"font-size",t[8]*(t[19].id.length>6?Math.min(.4*t[19].height,2.5):Math.min(.8*t[19].height,5))+"px"),160&a&&m!==(m="id "+(t[5]==t[19].id?"active":"")+" print svelte-1nnwdec")&&y(d,"class",m),128&a&&w!==(w=(t[19].x+t[14](t[18]).x+t[19].width/2)*t[8])&&y(d,"x",w),128&a&&x!==(x=(t[13](t[19].y,t[19].height)+t[14](t[18]).y+Math.min(.8*t[19].height,5)/3+t[19].height/2)*t[8])&&y(d,"y",x)},d(t){t&&h(e),t&&h(d),$=!1,a(_)}}}function Ut(t){let e,n,i,l,s,r,o,g,f,m,w=t[16].group,x=[];for(let e=0;e<w.length;e+=1)x[e]=Ft(Dt(t,w,e));return{c(){e=p("g"),n=p("rect"),g=p("g");for(let t=0;t<x.length;t+=1)x[t].c();z(n,"stroke-width",t[6].material.margins*t[8]+"px"),y(n,"class","sheet print svelte-1nnwdec"),y(n,"id",i=t[18]),y(n,"x",l=(t[14](t[18]).x+t[6].material.margins/2)*t[8]),y(n,"y",s=(t[14](t[18]).y+t[6].material.margins/2)*t[8]),y(n,"width",r=(t[16].sheet_width-t[6].material.margins)*t[8]),y(n,"height",o=(t[16].sheet_height-t[6].material.margins)*t[8]),y(e,"id","sheets"),y(g,"id","panels")},m(a,i){u(a,e,i),c(e,n),u(a,g,i);for(let t=0;t<x.length;t+=1)x[t].m(g,null);f||(m=[v(n,"mouseover",t[11]),v(n,"mouseleave",t[12])],f=!0)},p(t,e){if(64&e&&z(n,"stroke-width",t[6].material.margins*t[8]+"px"),64&e&&l!==(l=(t[14](t[18]).x+t[6].material.margins/2)*t[8])&&y(n,"x",l),64&e&&s!==(s=(t[14](t[18]).y+t[6].material.margins/2)*t[8])&&y(n,"y",s),192&e&&r!==(r=(t[16].sheet_width-t[6].material.margins)*t[8])&&y(n,"width",r),192&e&&o!==(o=(t[16].sheet_height-t[6].material.margins)*t[8])&&y(n,"height",o),26592&e){let n;for(w=t[16].group,n=0;n<w.length;n+=1){const a=Dt(t,w,n);x[n]?x[n].p(a,e):(x[n]=Ft(a),x[n].c(),x[n].m(g,null))}for(;n<x.length;n+=1)x[n].d(1);x.length=w.length}},d(t){t&&h(e),t&&h(g),d(x,t),f=!1,a(m)}}}function Yt(e){let n,a,i,l,s,r,o,w=e[1]&&It(e),v=e[7],x=[];for(let t=0;t<v.length;t+=1)x[t]=Ut(Gt(e,v,t));return{c(){w&&w.c(),n=m(),a=g("div"),i=p("svg");for(let t=0;t<x.length;t+=1)x[t].c();l=f(">"),y(i,"class","print svelte-1nnwdec"),y(i,"version","1.1"),y(i,"xmlns","http://www.w3.org/2000/svg"),y(i,"xmlns:xlink","http://www.w3.org/1999/xlink"),y(i,"width",s=e[14](e[7].length-1).w*e[8]||0),y(i,"height",r=e[14](e[7].length-1).h*e[8]||0),y(i,"viewBox",o="0 0 "+(e[14](e[7].length-1).w*e[8]||0)+" "+(e[14](e[7].length-1).h*e[8]||0)),y(i,"preserveAspectRatio","xMidYMid meet"),y(a,"class","viewer svelte-1nnwdec")},m(t,s){w&&w.m(t,s),u(t,n,s),u(t,a,s),c(a,i);for(let t=0;t<x.length;t+=1)x[t].m(i,null);c(i,l),e[15](a)},p(t,[e]){if(t[1]?w?w.p(t,e):(w=It(t),w.c(),w.m(n.parentNode,n)):w&&(w.d(1),w=null),32736&e){let n;for(v=t[7],n=0;n<v.length;n+=1){const a=Gt(t,v,n);x[n]?x[n].p(a,e):(x[n]=Ut(a),x[n].c(),x[n].m(i,l))}for(;n<x.length;n+=1)x[n].d(1);x.length=v.length}128&e&&s!==(s=t[14](t[7].length-1).w*t[8]||0)&&y(i,"width",s),128&e&&r!==(r=t[14](t[7].length-1).h*t[8]||0)&&y(i,"height",r),128&e&&o!==(o="0 0 "+(t[14](t[7].length-1).w*t[8]||0)+" "+(t[14](t[7].length-1).h*t[8]||0))&&y(i,"viewBox",o)},i:t,o:t,d(t){w&&w.d(t),t&&h(n),t&&h(a),d(x,t),e[15](null)}}}function Xt(t,e,n){let a,i,l;s(t,zt,(t=>n(5,a=t))),s(t,yt,(t=>n(6,i=t))),s(t,xt,(t=>n(7,l=t)));let r,c,u=!1,h=0,d=0;return[r,u,h,d,c,a,i,l,90,function(){o(zt,a=this.id)},function(){o(zt,a="")},function(){n(1,u=!0);let t=this.getBoundingClientRect();n(2,h=(t.bottom-t.top)/2+t.top),n(3,d=(t.right-t.left)/2+t.left),n(0,r=this.id)},function(){n(1,u=!1)},function(t,e){return i.material.height-e-t},function(t){let e=Math.ceil(l.length/5),n=Math.ceil(l.length/e),a=Math.ceil((t+1)/n)-1;return{x:t%n*i.material.width,y:a*i.material.height,w:n*i.material.width,h:e*i.material.height}},function(t){E[t?"unshift":"push"]((()=>{c=t,n(4,c)}))}]}class Kt extends X{constructor(t){super(),Y(this,t,Xt,Yt,l,{})}}function Zt(e){let n,i,l,s,r,o,d,p,f,w,b,z,k,M,H,S,E,R,q,N,O,T,A,B,W,j,L,D,G,I,F,U,Y,X,K,Z,J,Q,V,tt,et,nt,at,it,lt,st,rt,ot,ct,ut,ht,dt,gt,pt,ft,mt,wt,vt,yt,xt,bt,$t,zt,_t,Ct,kt,Mt,Ht,St,Et,Rt,qt,Nt,Ot,Pt,Tt,At,Bt,Wt,jt,Lt,Dt,Gt,It,Ft,Ut,Yt,Xt,Kt,Zt,Jt,Qt,Vt,te,ee,ne,ae,ie,le,se,re,oe,ce,ue,he,de,ge,pe,fe,me,we,ve,ye,xe,be,$e,ze,_e,Ce,ke,Me,He,Se,Ee,Re,qe,Ne,Oe,Pe,Te,Ae,Be,We,je,Le,De,Ge,Ie,Fe,Ue,Ye,Xe,Ke,Ze,Je,Qe,Ve,tn,en,nn,an,ln,sn,rn,on,cn,un,hn,dn,gn;return{c(){n=g("div"),i=g("div"),l=g("h2"),s=g("span"),s.textContent="Settings",o=m(),d=g("div"),p=g("div"),f=g("h3"),w=g("span"),w.textContent="Units:",z=m(),k=g("label"),M=g("input"),H=m(),S=g("div"),R=m(),q=g("div"),N=g("h3"),O=g("span"),O.textContent="Nest from:",A=m(),B=g("label"),W=g("input"),j=m(),L=g("div"),G=m(),I=g("div"),F=g("h3"),U=g("span"),U.textContent="Nest with:",X=m(),K=g("label"),Z=g("input"),J=m(),Q=g("div"),tt=m(),et=g("div"),nt=g("h3"),at=g("span"),at.textContent="Nest by:",lt=m(),st=g("select"),rt=g("option"),ot=g("span"),ot.textContent="widest",ct=m(),ht=g("option"),dt=g("span"),dt.textContent="tallest",gt=m(),ft=g("option"),mt=g("span"),mt.textContent="biggest",vt=m(),yt=g("div"),xt=g("h3"),bt=g("span"),bt.textContent="Sheet info:",zt=m(),_t=g("h5"),Ct=g("span"),Ct.textContent="Width:",kt=m(),Mt=g("input"),St=m(),Et=g("h5"),Rt=g("span"),Rt.textContent="Height:",qt=m(),Nt=g("input"),Pt=m(),Tt=g("h5"),At=g("span"),At.textContent="Thickness:",Bt=m(),Wt=g("input"),Lt=m(),Dt=g("div"),Gt=g("h5"),It=g("span"),It.textContent="Margins:",Ft=m(),Ut=g("input"),Xt=m(),Kt=g("div"),Zt=g("div"),Jt=g("h3"),Qt=g("span"),Qt.textContent="Profile cutting tool:",te=m(),ee=g("h5"),ne=g("span"),ne.textContent="Tool #:",ae=m(),ie=g("input"),se=m(),re=g("div"),oe=g("h5"),ce=g("span"),ce.textContent="Type:",ue=m(),he=g("input"),ge=m(),pe=g("div"),fe=g("h5"),me=g("span"),me.textContent="Diameter:",we=m(),ve=g("input"),xe=m(),be=g("div"),$e=g("h5"),ze=g("span"),ze.textContent="Spindle speed:",_e=m(),Ce=g("input"),ke=m(),Me=g("span"),Me.textContent="RPM",Se=m(),Ee=g("div"),Re=g("h5"),qe=g("span"),qe.textContent="Feed rate:",Ne=m(),Oe=g("input"),Pe=m(),Te=g("span"),Te.textContent="in/min",Be=m(),We=g("div"),je=g("h5"),Le=g("span"),Le.textContent="Plunge rate:",De=m(),Ge=g("input"),Ie=m(),Fe=g("span"),Fe.textContent="in/min",Ye=m(),Xe=g("div"),Ke=g("h5"),Ze=g("span"),Ze.textContent="Plunge ramp:",Je=m(),Qe=g("input"),Ve=m(),tn=g("span"),tn.textContent="in",nn=m(),an=g("div"),ln=g("h5"),sn=g("span"),sn.textContent="Max depth/pass:",rn=m(),on=g("input"),cn=m(),un=g("span"),un.textContent="in",y(l,"data-lang",r=e[0].language),y(l,"data-fr","Parametre"),y(l,"class","svelte-zzi2f1"),y(i,"class","title"),y(f,"data-lang",b=e[0].language),y(f,"data-fr","Unités: "),y(f,"class","svelte-zzi2f1"),y(M,"type","checkbox"),y(M,"class","svelte-zzi2f1"),y(S,"class","slider units svelte-zzi2f1"),y(S,"data-lang",E=e[0].language),y(k,"class","switch svelte-zzi2f1"),y(p,"class","input-wrapper"),y(N,"data-lang",T=e[0].language),y(N,"data-fr","Nest apartir de: "),y(N,"class","svelte-zzi2f1"),y(W,"type","checkbox"),y(W,"class","svelte-zzi2f1"),y(L,"class","slider direction svelte-zzi2f1"),y(L,"data-lang",D=e[0].language),y(B,"class","switch svelte-zzi2f1"),y(q,"class","input-wrapper"),y(F,"data-lang",Y=e[0].language),y(F,"data-fr","Nest avec: "),y(F,"class","svelte-zzi2f1"),y(Z,"type","checkbox"),y(Z,"class","svelte-zzi2f1"),y(Q,"class","slider type svelte-zzi2f1"),y(Q,"data-lang",V=e[0].language),y(K,"class","switch svelte-zzi2f1"),y(I,"class","input-wrapper"),y(nt,"data-lang",it=e[0].language),y(nt,"data-fr","Nest par le: "),y(nt,"class","svelte-zzi2f1"),y(rt,"data-lang",ut=e[0].language),y(rt,"data-fr","plus large"),rt.__value="widest",rt.value=rt.__value,y(ht,"data-lang",pt=e[0].language),y(ht,"data-fr","plus haut"),ht.__value="tallest",ht.value=ht.__value,y(ft,"data-lang",wt=e[0].language),y(ft,"data-fr","plus grand"),ft.__value="biggest",ft.value=ft.__value,y(st,"class","svelte-zzi2f1"),void 0===e[0].nestOrder&&P((()=>e[4].call(st))),y(et,"class","input-wrapper"),y(xt,"data-lang",$t=e[0].language),y(xt,"data-fr","Info sur les feuilles: "),y(xt,"class","svelte-zzi2f1"),y(Mt,"class","input svelte-zzi2f1"),y(Mt,"type","number"),y(Mt,"step","0.0625"),y(_t,"data-lang",Ht=e[0].language),y(_t,"data-fr","Largeur: "),y(_t,"class","svelte-zzi2f1"),y(Nt,"class","input svelte-zzi2f1"),y(Nt,"type","number"),y(Nt,"step","0.0625"),y(Et,"data-lang",Ot=e[0].language),y(Et,"data-fr","Hauteur: "),y(Et,"class","svelte-zzi2f1"),y(Wt,"class","input svelte-zzi2f1"),y(Wt,"type","number"),y(Wt,"step","0.005"),y(Tt,"data-lang",jt=e[0].language),y(Tt,"data-fr","Épaisseur: "),y(Tt,"class","svelte-zzi2f1"),y(yt,"class","input-wrapper"),y(Ut,"class","input svelte-zzi2f1"),y(Ut,"type","number"),y(Ut,"step","0.05"),y(Gt,"data-lang",Yt=e[0].language),y(Gt,"data-fr","Marge: "),y(Gt,"class","svelte-zzi2f1"),y(Dt,"class","input-wrapper"),y(d,"class","general svelte-zzi2f1"),y(Jt,"data-lang",Vt=e[0].language),y(Jt,"data-fr","Outil pour la decoupe: "),y(Jt,"class","svelte-zzi2f1"),y(ie,"class","input svelte-zzi2f1"),y(ie,"type","number"),y(ie,"step","1"),y(ee,"data-lang",le=e[0].language),y(ee,"data-fr","Outil #: "),y(ee,"class","svelte-zzi2f1"),y(Zt,"class","input-wrapper"),y(he,"class","input svelte-zzi2f1"),y(he,"type","text"),y(oe,"data-lang",de=e[0].language),y(oe,"data-fr","Type: "),y(oe,"class","svelte-zzi2f1"),y(re,"class","input-wrapper"),y(ve,"class","input svelte-zzi2f1"),y(ve,"type","number"),y(ve,"step","0.03125"),y(fe,"data-lang",ye=e[0].language),y(fe,"data-fr","Diametre: "),y(fe,"class","svelte-zzi2f1"),y(pe,"class","input-wrapper"),y(Ce,"class","input svelte-zzi2f1"),y(Ce,"type","number"),y(Ce,"step","10"),y($e,"data-lang",He=e[0].language),y($e,"data-fr","Diametre: "),y($e,"class","svelte-zzi2f1"),y(be,"class","input-wrapper"),y(Oe,"class","input svelte-zzi2f1"),y(Oe,"type","number"),y(Oe,"step","10"),y(Re,"data-lang",Ae=e[0].language),y(Re,"data-fr","vitesse de coupe: "),y(Re,"class","svelte-zzi2f1"),y(Ee,"class","input-wrapper"),y(Ge,"class","input svelte-zzi2f1"),y(Ge,"type","number"),y(Ge,"step","10"),y(je,"data-lang",Ue=e[0].language),y(je,"data-fr","vitesse de plonge: "),y(je,"class","svelte-zzi2f1"),y(We,"class","input-wrapper"),y(Qe,"class","input svelte-zzi2f1"),y(Qe,"type","number"),y(Qe,"step","10"),y(Ke,"data-lang",en=e[0].language),y(Ke,"data-fr","Longeur de plonge: "),y(Ke,"class","svelte-zzi2f1"),y(Xe,"class","input-wrapper"),y(on,"class","input svelte-zzi2f1"),y(on,"type","number"),y(on,"step","10"),y(ln,"data-lang",hn=e[0].language),y(ln,"data-fr","Max profondeur/passe: "),y(ln,"class","svelte-zzi2f1"),y(an,"class","input-wrapper"),y(Kt,"class","cnc svelte-zzi2f1"),y(n,"class","settings svelte-zzi2f1"),C(n,"active",e[0].show)},m(t,a){u(t,n,a),c(n,i),c(i,l),c(l,s),c(n,o),c(n,d),c(d,p),c(p,f),c(f,w),c(p,z),c(p,k),c(k,M),M.checked=e[0].units,c(k,H),c(k,S),c(d,R),c(d,q),c(q,N),c(N,O),c(q,A),c(q,B),c(B,W),W.checked=e[0].nestDirectionBottom,c(B,j),c(B,L),c(d,G),c(d,I),c(I,F),c(F,U),c(I,X),c(I,K),c(K,Z),Z.checked=e[0].nestTypeColumn,c(K,J),c(K,Q),c(d,tt),c(d,et),c(et,nt),c(nt,at),c(et,lt),c(et,st),c(st,rt),c(rt,ot),c(rt,ct),c(st,ht),c(ht,dt),c(ht,gt),c(st,ft),c(ft,mt),_(st,e[0].nestOrder),c(d,vt),c(d,yt),c(yt,xt),c(xt,bt),c(yt,zt),c(yt,_t),c(_t,Ct),c(_t,kt),c(_t,Mt),$(Mt,e[0].material.width),c(yt,St),c(yt,Et),c(Et,Rt),c(Et,qt),c(Et,Nt),$(Nt,e[0].material.height),c(yt,Pt),c(yt,Tt),c(Tt,At),c(Tt,Bt),c(Tt,Wt),$(Wt,e[0].material.thickness),c(d,Lt),c(d,Dt),c(Dt,Gt),c(Gt,It),c(Gt,Ft),c(Gt,Ut),$(Ut,e[0].material.margins),c(n,Xt),c(n,Kt),c(Kt,Zt),c(Zt,Jt),c(Jt,Qt),c(Zt,te),c(Zt,ee),c(ee,ne),c(ee,ae),c(ee,ie),$(ie,e[0].tool),c(Kt,se),c(Kt,re),c(re,oe),c(oe,ce),c(oe,ue),c(oe,he),$(he,e[0].cnc[e[0].tool].type),c(Kt,ge),c(Kt,pe),c(pe,fe),c(fe,me),c(fe,we),c(fe,ve),$(ve,e[0].cnc[e[0].tool].diameter),c(Kt,xe),c(Kt,be),c(be,$e),c($e,ze),c($e,_e),c($e,Ce),$(Ce,e[0].cnc[e[0].tool].spindle),c($e,ke),c($e,Me),c(Kt,Se),c(Kt,Ee),c(Ee,Re),c(Re,qe),c(Re,Ne),c(Re,Oe),$(Oe,e[0].cnc[e[0].tool].feed),c(Re,Pe),c(Re,Te),c(Kt,Be),c(Kt,We),c(We,je),c(je,Le),c(je,De),c(je,Ge),$(Ge,e[0].cnc[e[0].tool].plunge),c(je,Ie),c(je,Fe),c(Kt,Ye),c(Kt,Xe),c(Xe,Ke),c(Ke,Ze),c(Ke,Je),c(Ke,Qe),$(Qe,e[0].cnc[e[0].tool].ramp),c(Ke,Ve),c(Ke,tn),c(Kt,nn),c(Kt,an),c(an,ln),c(ln,sn),c(ln,rn),c(ln,on),$(on,e[0].cnc[e[0].tool].max_depth),c(ln,cn),c(ln,un),dn||(gn=[v(M,"change",e[1]),v(W,"change",e[2]),v(Z,"change",e[3]),v(st,"change",e[4]),v(Mt,"input",e[5]),v(Nt,"input",e[6]),v(Wt,"input",e[7]),v(Ut,"input",e[8]),v(ie,"input",e[9]),v(he,"input",e[10]),v(ve,"input",e[11]),v(Ce,"input",e[12]),v(Oe,"input",e[13]),v(Ge,"input",e[14]),v(Qe,"input",e[15]),v(on,"input",e[16])],dn=!0)},p(t,[e]){1&e&&r!==(r=t[0].language)&&y(l,"data-lang",r),1&e&&b!==(b=t[0].language)&&y(f,"data-lang",b),1&e&&(M.checked=t[0].units),1&e&&E!==(E=t[0].language)&&y(S,"data-lang",E),1&e&&T!==(T=t[0].language)&&y(N,"data-lang",T),1&e&&(W.checked=t[0].nestDirectionBottom),1&e&&D!==(D=t[0].language)&&y(L,"data-lang",D),1&e&&Y!==(Y=t[0].language)&&y(F,"data-lang",Y),1&e&&(Z.checked=t[0].nestTypeColumn),1&e&&V!==(V=t[0].language)&&y(Q,"data-lang",V),1&e&&it!==(it=t[0].language)&&y(nt,"data-lang",it),1&e&&ut!==(ut=t[0].language)&&y(rt,"data-lang",ut),1&e&&pt!==(pt=t[0].language)&&y(ht,"data-lang",pt),1&e&&wt!==(wt=t[0].language)&&y(ft,"data-lang",wt),1&e&&_(st,t[0].nestOrder),1&e&&$t!==($t=t[0].language)&&y(xt,"data-lang",$t),1&e&&x(Mt.value)!==t[0].material.width&&$(Mt,t[0].material.width),1&e&&Ht!==(Ht=t[0].language)&&y(_t,"data-lang",Ht),1&e&&x(Nt.value)!==t[0].material.height&&$(Nt,t[0].material.height),1&e&&Ot!==(Ot=t[0].language)&&y(Et,"data-lang",Ot),1&e&&x(Wt.value)!==t[0].material.thickness&&$(Wt,t[0].material.thickness),1&e&&jt!==(jt=t[0].language)&&y(Tt,"data-lang",jt),1&e&&x(Ut.value)!==t[0].material.margins&&$(Ut,t[0].material.margins),1&e&&Yt!==(Yt=t[0].language)&&y(Gt,"data-lang",Yt),1&e&&Vt!==(Vt=t[0].language)&&y(Jt,"data-lang",Vt),1&e&&x(ie.value)!==t[0].tool&&$(ie,t[0].tool),1&e&&le!==(le=t[0].language)&&y(ee,"data-lang",le),1&e&&he.value!==t[0].cnc[t[0].tool].type&&$(he,t[0].cnc[t[0].tool].type),1&e&&de!==(de=t[0].language)&&y(oe,"data-lang",de),1&e&&x(ve.value)!==t[0].cnc[t[0].tool].diameter&&$(ve,t[0].cnc[t[0].tool].diameter),1&e&&ye!==(ye=t[0].language)&&y(fe,"data-lang",ye),1&e&&x(Ce.value)!==t[0].cnc[t[0].tool].spindle&&$(Ce,t[0].cnc[t[0].tool].spindle),1&e&&He!==(He=t[0].language)&&y($e,"data-lang",He),1&e&&x(Oe.value)!==t[0].cnc[t[0].tool].feed&&$(Oe,t[0].cnc[t[0].tool].feed),1&e&&Ae!==(Ae=t[0].language)&&y(Re,"data-lang",Ae),1&e&&x(Ge.value)!==t[0].cnc[t[0].tool].plunge&&$(Ge,t[0].cnc[t[0].tool].plunge),1&e&&Ue!==(Ue=t[0].language)&&y(je,"data-lang",Ue),1&e&&x(Qe.value)!==t[0].cnc[t[0].tool].ramp&&$(Qe,t[0].cnc[t[0].tool].ramp),1&e&&en!==(en=t[0].language)&&y(Ke,"data-lang",en),1&e&&x(on.value)!==t[0].cnc[t[0].tool].max_depth&&$(on,t[0].cnc[t[0].tool].max_depth),1&e&&hn!==(hn=t[0].language)&&y(ln,"data-lang",hn),1&e&&C(n,"active",t[0].show)},i:t,o:t,d(t){t&&h(n),dn=!1,a(gn)}}}function Jt(t,e,n){let a;return s(t,yt,(t=>n(0,a=t))),[a,function(){a.units=this.checked,yt.set(a)},function(){a.nestDirectionBottom=this.checked,yt.set(a)},function(){a.nestTypeColumn=this.checked,yt.set(a)},function(){a.nestOrder=function(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}(this),yt.set(a)},function(){a.material.width=x(this.value),yt.set(a)},function(){a.material.height=x(this.value),yt.set(a)},function(){a.material.thickness=x(this.value),yt.set(a)},function(){a.material.margins=x(this.value),yt.set(a)},function(){a.tool=x(this.value),yt.set(a)},function(){a.cnc[a.tool].type=this.value,yt.set(a)},function(){a.cnc[a.tool].diameter=x(this.value),yt.set(a)},function(){a.cnc[a.tool].spindle=x(this.value),yt.set(a)},function(){a.cnc[a.tool].feed=x(this.value),yt.set(a)},function(){a.cnc[a.tool].plunge=x(this.value),yt.set(a)},function(){a.cnc[a.tool].ramp=x(this.value),yt.set(a)},function(){a.cnc[a.tool].max_depth=x(this.value),yt.set(a)}]}class Qt extends X{constructor(t){super(),Y(this,t,Jt,Zt,l,{})}}function Vt(e){let n,i,l,s,r,o,d,p,f,w,x,b,$,z,_,C;return s=new Rt({}),o=new Lt({}),p=new Qt({}),x=new Kt({}),{c(){n=m(),i=g("div"),l=g("div"),G(s.$$.fragment),r=m(),G(o.$$.fragment),d=m(),G(p.$$.fragment),f=m(),w=g("div"),G(x.$$.fragment),b=m(),$=g("div"),$.innerHTML='<div class="splash-img svelte-1tyiqn7"></div> \n      <h1 class="svelte-1tyiqn7"><span>Holy! Nest:</span></h1> \n      <h5 class="svelte-1tyiqn7"><span>save a sheet, maybe two</span></h5>',y(l,"class","import svelte-1tyiqn7"),y($,"class","splash svelte-1tyiqn7"),y(w,"class","main"),y(i,"class","container svelte-1tyiqn7")},m(t,a){u(t,n,a),u(t,i,a),c(i,l),I(s,l,null),c(l,r),I(o,l,null),c(l,d),I(p,l,null),c(i,f),c(i,w),I(x,w,null),c(w,b),c(w,$),z=!0,_||(C=[v(document.body,"change",e[1]),v(w,"click",e[2])],_=!0)},p:t,i(t){z||(L(s.$$.fragment,t),L(o.$$.fragment,t),L(p.$$.fragment,t),L(x.$$.fragment,t),z=!0)},o(t){D(s.$$.fragment,t),D(o.$$.fragment,t),D(p.$$.fragment,t),D(x.$$.fragment,t),z=!1},d(t){t&&h(n),t&&h(i),F(s),F(o),F(p),F(x),_=!1,a(C)}}}function te(t,e,n){let a,i,l;function r(){let t=et(i.contents,5,a.nestTypeColumn,a.nestOrder,a.nestDirectionBottom,a.cnc[a.tool].diameter,a.material);o(xt,l=t[1]),o(bt,i.errors=t[2],i)}s(t,yt,(t=>n(0,a=t))),s(t,bt,(t=>n(3,i=t))),s(t,xt,(t=>n(4,l=t))),o(yt,a.language=navigator.language||navigator.userLanguage,a),H((()=>{r()}));return[a,r,()=>o(yt,a.show=!1,a)]}return new class extends X{constructor(t){super(),Y(this,t,te,Vt,l,{})}}({target:document.body})}();
//# sourceMappingURL=app.js.map
