var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function s(e){e.forEach(t)}function l(e){return"function"==typeof e}function o(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function i(t,n,s){t.$$.on_destroy.push(function(t,...n){if(null==t)return e;const s=t.subscribe(...n);return s.unsubscribe?()=>s.unsubscribe():s}(n,s))}function r(e){return null==e?"":e}function a(e,t,n=t){return e.set(n),t}function c(e,t){e.appendChild(t)}function u(e,t,n){e.insertBefore(t,n||null)}function h(e){e.parentNode.removeChild(e)}function g(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function f(e){return document.createElement(e)}function p(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function m(e){return document.createTextNode(e)}function d(){return m(" ")}function v(){return m("")}function $(e,t,n,s){return e.addEventListener(t,n,s),()=>e.removeEventListener(t,n,s)}function w(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function x(e){return""===e?void 0:+e}function y(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function _(e,t){e.value=null==t?"":t}function b(e,t,n,s){e.style.setProperty(t,n,s?"important":"")}function k(e,t){for(let n=0;n<e.options.length;n+=1){const s=e.options[n];if(s.__value===t)return void(s.selected=!0)}}function j(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}function S(e,t,n){e.classList[n?"add":"remove"](t)}let P;function C(e){P=e}function M(){if(!P)throw new Error("Function called outside component initialization");return P}function H(){const e=M();return(t,n)=>{const s=e.$$.callbacks[t];if(s){const l=function(e,t){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}(t,n);s.slice().forEach((t=>{t.call(e,l)}))}}}const E=[],N=[],O=[],R=[],T=Promise.resolve();let z=!1;function B(e){O.push(e)}function W(e){R.push(e)}let q=!1;const A=new Set;function L(){if(!q){q=!0;do{for(let e=0;e<E.length;e+=1){const t=E[e];C(t),D(t.$$)}for(E.length=0;N.length;)N.pop()();for(let e=0;e<O.length;e+=1){const t=O[e];A.has(t)||(A.add(t),t())}O.length=0}while(E.length);for(;R.length;)R.pop()();z=!1,q=!1,A.clear()}}function D(e){if(null!==e.fragment){e.update(),s(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(B)}}const G=new Set;let I;function F(){I={r:0,c:[],p:I}}function U(){I.r||s(I.c),I=I.p}function J(e,t){e&&e.i&&(G.delete(e),e.i(t))}function K(e,t,n,s){if(e&&e.o){if(G.has(e))return;G.add(e),I.c.push((()=>{G.delete(e),s&&(n&&e.d(1),s())})),e.o(t)}}function Q(e,t,n){const s=e.$$.props[t];void 0!==s&&(e.$$.bound[s]=n,n(e.$$.ctx[s]))}function V(e){e&&e.c()}function Y(e,n,o){const{fragment:i,on_mount:r,on_destroy:a,after_update:c}=e.$$;i&&i.m(n,o),B((()=>{const n=r.map(t).filter(l);a?a.push(...n):s(n),e.$$.on_mount=[]})),c.forEach(B)}function Z(e,t){const n=e.$$;null!==n.fragment&&(s(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function X(e,t){-1===e.$$.dirty[0]&&(E.push(e),z||(z=!0,T.then(L)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function ee(t,l,o,i,r,a,c=[-1]){const u=P;C(t);const g=l.props||{},f=t.$$={fragment:null,ctx:null,props:a,update:e,not_equal:r,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:[]),callbacks:n(),dirty:c,skip_bound:!1};let p=!1;if(f.ctx=o?o(t,g,((e,n,...s)=>{const l=s.length?s[0]:n;return f.ctx&&r(f.ctx[e],f.ctx[e]=l)&&(!f.skip_bound&&f.bound[e]&&f.bound[e](l),p&&X(t,e)),n})):[],f.update(),p=!0,s(f.before_update),f.fragment=!!i&&i(f.ctx),l.target){if(l.hydrate){const e=function(e){return Array.from(e.childNodes)}(l.target);f.fragment&&f.fragment.l(e),e.forEach(h)}else f.fragment&&f.fragment.c();l.intro&&J(t.$$.fragment),Y(t,l.target,l.anchor),L()}C(u)}class te{$destroy(){Z(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const ne=[];function se(t,n=e){let s;const l=[];function i(e){if(o(t,e)&&(t=e,s)){const e=!ne.length;for(let e=0;e<l.length;e+=1){const n=l[e];n[1](),ne.push(n,t)}if(e){for(let e=0;e<ne.length;e+=2)ne[e][0](ne[e+1]);ne.length=0}}}return{set:i,update:function(e){i(e(t))},subscribe:function(o,r=e){const a=[o,r];return l.push(a),1===l.length&&(s=n(i)||e),o(t),()=>{const e=l.indexOf(a);-1!==e&&l.splice(e,1),0===l.length&&(s(),s=null)}}}}const le={BETA2:"< update key to update settings",language:"fr"===(navigator.language.slice(0,2)||navigator.userLanguage.slice(0,2)).slice(0,2)?"fr":"en",material:{width:49,height:97,thickness:.75,margins:.3},nestTypeColumn:!1,nestOrder:"widest",nestDirectionBottom:!0,units:!1,tools:{profile:"9",engraver:"3",tool:"9"},cnc:{1:{type:"End mill",diameter:.1875,mm:!1,spindle:12e3,feed:150,plunge:100,ramp:1,max_depth:.875,pass_depth:.125,step_over:.125},2:{type:"End mill",diameter:.75,mm:!1,spindle:15e3,feed:200,plunge:75,ramp:5,max_depth:3,pass_depth:.25,step_over:.625},3:{type:"Ball-nose",diameter:.125,mm:!1,spindle:12e3,feed:50,plunge:50,ramp:1,max_depth:.75,pass_depth:.0625,step_over:.0625},4:{type:"Edge Finisher",diameter:.75,mm:!1,spindle:2e4,feed:75,plunge:30,ramp:4,max_depth:2.25,pass_depth:2.25,step_over:.05},5:{type:"Drill",diameter:5,mm:!0,spindle:8500,feed:0,plunge:75,ramp:0,max_depth:1,pass_depth:1,step_over:0},6:{type:"End mill",diameter:.25,mm:!1,spindle:18e3,feed:150,plunge:40,ramp:1,max_depth:1,pass_depth:.25,step_over:.2},7:{type:"Drill",diameter:8,mm:!0,spindle:8500,feed:0,plunge:75,ramp:0,max_depth:1,pass_depth:1,step_over:0},8:{type:"Surfacing",diameter:32,mm:!0,spindle:12e3,feed:200,plunge:30,ramp:5,max_depth:1,pass_depth:.125,step_over:0},9:{type:"End mill",diameter:.375,mm:!1,spindle:18e3,feed:400,plunge:70,ramp:1,max_depth:.875,pass_depth:.875,step_over:.3},10:{type:"End mill",diameter:.5,mm:!1,spindle:18e3,feed:400,plunge:70,ramp:1,max_depth:.875,pass_depth:.875,step_over:.4},11:{type:"Drill",diameter:10,mm:!0,spindle:18e3,feed:0,plunge:75,ramp:0,max_depth:1,pass_depth:1,step_over:0},12:{type:"V-groove",diameter:1.5,mm:!1,spindle:12e3,feed:75,plunge:30,ramp:1,max_depth:.75,pass_depth:.25,step_over:.125}},subsettings:{show:!1,project:!0,profile:!1,engraver:!1,library:!1,sheet:!1,nest:!0},activePanel:""},oe={en:[["Project","New","Material","Plywood","Project Info","doors"],["Borders","Top","Right","Bottom","Left"],[0,0,0,0,0],["Metric?",!1],["Panel","Quantity","Width","Height"],[1,0,0,0]],fr:[["Projét","Nouveau","Matèriaux","Plaquage","Modèle Portes",""],["Borders","haut","droit","bas","gauche"],[0,0,0,0,0],["Metric?",!1],["Panneaux","Quantité","Largeur","Hauteur"],[1,0,0,0]]},ie={name:"",sheets:[],errors:[],tools:{engraver:{tool:3,engrave:!1,cut_depth:.005,xStart:1,yStart:1,size:.3,spacing:.1,direction:"ltr"},profile:{tool:9,cut_depth:.75,link:.02,min_size:12}},csv:{new:[...oe[le.language]],contents:[...oe[le.language]],panels:[],headerRows:5,output:""},svg:"",cnc:""},re=((e,t)=>{const n=e=>JSON.stringify(e,null,2);function s(){return JSON.parse(localStorage.getItem(e))}var l,o;localStorage.getItem(e)||localStorage.setItem(e,n(t)),l=s(),o=t,Object.keys(l).join()!==Object.keys(o).join()&&(console.log(s(),t),localStorage.setItem(e,n(t)));const{subscribe:i,set:r,update:a}=se(s());return{subscribe:i,set:t=>(localStorage.setItem(e,n(t)),r(t)),update:a}})("settings",le),ae=((e,t)=>{const n=e=>JSON.stringify(e,null,2);sessionStorage.getItem(e)||sessionStorage.setItem(e,n(t));const{subscribe:s,set:l,update:o}=se(JSON.parse(sessionStorage.getItem(e)));return{subscribe:s,set:t=>(sessionStorage.setItem(e,n(t)),l(t)),update:o}})("data",ie);function ce(e){return isNaN(e)?e.includes("/")&&!e.includes(".")?e.split(" ").filter((e=>""!==e)).reduce(((e,t)=>{if(t.includes("/")){let n=t.split("/").filter((e=>""!==e));return e+he(n[0]/n[1])}return e+he(t)}),0):e:he(e)}function ue(e,t){return Math.round(parseFloat(e)*10**t)/10**t}function he(e,t=5){return ue(e,t)}function ge(e){return he(25.4*e,3)}function fe(e){return he(e/25.4)}function pe(e,t){const n=e=>("0"+e).slice(-2),s={mm:n(e.getMonth()+1),dd:n(e.getDate()),yy:e.getFullYear().toString().slice(-2),yyyy:e.getFullYear(),HH:n(e.getHours()),MM:n(e.getMinutes()),SS:n(e.getSeconds()),T:"T",h:"h"};return t.replace(/mm|dd|yyyy|yy|HH|MM|SS/gi,(e=>s[e]))}function me(t){let n,s,l,o,i,r=(t[3].language.includes("fr")?t[1]:t[0])+"";return{c(){n=f("div"),s=f("div"),l=d(),o=f("div"),i=m(r),w(s,"class","pointer svelte-1pkt9tg"),w(o,"class","tip svelte-1pkt9tg"),w(n,"class","tooltip svelte-1pkt9tg"),S(n,"under",t[2])},m(e,t){u(e,n,t),c(n,s),c(n,l),c(n,o),c(o,i)},p(e,[t]){11&t&&r!==(r=(e[3].language.includes("fr")?e[1]:e[0])+"")&&y(i,r),4&t&&S(n,"under",e[2])},i:e,o:e,d(e){e&&h(n)}}}function de(e,t,n){let s;i(e,re,(e=>n(3,s=e)));let{english:l=""}=t,{french:o=""}=t,{under:r=!1}=t;return e.$$set=e=>{"english"in e&&n(0,l=e.english),"french"in e&&n(1,o=e.french),"under"in e&&n(2,r=e.under)},[l,o,r,s]}class ve extends te{constructor(e){super(),ee(this,e,de,me,o,{english:0,french:1,under:2})}}function $e(t){let n,s,l,o,i;return{c(){n=f("div"),s=d(),l=f("div"),o=d(),i=f("div"),w(n,"class","file-icon dl-csv-block blocked svelte-1k162vj"),w(l,"class","file-icon dl-svg-block blocked svelte-1k162vj"),w(i,"class","file-icon dl-cnc-block blocked svelte-1k162vj")},m(e,t){u(e,n,t),u(e,s,t),u(e,l,t),u(e,o,t),u(e,i,t)},p:e,i:e,o:e,d(e){e&&h(n),e&&h(s),e&&h(l),e&&h(o),e&&h(i)}}}function we(e){let t,n,s,l,o,i,r,a,c,g,p,m,v,$,x;return n=new ve({props:{french:"téléchargez le fichier .csv  (alt + v)",english:"download .csv file (alt + v)"}}),r=new ve({props:{french:"telechargez le fichier .svg (alt + g)",english:"download .svg file (alt + g)"}}),m=new ve({props:{french:"ntelechargez le fichier .cnc (alt + c)",english:"download .cnc file (alt + c)"}}),{c(){t=f("a"),V(n.$$.fragment),o=d(),i=f("a"),V(r.$$.fragment),g=d(),p=f("a"),V(m.$$.fragment),w(t,"href",s="data:text/plain;charset=utf-8,"+encodeURIComponent(e[5].csv.output)),w(t,"download",l=e[5].name+e[6]()+".csv"),w(t,"role","button"),w(t,"class","file-icon dl-csv svelte-1k162vj"),w(i,"href",a="data:text/plain;charset=utf-8,"+encodeURIComponent(e[5].svg)),w(i,"download",c=e[5].name+e[6]()+".svg"),w(i,"alt","download svg file"),w(i,"role","button"),w(i,"class","file-icon dl-svg svelte-1k162vj"),w(p,"href",v="data:text/plain;charset=utf-8,"+encodeURIComponent(e[5].cnc)),w(p,"download",$=e[5].name+e[6]()+".cnc"),w(p,"role","button"),w(p,"class","file-icon dl-cnc svelte-1k162vj")},m(s,l){u(s,t,l),Y(n,t,null),e[13](t),u(s,o,l),u(s,i,l),Y(r,i,null),e[14](i),u(s,g,l),u(s,p,l),Y(m,p,null),e[15](p),x=!0},p(e,n){(!x||32&n&&s!==(s="data:text/plain;charset=utf-8,"+encodeURIComponent(e[5].csv.output)))&&w(t,"href",s),(!x||32&n&&l!==(l=e[5].name+e[6]()+".csv"))&&w(t,"download",l),(!x||32&n&&a!==(a="data:text/plain;charset=utf-8,"+encodeURIComponent(e[5].svg)))&&w(i,"href",a),(!x||32&n&&c!==(c=e[5].name+e[6]()+".svg"))&&w(i,"download",c),(!x||32&n&&v!==(v="data:text/plain;charset=utf-8,"+encodeURIComponent(e[5].cnc)))&&w(p,"href",v),(!x||32&n&&$!==($=e[5].name+e[6]()+".cnc"))&&w(p,"download",$)},i(e){x||(J(n.$$.fragment,e),J(r.$$.fragment,e),J(m.$$.fragment,e),x=!0)},o(e){K(n.$$.fragment,e),K(r.$$.fragment,e),K(m.$$.fragment,e),x=!1},d(s){s&&h(t),Z(n),e[13](null),s&&h(o),s&&h(i),Z(r),e[14](null),s&&h(g),s&&h(p),Z(m),e[15](null)}}}function xe(e){let t,n,l,o,i,r,a,g,p,m,v,x,y,_,b,k,j;document.title=t="Ahhh Nest: "+e[5].csv.contents[0][1]||"Ahhh! Nest",a=new ve({props:{french:"ouvrir fichier .csv (alt + o)",english:"open .csv file (alt + o)"}}),v=new ve({props:{french:"nouveau fichier (alt + n)",english:"new file (alt + n)"}});const S=[we,$e],P=[];function C(e,t){return e[5].sheets.length?0:1}return y=C(e),_=P[y]=S[y](e),{c(){n=d(),l=f("div"),o=f("input"),i=d(),r=f("label"),V(a.$$.fragment),p=d(),m=f("div"),V(v.$$.fragment),x=d(),_.c(),w(o,"class","inputfile svelte-1k162vj"),w(o,"name","file"),w(o,"id","file"),w(o,"type","file"),w(r,"for","file"),w(r,"class",g="file-icon "+(e[0]?"badfile":"upload")+" svelte-1k162vj"),w(m,"tabindex","0"),w(m,"role","button"),w(m,"class","file-icon new svelte-1k162vj"),w(l,"class","file-mgmt svelte-1k162vj")},m(t,s){u(t,n,s),u(t,l,s),c(l,o),e[11](o),c(l,i),c(l,r),Y(a,r,null),c(l,p),c(l,m),Y(v,m,null),c(l,x),P[y].m(l,null),b=!0,k||(j=[$(window,"keydown",e[7]),$(window,"keyup",e[8]),$(o,"change",e[10]),$(r,"mouseover",e[12]),$(m,"click",e[9])],k=!0)},p(e,[n]){(!b||32&n)&&t!==(t="Ahhh Nest: "+e[5].csv.contents[0][1]||"Ahhh! Nest")&&(document.title=t),(!b||1&n&&g!==(g="file-icon "+(e[0]?"badfile":"upload")+" svelte-1k162vj"))&&w(r,"class",g);let s=y;y=C(e),y===s?P[y].p(e,n):(F(),K(P[s],1,1,(()=>{P[s]=null})),U(),_=P[y],_||(_=P[y]=S[y](e),_.c()),J(_,1),_.m(l,null))},i(e){b||(J(a.$$.fragment,e),J(v.$$.fragment,e),J(_),b=!0)},o(e){K(a.$$.fragment,e),K(v.$$.fragment,e),K(_),b=!1},d(t){t&&h(n),t&&h(l),e[11](null),Z(a),Z(v),P[y].d(),k=!1,s(j)}}}function ye(e,t,n){let s,l;i(e,re,(e=>n(17,s=e))),i(e,ae,(e=>n(5,l=e)));const o=H();let r,c,u,h,g=!1,f={};function p(){a(re,s.units=JSON.parse(l.csv.contents[3][1]),s),o("update")}function m(){a(ae,l.csv.contents=[...l.csv.new],l),p(),o("name")}return[g,r,c,u,h,l,()=>pe(new Date,"-HHhMM"),function(e){f[e.code]=!0;const t=e=>(f.AltLeft||f.AltRight)&&f[e];t("KeyO")&&setTimeout((()=>file.click()),140),t("KeyN")&&m(),t("KeyV")&&r.click(),t("KeyG")&&c.click(),t("KeyC")&&u.click(),t("KeyP")&&a(re,s.subsettings.show=!s.subsettings.show,s)},function(e){delete f[e.code]},m,function(){if(h.files[0]){if(h.files[0].name.includes(".csv")){let e=new FileReader;e.readAsText(h.files[0]),e.onload=function(e){a(ae,l.csv.contents=function(e,t=1,n=","){for(var s=new RegExp("(\\"+n+'|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\'+n+"\\r\\n]*))","gi"),l=[[]],o=null;o=s.exec(e);){var i=o[1];if(i.length&&i!=n&&l.push([]),o[2])var r=o[2].replace(new RegExp('""',"g"),'"');else r=o[3];/\d/.test(r)&&(r=ce(r)),l[l.length-1].push(r)}return l.filter(((e,n)=>n<t||e.filter((e=>""!==e)).length))}(e.target.result,l.csv.headerRows),l),n(0,g=!1),p()}}n(0,g=!0)}},function(e){N[e?"unshift":"push"]((()=>{h=e,n(4,h)}))},()=>n(0,g=!1),function(e){N[e?"unshift":"push"]((()=>{r=e,n(1,r)}))},function(e){N[e?"unshift":"push"]((()=>{c=e,n(2,c)}))},function(e){N[e?"unshift":"push"]((()=>{u=e,n(3,u)}))}]}class _e extends te{constructor(e){super(),ee(this,e,ye,xe,o,{})}}function be(t){let n,l,o,i,r,a,g=(t[3].language.includes("fr")?t[2]:t[1])+"";return{c(){n=f("h5"),l=m(g),o=m(":\n  "),i=f("input"),w(i,"type","text"),w(i,"class","svelte-1k7s5l6"),w(n,"class","svelte-1k7s5l6")},m(e,s){u(e,n,s),c(n,l),c(n,o),c(n,i),_(i,t[0]),r||(a=[$(i,"click",ke),$(i,"input",t[4])],r=!0)},p(e,[t]){14&t&&g!==(g=(e[3].language.includes("fr")?e[2]:e[1])+"")&&y(l,g),1&t&&i.value!==e[0]&&_(i,e[0])},i:e,o:e,d(e){e&&h(n),r=!1,s(a)}}}function ke(){this.select()}function je(e,t,n){let s;i(e,re,(e=>n(3,s=e)));let{value:l}=t,{english:o=""}=t,{french:r=""}=t;return e.$$set=e=>{"value"in e&&n(0,l=e.value),"english"in e&&n(1,o=e.english),"french"in e&&n(2,r=e.french)},[l,o,r,s,function(){l=this.value,n(0,l)}]}class Se extends te{constructor(e){super(),ee(this,e,je,be,o,{value:0,english:1,french:2})}}function Pe(t){let n,l,o,i,r,a,g,p,v,x,_,b=(t[6].language.includes("fr")?t[5]:t[4])+"";return{c(){n=f("h5"),l=m(b),o=m(t[3]),i=d(),r=f("label"),a=f("input"),g=d(),p=f("div"),w(a,"type","checkbox"),w(a,"class","svelte-13h5iuk"),w(p,"class","slider svelte-13h5iuk"),w(p,"data-content",v=t[0]?t[1]:t[2]),w(r,"class","switch svelte-13h5iuk"),w(n,"class","svelte-13h5iuk")},m(e,s){u(e,n,s),c(n,l),c(n,o),c(n,i),c(n,r),c(r,a),a.checked=t[0],c(r,g),c(r,p),x||(_=[$(a,"click",t[7]),$(a,"change",t[8])],x=!0)},p(e,[t]){112&t&&b!==(b=(e[6].language.includes("fr")?e[5]:e[4])+"")&&y(l,b),8&t&&y(o,e[3]),1&t&&(a.checked=e[0]),7&t&&v!==(v=e[0]?e[1]:e[2])&&w(p,"data-content",v)},i:e,o:e,d(e){e&&h(n),x=!1,s(_)}}}function Ce(e,t,n){let s;i(e,re,(e=>n(6,s=e)));const l=H();let{checked:o}=t,{on:r}=t,{off:a}=t,{separator:c=":"}=t,{english:u=""}=t,{french:h=""}=t;return e.$$set=e=>{"checked"in e&&n(0,o=e.checked),"on"in e&&n(1,r=e.on),"off"in e&&n(2,a=e.off),"separator"in e&&n(3,c=e.separator),"english"in e&&n(4,u=e.english),"french"in e&&n(5,h=e.french)},[o,r,a,c,u,h,s,function(){l("toggle")},function(){o=this.checked,n(0,o)}]}class Me extends te{constructor(e){super(),ee(this,e,Ce,Pe,o,{checked:0,on:1,off:2,separator:3,english:4,french:5})}}function He(t){let n,l,o,i,r,a,g,p,v,x,_,b=(t[4].language.includes("fr")?t[2]:t[1])+"",k=t[0]?"⩓":"⩔";return{c(){n=f("div"),l=f("h3"),o=f("span"),i=m(t[3]),r=d(),a=m(b),g=d(),p=f("span"),v=m(k),w(o,"class","svelte-l11dgs"),w(l,"class","svelte-l11dgs"),w(p,"class","end svelte-l11dgs"),w(n,"class","drop svelte-l11dgs"),S(n,"open",t[0])},m(e,s){u(e,n,s),c(n,l),c(l,o),c(o,i),c(l,r),c(l,a),c(n,g),c(n,p),c(p,v),x||(_=[$(n,"click",t[5]),$(n,"focus",t[6])],x=!0)},p(e,[t]){8&t&&y(i,e[3]),22&t&&b!==(b=(e[4].language.includes("fr")?e[2]:e[1])+"")&&y(a,b),1&t&&k!==(k=e[0]?"⩓":"⩔")&&y(v,k),1&t&&S(n,"open",e[0])},i:e,o:e,d(e){e&&h(n),x=!1,s(_)}}}function Ee(e,t,n){let s;i(e,re,(e=>n(4,s=e)));const l=H();let{open:o}=t,{english:r=""}=t,{french:a=""}=t,{icon:c=""}=t;return e.$$set=e=>{"open"in e&&n(0,o=e.open),"english"in e&&n(1,r=e.english),"french"in e&&n(2,a=e.french),"icon"in e&&n(3,c=e.icon)},[o,r,a,c,s,function(){l("toggle")},function(){l("focused")}]}class Ne extends te{constructor(e){super(),ee(this,e,Ee,He,o,{open:0,english:1,french:2,icon:3})}}function Oe(e,t,n){const s=e.slice();return s[19]=t[n],s[20]=t,s[21]=n,s}function Re(e,t,n){const s=e.slice();return s[22]=t[n],s}function Te(e){let t,n,s,l,o,i,r=e[1].errors.length>1?"S":"",a=e[1].errors,p=[];for(let t=0;t<a.length;t+=1)p[t]=ze(Re(e,a,t));return{c(){t=f("h5"),n=m("ERROR"),s=m(r),l=m(":"),o=d();for(let e=0;e<p.length;e+=1)p[e].c();i=v(),w(t,"class","error svelte-jpjmaq")},m(e,r){u(e,t,r),c(t,n),c(t,s),c(t,l),u(e,o,r);for(let t=0;t<p.length;t+=1)p[t].m(e,r);u(e,i,r)},p(e,t){if(2&t&&r!==(r=e[1].errors.length>1?"S":"")&&y(s,r),2&t){let n;for(a=e[1].errors,n=0;n<a.length;n+=1){const s=Re(e,a,n);p[n]?p[n].p(s,t):(p[n]=ze(s),p[n].c(),p[n].m(i.parentNode,i))}for(;n<p.length;n+=1)p[n].d(1);p.length=a.length}},d(e){e&&h(t),e&&h(o),g(p,e),e&&h(i)}}}function ze(e){let t,n,s=e[22]+"";return{c(){t=f("p"),n=m(s),w(t,"class","svelte-jpjmaq")},m(e,s){u(e,t,s),c(t,n)},p(e,t){2&t&&s!==(s=e[22]+"")&&y(n,s)},d(e){e&&h(t)}}}function Be(e){let t,n,l,o,i,a,g,p,m,v,y,b,k,j,S,P,C,M,H,E,N,O,R,T,z,B,W,q;function A(){e[11].call(l,e[20],e[21])}function L(){e[12].call(p,e[20],e[21])}function D(){e[13].call(k,e[20],e[21])}function G(){e[14].call(E,e[20],e[21])}function I(...t){return e[15](e[19],...t)}return i=new ve({props:{under:!0,french:"Nom de panneau",english:"Panel Name"}}),v=new ve({props:{under:!0,french:"Quantité",english:"Quantity"}}),C=new ve({props:{under:!0,french:"Largeur ("+(e[0]?"mm":"po")+")",english:"Width ("+(e[0]?"mm":"in")+")"}}),T=new ve({props:{under:!0,french:"Hauteur ("+(e[0]?"mm":"po")+")",english:"Height ("+(e[0]?"mm":"in")+")"}}),{c(){t=f("ul"),n=f("li"),l=f("input"),o=d(),V(i.$$.fragment),a=d(),g=f("li"),p=f("input"),m=d(),V(v.$$.fragment),y=d(),b=f("li"),k=f("input"),P=d(),V(C.$$.fragment),M=d(),H=f("li"),E=f("input"),R=d(),V(T.$$.fragment),w(l,"type","text"),w(l,"class","svelte-jpjmaq"),w(n,"class","svelte-jpjmaq"),w(p,"type","number"),w(p,"min","0"),w(p,"max","100"),w(p,"class","svelte-jpjmaq"),w(g,"class","svelte-jpjmaq"),w(k,"type","number"),w(k,"min","0"),w(k,"max",j=e[2]("width")),w(k,"step",S=e[0]?.25:.03125),w(k,"class","svelte-jpjmaq"),w(b,"class","svelte-jpjmaq"),w(E,"type","number"),w(E,"min","0"),w(E,"max",N=e[2]("height")),w(E,"step",O=e[0]?.25:.03125),w(E,"class","svelte-jpjmaq"),w(H,"class","svelte-jpjmaq"),w(t,"class",z=r(e[3].activePanel==e[19][0]?"active":"")+" svelte-jpjmaq")},m(s,r){u(s,t,r),c(t,n),c(n,l),_(l,e[19][0]),c(n,o),Y(i,n,null),c(t,a),c(t,g),c(g,p),_(p,e[19][1]),c(g,m),Y(v,g,null),c(t,y),c(t,b),c(b,k),_(k,e[19][2]),c(b,P),Y(C,b,null),c(t,M),c(t,H),c(H,E),_(E,e[19][3]),c(H,R),Y(T,H,null),B=!0,W||(q=[$(l,"input",A),$(l,"focus",qe),$(p,"input",L),$(p,"focus",qe),$(k,"input",D),$(k,"focus",qe),$(E,"input",G),$(E,"focus",qe),$(t,"mouseenter",I),$(t,"mouseleave",e[16])],W=!0)},p(n,s){e=n,2&s&&l.value!==e[19][0]&&_(l,e[19][0]),2&s&&x(p.value)!==e[19][1]&&_(p,e[19][1]),(!B||4&s&&j!==(j=e[2]("width")))&&w(k,"max",j),(!B||1&s&&S!==(S=e[0]?.25:.03125))&&w(k,"step",S),2&s&&x(k.value)!==e[19][2]&&_(k,e[19][2]);const o={};1&s&&(o.french="Largeur ("+(e[0]?"mm":"po")+")"),1&s&&(o.english="Width ("+(e[0]?"mm":"in")+")"),C.$set(o),(!B||4&s&&N!==(N=e[2]("height")))&&w(E,"max",N),(!B||1&s&&O!==(O=e[0]?.25:.03125))&&w(E,"step",O),2&s&&x(E.value)!==e[19][3]&&_(E,e[19][3]);const i={};1&s&&(i.french="Hauteur ("+(e[0]?"mm":"po")+")"),1&s&&(i.english="Height ("+(e[0]?"mm":"in")+")"),T.$set(i),(!B||10&s&&z!==(z=r(e[3].activePanel==e[19][0]?"active":"")+" svelte-jpjmaq"))&&w(t,"class",z)},i(e){B||(J(i.$$.fragment,e),J(v.$$.fragment,e),J(C.$$.fragment,e),J(T.$$.fragment,e),B=!0)},o(e){K(i.$$.fragment,e),K(v.$$.fragment,e),K(C.$$.fragment,e),K(T.$$.fragment,e),B=!1},d(e){e&&h(t),Z(i),Z(v),Z(C),Z(T),W=!1,s(q)}}}function We(e){let t,n,l,o,i,r,a,p,v,x,y,_,b,k,j,S,P,C,M,H,E,N,O,R,T,z,B,W,q,A=e[1].errors.length&&Te(e);p=new ve({props:{under:!0,french:"Nom de panneau",english:"Panel Name"}}),b=new ve({props:{under:!0,french:"Quantité",english:"Quantity"}}),C=new ve({props:{under:!0,french:"Largeur ("+(e[0]?"mm":"po")+")",english:"Width ("+(e[0]?"mm":"in")+")"}}),O=new ve({props:{under:!0,french:"Hauteur ("+(e[0]?"mm":"po")+")",english:"Height ("+(e[0]?"mm":"in")+")"}});let L=e[1].csv.panels,D=[];for(let t=0;t<L.length;t+=1)D[t]=Be(Oe(e,L,t));const G=e=>K(D[e],1,1,(()=>{D[e]=null}));return{c(){t=f("div"),n=f("div"),A&&A.c(),l=d(),o=f("ul"),i=f("li"),r=f("h1"),a=m("⊛\n          "),V(p.$$.fragment),v=d(),x=f("li"),y=f("h1"),_=m("⧉\n          "),V(b.$$.fragment),k=d(),j=f("li"),S=f("h1"),P=m("⍈\n          "),V(C.$$.fragment),M=d(),H=f("li"),E=f("h1"),N=m("⍗\n          "),V(O.$$.fragment),R=d();for(let e=0;e<D.length;e+=1)D[e].c();T=d(),z=f("ul"),z.textContent="+",w(i,"class","svelte-jpjmaq"),w(x,"class","svelte-jpjmaq"),w(j,"class","svelte-jpjmaq"),w(H,"class","svelte-jpjmaq"),w(o,"class","header svelte-jpjmaq"),w(z,"class","new-row svelte-jpjmaq"),w(z,"role","button"),w(n,"class","svelte-jpjmaq"),w(t,"class","wrapper svelte-jpjmaq")},m(s,h){u(s,t,h),c(t,n),A&&A.m(n,null),c(n,l),c(n,o),c(o,i),c(i,r),c(r,a),Y(p,r,null),c(o,v),c(o,x),c(x,y),c(y,_),Y(b,y,null),c(o,k),c(o,j),c(j,S),c(S,P),Y(C,S,null),c(o,M),c(o,H),c(H,E),c(E,N),Y(O,E,null),c(n,R);for(let e=0;e<D.length;e+=1)D[e].m(n,null);c(n,T),c(n,z),B=!0,W||(q=[$(i,"click",e[7]),$(x,"click",e[8]),$(j,"click",e[9]),$(H,"click",e[10]),$(z,"click",e[4])],W=!0)},p(e,[t]){e[1].errors.length?A?A.p(e,t):(A=Te(e),A.c(),A.m(n,l)):A&&(A.d(1),A=null);const s={};1&t&&(s.french="Largeur ("+(e[0]?"mm":"po")+")"),1&t&&(s.english="Width ("+(e[0]?"mm":"in")+")"),C.$set(s);const o={};if(1&t&&(o.french="Hauteur ("+(e[0]?"mm":"po")+")"),1&t&&(o.english="Height ("+(e[0]?"mm":"in")+")"),O.$set(o),15&t){let s;for(L=e[1].csv.panels,s=0;s<L.length;s+=1){const l=Oe(e,L,s);D[s]?(D[s].p(l,t),J(D[s],1)):(D[s]=Be(l),D[s].c(),J(D[s],1),D[s].m(n,T))}for(F(),s=L.length;s<D.length;s+=1)G(s);U()}},i(e){if(!B){J(p.$$.fragment,e),J(b.$$.fragment,e),J(C.$$.fragment,e),J(O.$$.fragment,e);for(let e=0;e<L.length;e+=1)J(D[e]);B=!0}},o(e){K(p.$$.fragment,e),K(b.$$.fragment,e),K(C.$$.fragment,e),K(O.$$.fragment,e),D=D.filter(Boolean);for(let e=0;e<D.length;e+=1)K(D[e]);B=!1},d(e){e&&h(t),A&&A.d(),Z(p),Z(b),Z(C),Z(O),g(D,e),W=!1,s(q)}}}function qe(){this.select()}function Ae(e,t,n){let s,l;i(e,ae,(e=>n(1,s=e))),i(e,re,(e=>n(3,l=e)));const o=H();function r(e){a(ae,s.csv.panels=s.csv.panels.sort(((t,n)=>t[e]-n[e])),s)}function c(e){a(ae,s.csv.panels=s.csv.panels.sort(((t,n)=>n[e]-t[e])),s)}let u,h;return e.$$.update=()=>{2&e.$$.dirty&&n(0,u=JSON.parse(s.csv.contents[3][1])),9&e.$$.dirty&&n(2,h=e=>{let t=l.material[e]-2*l.material.margins;return u?ge(t):t})},[u,s,h,l,function(){let e=[s.csv.panels.length+1,0,0,0];a(ae,s.csv.contents=[...s.csv.contents,e],s),o("update")},r,c,()=>r(0),()=>c(1),()=>c(2),()=>c(3),function(e,t){e[t][0]=this.value},function(e,t){e[t][1]=x(this.value)},function(e,t){e[t][2]=x(this.value)},function(e,t){e[t][3]=x(this.value)},e=>a(re,l.activePanel=e[0],l),()=>a(re,l.activePanel="",l)]}class Le extends te{constructor(e){super(),ee(this,e,Ae,We,o,{})}}function De(e,t,n){const s=e.slice();return s[18]=t[n],s}function Ge(e,t,n){const s=e.slice();return s[15]=t[n],s[17]=n,s}function Ie(e){let t,n,s,l,o,i,r,a,g,p,v,$,x,_,k,j,S,P,C,M,H=e[5].sheets[e[0]].id+"",E=ue(e[5].sheets[e[0]].area/144,2)+"",N=ue(e[5].sheets[e[0]].waste_area/144,2)+"",O=ue(100*e[5].sheets[e[0]].waste_ratio,2)+"";return{c(){t=f("div"),n=f("h4"),s=m(H),l=d(),o=f("p"),i=m("area des panneaux:\n      "),r=m(E),a=m("\n      pi"),g=f("sup"),g.textContent="2",p=d(),v=f("p"),$=m("area de perte:\n      "),x=m(N),_=m("\n      pi"),k=f("sup"),k.textContent="2",j=d(),S=f("p"),P=m("% de perte: "),C=m(O),M=m("%"),w(g,"class","svelte-98uac4"),w(k,"class","svelte-98uac4"),w(t,"class","infocard svelte-98uac4"),b(t,"left",e[3]+"px"),b(t,"top",e[2]+"px")},m(e,h){u(e,t,h),c(t,n),c(n,s),c(t,l),c(t,o),c(o,i),c(o,r),c(o,a),c(o,g),c(t,p),c(t,v),c(v,$),c(v,x),c(v,_),c(v,k),c(t,j),c(t,S),c(S,P),c(S,C),c(S,M)},p(e,n){33&n&&H!==(H=e[5].sheets[e[0]].id+"")&&y(s,H),33&n&&E!==(E=ue(e[5].sheets[e[0]].area/144,2)+"")&&y(r,E),33&n&&N!==(N=ue(e[5].sheets[e[0]].waste_area/144,2)+"")&&y(x,N),33&n&&O!==(O=ue(100*e[5].sheets[e[0]].waste_ratio,2)+"")&&y(C,O),8&n&&b(t,"left",e[3]+"px"),4&n&&b(t,"top",e[2]+"px")},d(e){e&&h(t)}}}function Fe(e){let t,n,l,o,i,r,a,g,f,d,v,x,_,k,j=e[18].id+"";return{c(){t=p("rect"),g=p("text"),f=m(j),b(t,"stroke-width",e[6].cnc[e[6].tools.profile].diameter*e[7]+"px"),w(t,"class",n="panel "+(e[6].activePanel==e[18].id?"active":"")+" print svelte-98uac4"),w(t,"id",l=e[18].id),w(t,"x",o=(e[18].x+e[13](e[17]).x)*e[7]),w(t,"y",i=(e[12](e[18].y,e[18].height)+e[13](e[17]).y)*e[7]),w(t,"width",r=e[18].width*e[7]),w(t,"height",a=e[18].height*e[7]),b(g,"font-size",e[7]*(e[18].id.length>6?Math.min(.4*e[18].height,2.5):Math.min(.8*e[18].height,5))+"px"),w(g,"class",d="id "+(e[6].activePanel==e[18].id?"active":"")+" print svelte-98uac4"),w(g,"x",v=(e[18].x+e[13](e[17]).x+e[18].width/2)*e[7]),w(g,"y",x=(e[12](e[18].y,e[18].height)+e[13](e[17]).y+Math.min(.8*e[18].height,5)/3+e[18].height/2)*e[7])},m(n,s){u(n,t,s),u(n,g,s),c(g,f),_||(k=[$(t,"mouseover",e[8]),$(t,"mouseleave",e[9])],_=!0)},p(e,s){64&s&&b(t,"stroke-width",e[6].cnc[e[6].tools.profile].diameter*e[7]+"px"),96&s&&n!==(n="panel "+(e[6].activePanel==e[18].id?"active":"")+" print svelte-98uac4")&&w(t,"class",n),32&s&&l!==(l=e[18].id)&&w(t,"id",l),32&s&&o!==(o=(e[18].x+e[13](e[17]).x)*e[7])&&w(t,"x",o),32&s&&i!==(i=(e[12](e[18].y,e[18].height)+e[13](e[17]).y)*e[7])&&w(t,"y",i),32&s&&r!==(r=e[18].width*e[7])&&w(t,"width",r),32&s&&a!==(a=e[18].height*e[7])&&w(t,"height",a),32&s&&j!==(j=e[18].id+"")&&y(f,j),32&s&&b(g,"font-size",e[7]*(e[18].id.length>6?Math.min(.4*e[18].height,2.5):Math.min(.8*e[18].height,5))+"px"),96&s&&d!==(d="id "+(e[6].activePanel==e[18].id?"active":"")+" print svelte-98uac4")&&w(g,"class",d),32&s&&v!==(v=(e[18].x+e[13](e[17]).x+e[18].width/2)*e[7])&&w(g,"x",v),32&s&&x!==(x=(e[12](e[18].y,e[18].height)+e[13](e[17]).y+Math.min(.8*e[18].height,5)/3+e[18].height/2)*e[7])&&w(g,"y",x)},d(e){e&&h(t),e&&h(g),_=!1,s(k)}}}function Ue(e){let t,n,l,o,i,r,a,f,m,d,v=e[15].group,x=[];for(let t=0;t<v.length;t+=1)x[t]=Fe(De(e,v,t));return{c(){t=p("g"),n=p("rect"),f=p("g");for(let e=0;e<x.length;e+=1)x[e].c();b(n,"stroke-width",e[6].material.margins*e[7]+"px"),w(n,"class","sheet print svelte-98uac4"),w(n,"id",l=e[17]),w(n,"x",o=(e[13](e[17]).x+e[6].material.margins/2)*e[7]),w(n,"y",i=(e[13](e[17]).y+e[6].material.margins/2)*e[7]),w(n,"width",r=(e[15].sheet_width-e[6].material.margins)*e[7]),w(n,"height",a=(e[15].sheet_height-e[6].material.margins)*e[7]),w(t,"id","sheets"),w(f,"id","panels")},m(s,l){u(s,t,l),c(t,n),u(s,f,l);for(let e=0;e<x.length;e+=1)x[e].m(f,null);m||(d=[$(n,"mouseover",e[10]),$(n,"mouseleave",e[11])],m=!0)},p(e,t){if(64&t&&b(n,"stroke-width",e[6].material.margins*e[7]+"px"),64&t&&o!==(o=(e[13](e[17]).x+e[6].material.margins/2)*e[7])&&w(n,"x",o),64&t&&i!==(i=(e[13](e[17]).y+e[6].material.margins/2)*e[7])&&w(n,"y",i),96&t&&r!==(r=(e[15].sheet_width-e[6].material.margins)*e[7])&&w(n,"width",r),96&t&&a!==(a=(e[15].sheet_height-e[6].material.margins)*e[7])&&w(n,"height",a),13280&t){let n;for(v=e[15].group,n=0;n<v.length;n+=1){const s=De(e,v,n);x[n]?x[n].p(s,t):(x[n]=Fe(s),x[n].c(),x[n].m(f,null))}for(;n<x.length;n+=1)x[n].d(1);x.length=v.length}},d(e){e&&h(t),e&&h(f),g(x,e),m=!1,s(d)}}}function Je(t){let n,s,l,o,i,r,a,v=t[1]&&Ie(t),$=t[5].sheets,x=[];for(let e=0;e<$.length;e+=1)x[e]=Ue(Ge(t,$,e));return{c(){v&&v.c(),n=d(),s=f("div"),l=p("svg");for(let e=0;e<x.length;e+=1)x[e].c();o=m(">"),w(l,"class","print svelte-98uac4"),w(l,"version","1.1"),w(l,"xmlns","http://www.w3.org/2000/svg"),w(l,"xmlns:xlink","http://www.w3.org/1999/xlink"),w(l,"width",i=t[13](t[5].sheets.length-1).w*t[7]||0),w(l,"height",r=t[13](t[5].sheets.length-1).h*t[7]||0),w(l,"viewBox",a="0 0 "+(t[13](t[5].sheets.length-1).w*t[7]||0)+" "+(t[13](t[5].sheets.length-1).h*t[7]||0)),w(l,"preserveAspectRatio","xMidYMid meet"),w(s,"class","viewer svelte-98uac4")},m(e,i){v&&v.m(e,i),u(e,n,i),u(e,s,i),c(s,l);for(let e=0;e<x.length;e+=1)x[e].m(l,null);c(l,o),t[14](s)},p(e,[t]){if(e[1]?v?v.p(e,t):(v=Ie(e),v.c(),v.m(n.parentNode,n)):v&&(v.d(1),v=null),16352&t){let n;for($=e[5].sheets,n=0;n<$.length;n+=1){const s=Ge(e,$,n);x[n]?x[n].p(s,t):(x[n]=Ue(s),x[n].c(),x[n].m(l,o))}for(;n<x.length;n+=1)x[n].d(1);x.length=$.length}32&t&&i!==(i=e[13](e[5].sheets.length-1).w*e[7]||0)&&w(l,"width",i),32&t&&r!==(r=e[13](e[5].sheets.length-1).h*e[7]||0)&&w(l,"height",r),32&t&&a!==(a="0 0 "+(e[13](e[5].sheets.length-1).w*e[7]||0)+" "+(e[13](e[5].sheets.length-1).h*e[7]||0))&&w(l,"viewBox",a)},i:e,o:e,d(e){v&&v.d(e),e&&h(n),e&&h(s),g(x,e),t[14](null)}}}function Ke(e,t,n){let s,l;i(e,ae,(e=>n(5,s=e))),i(e,re,(e=>n(6,l=e)));let o,r,c=!1,u=0,h=0;var g;return g=()=>{a(ae,s.svg=r.innerHTML.toString(),s)},M().$$.after_update.push(g),[o,c,u,h,r,s,l,90,function(){a(re,l.activePanel=this.id,l)},function(){a(re,l.activePanel="",l)},function(){n(1,c=!0);let e=this.getBoundingClientRect();n(2,u=(e.bottom-e.top)/2+e.top),n(3,h=(e.right-e.left)/2+e.left),n(0,o=this.id)},function(){n(1,c=!1)},function(e,t){return l.material.height-t-e},function(e){let t=Math.ceil(s.sheets.length/5),n=Math.ceil(s.sheets.length/t),o=Math.ceil((e+1)/n)-1;return{x:e%n*l.material.width,y:o*l.material.height,w:n*l.material.width,h:t*l.material.height}},function(e){N[e?"unshift":"push"]((()=>{r=e,n(4,r)}))}]}class Qe extends te{constructor(e){super(),ee(this,e,Ke,Je,o,{})}}function Ve(t){let n,l,o,i,r,a,g,p,v,b=(t[7].language.includes("fr")?t[5]:t[4])+"";return{c(){n=f("h5"),l=m(b),o=m(":\n  "),i=f("input"),r=d(),a=f("span"),g=m(t[6]),w(i,"type","number"),w(i,"min",t[1]),w(i,"max",t[2]),w(i,"step",t[3]),w(i,"class","svelte-17gjz45"),w(a,"class","svelte-17gjz45"),w(n,"class","svelte-17gjz45")},m(e,s){u(e,n,s),c(n,l),c(n,o),c(n,i),_(i,t[0]),c(n,r),c(n,a),c(a,g),p||(v=[$(i,"click",Ye),$(i,"change",t[8]),$(i,"input",t[11]),$(a,"click",t[9])],p=!0)},p(e,[t]){176&t&&b!==(b=(e[7].language.includes("fr")?e[5]:e[4])+"")&&y(l,b),2&t&&w(i,"min",e[1]),4&t&&w(i,"max",e[2]),8&t&&w(i,"step",e[3]),1&t&&x(i.value)!==e[0]&&_(i,e[0]),64&t&&y(g,e[6])},i:e,o:e,d(e){e&&h(n),p=!1,s(v)}}}function Ye(){this.select()}function Ze(e,t,n){let s;i(e,re,(e=>n(7,s=e)));const l=H();let{value:o}=t,{min:r=0}=t,{max:a}=t,{step:c}=t,{english:u=""}=t,{french:h=""}=t,{measurement:g=""}=t,{unit:f=""}=t;return e.$$set=e=>{"value"in e&&n(0,o=e.value),"min"in e&&n(1,r=e.min),"max"in e&&n(2,a=e.max),"step"in e&&n(3,c=e.step),"english"in e&&n(4,u=e.english),"french"in e&&n(5,h=e.french),"measurement"in e&&n(6,g=e.measurement),"unit"in e&&n(10,f=e.unit)},[o,r,a,c,u,h,g,s,function(){l("changed")},function(){l("convert"),n(10,f=!f)},f,function(){o=x(this.value),n(0,o)}]}class Xe extends te{constructor(e){super(),ee(this,e,Ze,Ve,o,{value:0,min:1,max:2,step:3,english:4,french:5,measurement:6,unit:10})}}function et(e,t,n){const s=e.slice();return s[51]=t[n],s}function tt(e,t,n){const s=e.slice();return s[51]=t[n],s}function nt(e,t,n){const s=e.slice();return s[51]=t[n],s}function st(e){let t,n,s,l,o,i,r,a,g,p=e[51]+"",v=e[0].cnc[e[51]].diameter+"",$=e[0].cnc[e[51]].type+"";return{c(){t=f("option"),n=m("("),s=m(p),l=m(") -\n                "),o=m(v),i=d(),r=m($),a=d(),t.__value=g=e[51],t.value=t.__value,w(t,"class","svelte-137mxmo")},m(e,h){u(e,t,h),c(t,n),c(t,s),c(t,l),c(t,o),c(t,i),c(t,r),c(t,a)},p(e,n){1&n[0]&&p!==(p=e[51]+"")&&y(s,p),1&n[0]&&v!==(v=e[0].cnc[e[51]].diameter+"")&&y(o,v),1&n[0]&&$!==($=e[0].cnc[e[51]].type+"")&&y(r,$),1&n[0]&&g!==(g=e[51])&&(t.__value=g,t.value=t.__value)},d(e){e&&h(t)}}}function lt(e){let t,n=e[0].cnc[e[51]].type.includes("mill"),s=n&&st(e);return{c(){s&&s.c(),t=v()},m(e,n){s&&s.m(e,n),u(e,t,n)},p(e,l){1&l[0]&&(n=e[0].cnc[e[51]].type.includes("mill")),n?s?s.p(e,l):(s=st(e),s.c(),s.m(t.parentNode,t)):s&&(s.d(1),s=null)},d(e){s&&s.d(e),e&&h(t)}}}function ot(e){let t,n,s,l,o,i,r,a,g,p=e[51]+"",v=e[0].cnc[e[51]].diameter+"",$=e[0].cnc[e[51]].type+"";return{c(){t=f("option"),n=m("("),s=m(p),l=m(") -\n                "),o=m(v),i=d(),r=m($),a=d(),t.__value=g=e[51],t.value=t.__value,w(t,"class","svelte-137mxmo")},m(e,h){u(e,t,h),c(t,n),c(t,s),c(t,l),c(t,o),c(t,i),c(t,r),c(t,a)},p(e,n){1&n[0]&&p!==(p=e[51]+"")&&y(s,p),1&n[0]&&v!==(v=e[0].cnc[e[51]].diameter+"")&&y(o,v),1&n[0]&&$!==($=e[0].cnc[e[51]].type+"")&&y(r,$),1&n[0]&&g!==(g=e[51])&&(t.__value=g,t.value=t.__value)},d(e){e&&h(t)}}}function it(e){let t,n=e[0].cnc[e[51]].type.includes("nose")||e[0].cnc[e[51]].type.includes("V-"),s=n&&ot(e);return{c(){s&&s.c(),t=v()},m(e,n){s&&s.m(e,n),u(e,t,n)},p(e,l){1&l[0]&&(n=e[0].cnc[e[51]].type.includes("nose")||e[0].cnc[e[51]].type.includes("V-")),n?s?s.p(e,l):(s=ot(e),s.c(),s.m(t.parentNode,t)):s&&(s.d(1),s=null)},d(e){s&&s.d(e),e&&h(t)}}}function rt(e){let t,n,s,l,o,i,r,a,g,p,v=e[51]+"",$=e[0].cnc[e[51]].diameter+"",x=e[0].cnc[e[51]].mm?"mm":'"',_=e[0].cnc[e[51]].type+"";return{c(){t=f("option"),n=m("("),s=m(v),l=m(") -\n                "),o=m($),i=m(x),r=d(),a=m(_),g=d(),t.__value=p=e[51],t.value=t.__value,w(t,"class","svelte-137mxmo")},m(e,h){u(e,t,h),c(t,n),c(t,s),c(t,l),c(t,o),c(t,i),c(t,r),c(t,a),c(t,g)},p(e,n){1&n[0]&&v!==(v=e[51]+"")&&y(s,v),1&n[0]&&$!==($=e[0].cnc[e[51]].diameter+"")&&y(o,$),1&n[0]&&x!==(x=e[0].cnc[e[51]].mm?"mm":'"')&&y(i,x),1&n[0]&&_!==(_=e[0].cnc[e[51]].type+"")&&y(a,_),1&n[0]&&p!==(p=e[51])&&(t.__value=p,t.value=t.__value)},d(e){e&&h(t)}}}function at(e){let t,n=e[0].cnc[e[51]]&&rt(e);return{c(){n&&n.c(),t=v()},m(e,s){n&&n.m(e,s),u(e,t,s)},p(e,s){e[0].cnc[e[51]]?n?n.p(e,s):(n=rt(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&h(t)}}}function ct(e){let t,n,l,o,i,r,a,p,v,x,_,b,j,P,C,M,H,E,O,R,T,z,q,A,L,D,G,I,F,U,X,ee,te,ne,se,le,oe,ie,re,ae,ce,ue,he,ge,fe,pe,me,de,ve,$e,we,xe,ye,_e,be,ke,je,Pe,Ce,He,Ee,Oe,Re,Te,ze,Be,We,qe,Ae,Le,De,Ge,Ie,Fe,Ue,Je,Ke,Qe,Ve,Ye,Ze,st,ot,rt,ct,ut,ht,gt,ft,pt,mt,dt,vt,$t,wt,xt,yt,_t,bt,kt,jt,St,Pt,Ct,Mt,Ht,Et,Nt,Ot,Rt,Tt,zt,Bt,Wt,qt,At,Lt,Dt,Gt,It,Ft,Ut,Jt,Kt,Qt,Vt,Yt,Zt,Xt,en,tn,nn,sn,ln,on,rn,an,cn,un,hn,gn,fn,pn,mn,dn,vn,$n,wn,xn=e[0].subsettings.show?"⩚":"⩛",yn=e[2]?"Classé par le:":"Sorted by:",_n=e[2]?"Outil:":"Tool:",bn=e[2]?"Outil:":"Tool:",kn=e[2]?"Outil #":"Tool #";function jn(t){e[10].call(null,t)}v=new Ne({props:{open:e[0].subsettings.project,icon:"⟐",french:"Projet",english:"Project"}}),v.$on("toggle",e[9]);let Sn={english:"Billing #",french:"Facture #"};function Pn(t){e[11].call(null,t)}void 0!==e[1].csv.contents[0][1]&&(Sn.value=e[1].csv.contents[0][1]),b=new Se({props:Sn}),N.push((()=>Q(b,"value",jn)));let Cn={english:e[1].csv.contents[0][4]?e[1].csv.contents[0][4]:"Product",french:e[1].csv.contents[0][4]?e[1].csv.contents[0][4]:"Produit"};function Mn(t){e[12].call(null,t)}void 0!==e[1].csv.contents[0][5]&&(Cn.value=e[1].csv.contents[0][5]),C=new Se({props:Cn}),N.push((()=>Q(C,"value",Pn)));let Hn={on:"☑︎",off:"☐",french:"Graver les noms des panneaux",english:"Engrave the panel names"};function En(t){e[13].call(null,t)}void 0!==e[1].tools.engraver.engrave&&(Hn.checked=e[1].tools.engraver.engrave),E=new Me({props:Hn}),N.push((()=>Q(E,"checked",Mn)));let Nn={on:"mm",off:e[0].language.includes("fr")?"po":"in",french:"Unites",english:"Units"};function On(t){e[15].call(null,t)}void 0!==e[0].units&&(Nn.checked=e[0].units),T=new Me({props:Nn}),N.push((()=>Q(T,"checked",En))),T.$on("toggle",e[4]),A=new Ne({props:{open:e[0].subsettings.sheet,icon:"☐",english:"Material",french:"Matériau"}}),A.$on("toggle",e[14]);let Rn={english:e[1].csv.contents[0][2]?e[1].csv.contents[0][2]:"Type of panel",french:e[1].csv.contents[0][2]?e[1].csv.contents[0][2]:"Sorte de panneau"};function Tn(t){e[16].call(null,t)}void 0!==e[1].csv.contents[0][3]&&(Rn.value=e[1].csv.contents[0][3]),G=new Se({props:Rn}),N.push((()=>Q(G,"value",On)));let zn={english:"Width",french:"Largeur",max:"61",step:"0.0625",measurement:'"'};function Bn(t){e[17].call(null,t)}void 0!==e[0].material.width&&(zn.value=e[0].material.width),U=new Xe({props:zn}),N.push((()=>Q(U,"value",Tn)));let Wn={english:"Height",french:"Hauteur",max:"121",step:"0.0625",measurement:'"'};function qn(t){e[18].call(null,t)}void 0!==e[0].material.height&&(Wn.value=e[0].material.height),te=new Xe({props:Wn}),N.push((()=>Q(te,"value",Bn)));let An={english:"Thickness",french:"Épaisseur",max:"5",step:"0.005",measurement:'"'};function Ln(t){e[19].call(null,t)}void 0!==e[0].material.thickness&&(An.value=e[0].material.thickness),le=new Xe({props:An}),N.push((()=>Q(le,"value",qn))),le.$on("changed",e[3]);let Dn={english:"Margins",french:"Marges",max:"5",step:"0.05",measurement:'"'};function Gn(t){e[21].call(null,t)}void 0!==e[0].material.margins&&(Dn.value=e[0].material.margins),re=new Xe({props:Dn}),N.push((()=>Q(re,"value",Ln))),ue=new Ne({props:{open:e[0].subsettings.nest,icon:"⊞",english:"Nesting",french:"Nesting"}}),ue.$on("toggle",e[20]);let In={english:"Aligned to the",french:"Aligné avec le",on:(e[2]?"bas":"Bottom")+" ⤓",off:(e[2]?"haut":"Top")+" ⤒"};function Fn(t){e[22].call(null,t)}void 0!==e[0].nestDirectionBottom&&(In.checked=e[0].nestDirectionBottom),fe=new Me({props:In}),N.push((()=>Q(fe,"checked",Gn)));let Un={english:"Placement direction",french:"Direction de placement",on:(e[2]?"Colonnes":"Columns")+" ⇈",off:(e[2]?"Lignes":"Rows")+" ⇉"};void 0!==e[0].nestTypeColumn&&(Un.checked=e[0].nestTypeColumn),de=new Me({props:Un}),N.push((()=>Q(de,"checked",Fn))),qe=new Ne({props:{open:e[0].subsettings.profile,icon:"⨆",english:"Profile cut",french:"Coupe profile"}}),qe.$on("toggle",e[24]);let Jn=Object.keys(e[0].cnc),Kn=[];for(let t=0;t<Jn.length;t+=1)Kn[t]=lt(nt(e,Jn,t));function Qn(t){e[26].call(null,t)}let Vn={english:"Cut depth",french:"Profondeur coupe",max:e[0].cnc[e[0].tools.profile].max_depth,step:"0.05",measurement:'"'};function Yn(t){e[27].call(null,t)}void 0!==e[1].tools.profile.cut_depth&&(Vn.value=e[1].tools.profile.cut_depth),Qe=new Xe({props:Vn}),N.push((()=>Q(Qe,"value",Qn)));let Zn={english:"Smallest for one pass",french:"Plus petit pour un passe",max:e[0].material.width,step:"0.5",measurement:'"'};function Xn(t){e[28].call(null,t)}void 0!==e[1].tools.profile.min_size&&(Zn.value=e[1].tools.profile.min_size),Ze=new Xe({props:Zn}),N.push((()=>Q(Ze,"value",Yn)));let es={english:"Last pass link",french:"Lien pour dernier passe",max:e[0].material.thickness,step:"0.005",measurement:'"'};void 0!==e[1].tools.profile.link&&(es.value=e[1].tools.profile.link),rt=new Xe({props:es}),N.push((()=>Q(rt,"value",Xn))),ht=new Ne({props:{open:e[0].subsettings.engraver,icon:"⋁",english:"Engraving",french:"Graver"}}),ht.$on("toggle",e[29]);let ts=Object.keys(e[0].cnc),ns=[];for(let t=0;t<ts.length;t+=1)ns[t]=it(tt(e,ts,t));function ss(t){e[31].call(null,t)}let ls={english:"Cut depth",french:"Profondeur coupe",max:e[0].cnc[e[0].tools.engraver].max_depth,step:"0.005",measurement:'"'};function os(t){e[32].call(null,t)}void 0!==e[1].tools.engraver.cut_depth&&(ls.value=e[1].tools.engraver.cut_depth),yt=new Xe({props:ls}),N.push((()=>Q(yt,"value",ss)));let is={english:"Placement from left",french:"Placement de gauche",max:"10",step:"0.125",measurement:'"'};function rs(t){e[33].call(null,t)}void 0!==e[1].tools.engraver.xStart&&(is.value=e[1].tools.engraver.xStart),kt=new Xe({props:is}),N.push((()=>Q(kt,"value",os)));let as={english:"Placement from bottom",french:"Placement de bas",max:"10",step:"0.125",measurement:'"'};function cs(t){e[34].call(null,t)}void 0!==e[1].tools.engraver.yStart&&(as.value=e[1].tools.engraver.yStart),Pt=new Xe({props:as}),N.push((()=>Q(Pt,"value",rs)));let us={english:"Letter height",french:"Hauteur de la lettre",max:"3",step:"0.05",measurement:'"'};function hs(t){e[35].call(null,t)}void 0!==e[1].tools.engraver.size&&(us.value=e[1].tools.engraver.size),Ht=new Xe({props:us}),N.push((()=>Q(Ht,"value",cs)));let gs={english:"Space between letters",french:"Espace entre les lettres",max:"2",step:"0.05",measurement:'"'};void 0!==e[1].tools.engraver.spacing&&(gs.value=e[1].tools.engraver.spacing),Ot=new Xe({props:gs}),N.push((()=>Q(Ot,"value",hs))),zt=new Ne({props:{open:e[0].subsettings.library,icon:"⩐",english:"CNC Library",french:"Bibliotheque CNC"}}),zt.$on("toggle",e[36]);let fs=Object.keys(e[0].cnc),ps=[];for(let t=0;t<fs.length;t+=1)ps[t]=at(et(e,fs,t));function ms(t){e[38].call(null,t)}function ds(t){e[39].call(null,t)}let vs={english:"Diameter",french:"Diametre",max:e[0].cnc[e[0].tools.tool].mm?150:5,step:e[0].cnc[e[0].tools.tool].mm?.5:.03125,measurement:e[0].cnc[e[0].tools.tool].mm?"mm":'"'};function $s(t){e[40].call(null,t)}void 0!==e[0].cnc[e[0].tools.tool].diameter&&(vs.value=e[0].cnc[e[0].tools.tool].diameter),void 0!==e[0].cnc[e[0].tools.tool].mm&&(vs.unit=e[0].cnc[e[0].tools.tool].mm),Ut=new Xe({props:vs}),N.push((()=>Q(Ut,"value",ms))),N.push((()=>Q(Ut,"unit",ds))),Ut.$on("convert",e[5]);let ws={english:"Type",french:"Type"};function xs(t){e[41].call(null,t)}void 0!==e[0].cnc[e[0].tools.tool].type&&(ws.value=e[0].cnc[e[0].tools.tool].type),Vt=new Se({props:ws}),N.push((()=>Q(Vt,"value",$s)));let ys={english:"Spindle speed",french:"Vitesse spindle",max:"30000",step:"100",measurement:"RPM"};function _s(t){e[42].call(null,t)}void 0!==e[0].cnc[e[0].tools.tool].spindle&&(ys.value=e[0].cnc[e[0].tools.tool].spindle),Xt=new Xe({props:ys}),N.push((()=>Q(Xt,"value",xs)));let bs={english:"Plunge rate",french:"Vitesse de plonge",max:"1000",step:"5",measurement:'"/min'};function ks(t){e[43].call(null,t)}void 0!==e[0].cnc[e[0].tools.tool].plunge&&(bs.value=e[0].cnc[e[0].tools.tool].plunge),nn=new Xe({props:bs}),N.push((()=>Q(nn,"value",_s)));let js={english:"Plunge ramp",french:"Longeur de plonge",max:"5",step:"0.125",measurement:'"'};function Ss(t){e[44].call(null,t)}void 0!==e[0].cnc[e[0].tools.tool].ramp&&(js.value=e[0].cnc[e[0].tools.tool].ramp),on=new Xe({props:js}),N.push((()=>Q(on,"value",ks)));let Ps={english:"Feed rate",french:"itesse de coupe",max:"1000",step:"10",measurement:'"/min'};function Cs(t){e[45].call(null,t)}void 0!==e[0].cnc[e[0].tools.tool].feed&&(Ps.value=e[0].cnc[e[0].tools.tool].feed),cn=new Xe({props:Ps}),N.push((()=>Q(cn,"value",Ss)));let Ms={english:"Max cut depth",french:"Max profondeur coupe",max:"5",step:"0.03125",measurement:'"'};function Hs(t){e[46].call(null,t)}void 0!==e[0].cnc[e[0].tools.tool].max_depth&&(Ms.value=e[0].cnc[e[0].tools.tool].max_depth),gn=new Xe({props:Ms}),N.push((()=>Q(gn,"value",Cs)));let Es={english:"Max depth/pass",french:"Max profondeur/passe",max:"5",step:"0.03125",measurement:'"'};return void 0!==e[0].cnc[e[0].tools.tool].pass_depth&&(Es.value=e[0].cnc[e[0].tools.tool].pass_depth),mn=new Xe({props:Es}),N.push((()=>Q(mn,"value",Hs))),{c(){t=f("div"),n=f("div"),l=f("span"),o=m(xn),i=d(),r=f("span"),r.textContent=""+(e[2]?"Parametre":" Settings"),a=d(),p=f("div"),V(v.$$.fragment),x=d(),_=f("div"),V(b.$$.fragment),P=d(),V(C.$$.fragment),H=d(),V(E.$$.fragment),R=d(),V(T.$$.fragment),q=d(),V(A.$$.fragment),L=d(),D=f("div"),V(G.$$.fragment),F=d(),V(U.$$.fragment),ee=d(),V(te.$$.fragment),se=d(),V(le.$$.fragment),ie=d(),V(re.$$.fragment),ce=d(),V(ue.$$.fragment),he=d(),ge=f("div"),V(fe.$$.fragment),me=d(),V(de.$$.fragment),$e=d(),we=f("h5"),xe=m(yn),ye=d(),_e=f("span"),_e.textContent="",be=d(),ke=f("div"),ke.textContent="",je=d(),Pe=f("select"),Ce=f("option"),He=f("span"),He.textContent=(e[2]?"Plus large":"Widest")+" ↔︎",Ee=d(),Oe=f("option"),Re=f("span"),Re.textContent=(e[2]?"Plus haut":"Tallest")+" ↕︎",Te=d(),ze=f("option"),Be=f("span"),Be.textContent=(e[2]?"Plus grand":"Biggest")+" ⤢",We=d(),V(qe.$$.fragment),Ae=d(),Le=f("div"),De=f("h5"),Ge=m(_n),Ie=d(),Fe=f("span"),Fe.textContent="",Ue=d(),Je=f("select");for(let e=0;e<Kn.length;e+=1)Kn[e].c();Ke=d(),V(Qe.$$.fragment),Ye=d(),V(Ze.$$.fragment),ot=d(),V(rt.$$.fragment),ut=d(),V(ht.$$.fragment),gt=d(),ft=f("div"),pt=f("h5"),mt=m(bn),dt=d(),vt=f("span"),vt.textContent="",$t=d(),wt=f("select");for(let e=0;e<ns.length;e+=1)ns[e].c();xt=d(),V(yt.$$.fragment),bt=d(),V(kt.$$.fragment),St=d(),V(Pt.$$.fragment),Mt=d(),V(Ht.$$.fragment),Nt=d(),V(Ot.$$.fragment),Tt=d(),V(zt.$$.fragment),Bt=d(),Wt=f("div"),qt=f("h5"),At=m(kn),Lt=d(),Dt=f("span"),Dt.textContent="",Gt=d(),It=f("select");for(let e=0;e<ps.length;e+=1)ps[e].c();Ft=d(),V(Ut.$$.fragment),Qt=d(),V(Vt.$$.fragment),Zt=d(),V(Xt.$$.fragment),tn=d(),V(nn.$$.fragment),ln=d(),V(on.$$.fragment),an=d(),V(cn.$$.fragment),hn=d(),V(gn.$$.fragment),pn=d(),V(mn.$$.fragment),w(l,"class","transparent svelte-137mxmo"),w(n,"class","title svelte-137mxmo"),S(n,"active",e[0].subsettings.show),w(_,"class","subsetting svelte-137mxmo"),S(_,"active",e[0].subsettings.project),w(D,"class","subsetting svelte-137mxmo"),S(D,"active",e[0].subsettings.sheet),w(_e,"class","spread svelte-137mxmo"),w(ke,"class","filler"),Ce.__value="widest",Ce.value=Ce.__value,w(Ce,"class","svelte-137mxmo"),Oe.__value="tallest",Oe.value=Oe.__value,w(Oe,"class","svelte-137mxmo"),ze.__value="biggest",ze.value=ze.__value,w(ze,"class","svelte-137mxmo"),w(Pe,"class","right svelte-137mxmo"),void 0===e[0].nestOrder&&B((()=>e[23].call(Pe))),w(we,"class","svelte-137mxmo"),w(ge,"class","subsetting svelte-137mxmo"),S(ge,"active",e[0].subsettings.nest),w(Fe,"class","spread svelte-137mxmo"),w(Je,"class","svelte-137mxmo"),void 0===e[0].tools.profile&&B((()=>e[25].call(Je))),w(De,"class","svelte-137mxmo"),w(Le,"class","subsetting svelte-137mxmo"),S(Le,"active",e[0].subsettings.profile),w(vt,"class","spread svelte-137mxmo"),w(wt,"class","svelte-137mxmo"),void 0===e[0].tools.engraver&&B((()=>e[30].call(wt))),w(pt,"class","svelte-137mxmo"),w(ft,"class","subsetting svelte-137mxmo"),S(ft,"active",e[0].subsettings.engraver),w(Dt,"class","spread svelte-137mxmo"),w(It,"class","svelte-137mxmo"),void 0===e[0].tools.tool&&B((()=>e[37].call(It))),w(qt,"class","svelte-137mxmo"),w(Wt,"class","subsetting svelte-137mxmo"),S(Wt,"active",e[0].subsettings.library),w(p,"class","subsetting svelte-137mxmo"),S(p,"active",e[0].subsettings.show),w(t,"class","settings svelte-137mxmo")},m(s,h){u(s,t,h),c(t,n),c(n,l),c(l,o),c(n,i),c(n,r),c(t,a),c(t,p),Y(v,p,null),c(p,x),c(p,_),Y(b,_,null),c(_,P),Y(C,_,null),c(_,H),Y(E,_,null),c(_,R),Y(T,_,null),c(p,q),Y(A,p,null),c(p,L),c(p,D),Y(G,D,null),c(D,F),Y(U,D,null),c(D,ee),Y(te,D,null),c(D,se),Y(le,D,null),c(D,ie),Y(re,D,null),c(p,ce),Y(ue,p,null),c(p,he),c(p,ge),Y(fe,ge,null),c(ge,me),Y(de,ge,null),c(ge,$e),c(ge,we),c(we,xe),c(we,ye),c(we,_e),c(we,be),c(we,ke),c(we,je),c(we,Pe),c(Pe,Ce),c(Ce,He),c(Ce,Ee),c(Pe,Oe),c(Oe,Re),c(Oe,Te),c(Pe,ze),c(ze,Be),k(Pe,e[0].nestOrder),c(p,We),Y(qe,p,null),c(p,Ae),c(p,Le),c(Le,De),c(De,Ge),c(De,Ie),c(De,Fe),c(De,Ue),c(De,Je);for(let e=0;e<Kn.length;e+=1)Kn[e].m(Je,null);k(Je,e[0].tools.profile),c(Le,Ke),Y(Qe,Le,null),c(Le,Ye),Y(Ze,Le,null),c(Le,ot),Y(rt,Le,null),c(p,ut),Y(ht,p,null),c(p,gt),c(p,ft),c(ft,pt),c(pt,mt),c(pt,dt),c(pt,vt),c(pt,$t),c(pt,wt);for(let e=0;e<ns.length;e+=1)ns[e].m(wt,null);k(wt,e[0].tools.engraver),c(ft,xt),Y(yt,ft,null),c(ft,bt),Y(kt,ft,null),c(ft,St),Y(Pt,ft,null),c(ft,Mt),Y(Ht,ft,null),c(ft,Nt),Y(Ot,ft,null),c(p,Tt),Y(zt,p,null),c(p,Bt),c(p,Wt),c(Wt,qt),c(qt,At),c(qt,Lt),c(qt,Dt),c(qt,Gt),c(qt,It);for(let e=0;e<ps.length;e+=1)ps[e].m(It,null);k(It,e[0].tools.tool),c(Wt,Ft),Y(Ut,Wt,null),c(Wt,Qt),Y(Vt,Wt,null),c(Wt,Zt),Y(Xt,Wt,null),c(Wt,tn),Y(nn,Wt,null),c(Wt,ln),Y(on,Wt,null),c(Wt,an),Y(cn,Wt,null),c(Wt,hn),Y(gn,Wt,null),c(Wt,pn),Y(mn,Wt,null),vn=!0,$n||(wn=[$(n,"click",e[8]),$(Pe,"change",e[23]),$(Je,"change",e[25]),$(Je,"change",e[7]),$(wt,"change",e[30]),$(wt,"change",e[6]),$(It,"change",e[37])],$n=!0)},p(e,t){(!vn||1&t[0])&&xn!==(xn=e[0].subsettings.show?"⩚":"⩛")&&y(o,xn),1&t[0]&&S(n,"active",e[0].subsettings.show);const s={};1&t[0]&&(s.open=e[0].subsettings.project),v.$set(s);const l={};!j&&2&t[0]&&(j=!0,l.value=e[1].csv.contents[0][1],W((()=>j=!1))),b.$set(l);const i={};2&t[0]&&(i.english=e[1].csv.contents[0][4]?e[1].csv.contents[0][4]:"Product"),2&t[0]&&(i.french=e[1].csv.contents[0][4]?e[1].csv.contents[0][4]:"Produit"),!M&&2&t[0]&&(M=!0,i.value=e[1].csv.contents[0][5],W((()=>M=!1))),C.$set(i);const r={};!O&&2&t[0]&&(O=!0,r.checked=e[1].tools.engraver.engrave,W((()=>O=!1))),E.$set(r);const a={};1&t[0]&&(a.off=e[0].language.includes("fr")?"po":"in"),!z&&1&t[0]&&(z=!0,a.checked=e[0].units,W((()=>z=!1))),T.$set(a),1&t[0]&&S(_,"active",e[0].subsettings.project);const c={};1&t[0]&&(c.open=e[0].subsettings.sheet),A.$set(c);const u={};2&t[0]&&(u.english=e[1].csv.contents[0][2]?e[1].csv.contents[0][2]:"Type of panel"),2&t[0]&&(u.french=e[1].csv.contents[0][2]?e[1].csv.contents[0][2]:"Sorte de panneau"),!I&&2&t[0]&&(I=!0,u.value=e[1].csv.contents[0][3],W((()=>I=!1))),G.$set(u);const h={};!X&&1&t[0]&&(X=!0,h.value=e[0].material.width,W((()=>X=!1))),U.$set(h);const g={};!ne&&1&t[0]&&(ne=!0,g.value=e[0].material.height,W((()=>ne=!1))),te.$set(g);const f={};!oe&&1&t[0]&&(oe=!0,f.value=e[0].material.thickness,W((()=>oe=!1))),le.$set(f);const m={};!ae&&1&t[0]&&(ae=!0,m.value=e[0].material.margins,W((()=>ae=!1))),re.$set(m),1&t[0]&&S(D,"active",e[0].subsettings.sheet);const d={};1&t[0]&&(d.open=e[0].subsettings.nest),ue.$set(d);const $={};!pe&&1&t[0]&&(pe=!0,$.checked=e[0].nestDirectionBottom,W((()=>pe=!1))),fe.$set($);const w={};!ve&&1&t[0]&&(ve=!0,w.checked=e[0].nestTypeColumn,W((()=>ve=!1))),de.$set(w),1&t[0]&&k(Pe,e[0].nestOrder),1&t[0]&&S(ge,"active",e[0].subsettings.nest);const x={};if(1&t[0]&&(x.open=e[0].subsettings.profile),qe.$set(x),1&t[0]){let n;for(Jn=Object.keys(e[0].cnc),n=0;n<Jn.length;n+=1){const s=nt(e,Jn,n);Kn[n]?Kn[n].p(s,t):(Kn[n]=lt(s),Kn[n].c(),Kn[n].m(Je,null))}for(;n<Kn.length;n+=1)Kn[n].d(1);Kn.length=Jn.length}1&t[0]&&k(Je,e[0].tools.profile);const P={};1&t[0]&&(P.max=e[0].cnc[e[0].tools.profile].max_depth),!Ve&&2&t[0]&&(Ve=!0,P.value=e[1].tools.profile.cut_depth,W((()=>Ve=!1))),Qe.$set(P);const H={};1&t[0]&&(H.max=e[0].material.width),!st&&2&t[0]&&(st=!0,H.value=e[1].tools.profile.min_size,W((()=>st=!1))),Ze.$set(H);const N={};1&t[0]&&(N.max=e[0].material.thickness),!ct&&2&t[0]&&(ct=!0,N.value=e[1].tools.profile.link,W((()=>ct=!1))),rt.$set(N),1&t[0]&&S(Le,"active",e[0].subsettings.profile);const R={};if(1&t[0]&&(R.open=e[0].subsettings.engraver),ht.$set(R),1&t[0]){let n;for(ts=Object.keys(e[0].cnc),n=0;n<ts.length;n+=1){const s=tt(e,ts,n);ns[n]?ns[n].p(s,t):(ns[n]=it(s),ns[n].c(),ns[n].m(wt,null))}for(;n<ns.length;n+=1)ns[n].d(1);ns.length=ts.length}1&t[0]&&k(wt,e[0].tools.engraver);const B={};1&t[0]&&(B.max=e[0].cnc[e[0].tools.engraver].max_depth),!_t&&2&t[0]&&(_t=!0,B.value=e[1].tools.engraver.cut_depth,W((()=>_t=!1))),yt.$set(B);const q={};!jt&&2&t[0]&&(jt=!0,q.value=e[1].tools.engraver.xStart,W((()=>jt=!1))),kt.$set(q);const L={};!Ct&&2&t[0]&&(Ct=!0,L.value=e[1].tools.engraver.yStart,W((()=>Ct=!1))),Pt.$set(L);const F={};!Et&&2&t[0]&&(Et=!0,F.value=e[1].tools.engraver.size,W((()=>Et=!1))),Ht.$set(F);const J={};!Rt&&2&t[0]&&(Rt=!0,J.value=e[1].tools.engraver.spacing,W((()=>Rt=!1))),Ot.$set(J),1&t[0]&&S(ft,"active",e[0].subsettings.engraver);const K={};if(1&t[0]&&(K.open=e[0].subsettings.library),zt.$set(K),1&t[0]){let n;for(fs=Object.keys(e[0].cnc),n=0;n<fs.length;n+=1){const s=et(e,fs,n);ps[n]?ps[n].p(s,t):(ps[n]=at(s),ps[n].c(),ps[n].m(It,null))}for(;n<ps.length;n+=1)ps[n].d(1);ps.length=fs.length}1&t[0]&&k(It,e[0].tools.tool);const Q={};1&t[0]&&(Q.max=e[0].cnc[e[0].tools.tool].mm?150:5),1&t[0]&&(Q.step=e[0].cnc[e[0].tools.tool].mm?.5:.03125),1&t[0]&&(Q.measurement=e[0].cnc[e[0].tools.tool].mm?"mm":'"'),!Jt&&1&t[0]&&(Jt=!0,Q.value=e[0].cnc[e[0].tools.tool].diameter,W((()=>Jt=!1))),!Kt&&1&t[0]&&(Kt=!0,Q.unit=e[0].cnc[e[0].tools.tool].mm,W((()=>Kt=!1))),Ut.$set(Q);const V={};!Yt&&1&t[0]&&(Yt=!0,V.value=e[0].cnc[e[0].tools.tool].type,W((()=>Yt=!1))),Vt.$set(V);const Y={};!en&&1&t[0]&&(en=!0,Y.value=e[0].cnc[e[0].tools.tool].spindle,W((()=>en=!1))),Xt.$set(Y);const Z={};!sn&&1&t[0]&&(sn=!0,Z.value=e[0].cnc[e[0].tools.tool].plunge,W((()=>sn=!1))),nn.$set(Z);const ee={};!rn&&1&t[0]&&(rn=!0,ee.value=e[0].cnc[e[0].tools.tool].ramp,W((()=>rn=!1))),on.$set(ee);const se={};!un&&1&t[0]&&(un=!0,se.value=e[0].cnc[e[0].tools.tool].feed,W((()=>un=!1))),cn.$set(se);const ie={};!fn&&1&t[0]&&(fn=!0,ie.value=e[0].cnc[e[0].tools.tool].max_depth,W((()=>fn=!1))),gn.$set(ie);const ce={};!dn&&1&t[0]&&(dn=!0,ce.value=e[0].cnc[e[0].tools.tool].pass_depth,W((()=>dn=!1))),mn.$set(ce),1&t[0]&&S(Wt,"active",e[0].subsettings.library),1&t[0]&&S(p,"active",e[0].subsettings.show)},i(e){vn||(J(v.$$.fragment,e),J(b.$$.fragment,e),J(C.$$.fragment,e),J(E.$$.fragment,e),J(T.$$.fragment,e),J(A.$$.fragment,e),J(G.$$.fragment,e),J(U.$$.fragment,e),J(te.$$.fragment,e),J(le.$$.fragment,e),J(re.$$.fragment,e),J(ue.$$.fragment,e),J(fe.$$.fragment,e),J(de.$$.fragment,e),J(qe.$$.fragment,e),J(Qe.$$.fragment,e),J(Ze.$$.fragment,e),J(rt.$$.fragment,e),J(ht.$$.fragment,e),J(yt.$$.fragment,e),J(kt.$$.fragment,e),J(Pt.$$.fragment,e),J(Ht.$$.fragment,e),J(Ot.$$.fragment,e),J(zt.$$.fragment,e),J(Ut.$$.fragment,e),J(Vt.$$.fragment,e),J(Xt.$$.fragment,e),J(nn.$$.fragment,e),J(on.$$.fragment,e),J(cn.$$.fragment,e),J(gn.$$.fragment,e),J(mn.$$.fragment,e),vn=!0)},o(e){K(v.$$.fragment,e),K(b.$$.fragment,e),K(C.$$.fragment,e),K(E.$$.fragment,e),K(T.$$.fragment,e),K(A.$$.fragment,e),K(G.$$.fragment,e),K(U.$$.fragment,e),K(te.$$.fragment,e),K(le.$$.fragment,e),K(re.$$.fragment,e),K(ue.$$.fragment,e),K(fe.$$.fragment,e),K(de.$$.fragment,e),K(qe.$$.fragment,e),K(Qe.$$.fragment,e),K(Ze.$$.fragment,e),K(rt.$$.fragment,e),K(ht.$$.fragment,e),K(yt.$$.fragment,e),K(kt.$$.fragment,e),K(Pt.$$.fragment,e),K(Ht.$$.fragment,e),K(Ot.$$.fragment,e),K(zt.$$.fragment,e),K(Ut.$$.fragment,e),K(Vt.$$.fragment,e),K(Xt.$$.fragment,e),K(nn.$$.fragment,e),K(on.$$.fragment,e),K(cn.$$.fragment,e),K(gn.$$.fragment,e),K(mn.$$.fragment,e),vn=!1},d(e){e&&h(t),Z(v),Z(b),Z(C),Z(E),Z(T),Z(A),Z(G),Z(U),Z(te),Z(le),Z(re),Z(ue),Z(fe),Z(de),Z(qe),g(Kn,e),Z(Qe),Z(Ze),Z(rt),Z(ht),g(ns,e),Z(yt),Z(kt),Z(Pt),Z(Ht),Z(Ot),Z(zt),g(ps,e),Z(Ut),Z(Vt),Z(Xt),Z(nn),Z(on),Z(cn),Z(gn),Z(mn),$n=!1,s(wn)}}}function ut(e,t,n){let s,l;i(e,re,(e=>n(0,s=e))),i(e,ae,(e=>n(1,l=e)));H();const o="fr"===s.language;let r=s.material.thickness;function c(e,t){return(e?fe:ge)(t)}function u(e){a(re,s.tools.tool=e,s)}return[s,l,o,function(){a(ae,l.tools.profile.cut_depth-=r-s.material.thickness,l),r=s.material.thickness},function(){let e=JSON.parse(l.csv.contents[3][1]);l.csv.panels.forEach((t=>{t[2]=c(e,t[2]),t[3]=c(e,t[3])})),a(ae,l.csv.contents[3][1]=a(re,s.units=!e,s),l)},function(){let e=s.cnc[s.tools.tool];e.diameter=c(e.mm,e.diameter)},function(){u(s.tools.engraver)},function(){u(s.tools.profile)},()=>a(re,s.subsettings.show=!s.subsettings.show,s),()=>a(re,s.subsettings.project=!s.subsettings.project,s),function(e){l.csv.contents[0][1]=e,ae.set(l)},function(e){l.csv.contents[0][5]=e,ae.set(l)},function(e){l.tools.engraver.engrave=e,ae.set(l)},function(e){s.units=e,re.set(s)},()=>a(re,s.subsettings.sheet=!s.subsettings.sheet,s),function(e){l.csv.contents[0][3]=e,ae.set(l)},function(e){s.material.width=e,re.set(s)},function(e){s.material.height=e,re.set(s)},function(e){s.material.thickness=e,re.set(s)},function(e){s.material.margins=e,re.set(s)},()=>a(re,s.subsettings.nest=!s.subsettings.nest,s),function(e){s.nestDirectionBottom=e,re.set(s)},function(e){s.nestTypeColumn=e,re.set(s)},function(){s.nestOrder=j(this),re.set(s)},()=>a(re,s.subsettings.profile=!s.subsettings.profile,s),function(){s.tools.profile=j(this),re.set(s)},function(e){l.tools.profile.cut_depth=e,ae.set(l)},function(e){l.tools.profile.min_size=e,ae.set(l)},function(e){l.tools.profile.link=e,ae.set(l)},()=>a(re,s.subsettings.engraver=!s.subsettings.engraver,s),function(){s.tools.engraver=j(this),re.set(s)},function(e){l.tools.engraver.cut_depth=e,ae.set(l)},function(e){l.tools.engraver.xStart=e,ae.set(l)},function(e){l.tools.engraver.yStart=e,ae.set(l)},function(e){l.tools.engraver.size=e,ae.set(l)},function(e){l.tools.engraver.spacing=e,ae.set(l)},()=>a(re,s.subsettings.library=!s.subsettings.library,s),function(){s.tools.tool=j(this),re.set(s)},function(e){s.cnc[s.tools.tool].diameter=e,re.set(s)},function(e){s.cnc[s.tools.tool].mm=e,re.set(s)},function(e){s.cnc[s.tools.tool].type=e,re.set(s)},function(e){s.cnc[s.tools.tool].spindle=e,re.set(s)},function(e){s.cnc[s.tools.tool].plunge=e,re.set(s)},function(e){s.cnc[s.tools.tool].ramp=e,re.set(s)},function(e){s.cnc[s.tools.tool].feed=e,re.set(s)},function(e){s.cnc[s.tools.tool].max_depth=e,re.set(s)},function(e){s.cnc[s.tools.tool].pass_depth=e,re.set(s)}]}class ht extends te{constructor(e){super(),ee(this,e,ut,ct,o,{},[-1,-1])}}let gt="widest";function ft(e,t){gt=t.nestOrder;let n=[],s=t.nestDirectionBottom,l=t.nestTypeColumn,o=t.cnc[t.tools.profile].diameter||.375,i={width:t.material.width||49,height:t.material.height||97,margins:t.material.margins||.25,max_width:()=>i.width-2*i.margins-o,max_height:()=>i.height-2*i.margins-o};return{sheets:function(e){let t=new wt;if(l){let n=function(e){let t=new wt;for(;e.notPlaced().length>0;){let n=a(e);t.push(new dt(n.columnWidth(),n.columnHeight(),n.totalArea(),n,gt))}return t}(e);for(;n.notPlaced().length>0;){let e=c(n);g(e),t.push(new $t(e.rowWidth(),e.rowHeight(),e.totalArea(),e.map((e=>e.group)).flatten(2),e,t.length+1,i))}}else{let n=function(e){let t=new wt;for(;e.notPlaced().length>0;){let n=r(e);t.push(new vt(n.rowWidth(),n.rowHeight(),n.totalArea(),n,gt))}return t}(e);for(;n.notPlaced().length>0;){let e=u(n);h(e),t.push(new $t(e.columnWidth(),e.columnHeight(),e.totalArea(),e.map((e=>e.group)).flatten(2),e,t.length+1,i))}}return t}(new wt(e.flatMap((e=>function([e,t,s,l]){return r();function r(){return s>i.max_width()||l>i.max_height()?(n.push(`Panneau ${e} est trop gros`),[]):s&&l&&t?a():[]}function a(n=0,i=[]){for(s+=o,l+=o;t>n++;){let o="";t>1&&(o=`${n} sur ${t}`),i.push([o,e,s,l,gt])}return i}}(e).map((e=>new mt(e)))))).flat()),errors:n};function r(e){let t=new wt(e.placementBy().place()),n=t[0].height;for(;e.fitsRow(t,i.max_width());){let s=new wt(e.fitsRow(t,i.max_width()).place());for(;e.fitsColumn(s,n);)s.push(e.fitsColumn(s,n).place());1===s.length?t.push(s[0]):t.push(s)}return t.ascendingHeight()}function a(e){let t=new wt(e.placementBy().place()),n=t[0].width;for(;e.fitsColumn(t,i.max_height());){let s=new wt(e.fitsColumn(t,i.max_height()).place());for(;e.fitsRow(s,n);)s.push(e.fitsRow(s,n).place());1===s.length?t.push(s[0]):t.push(s)}return t.ascendingWidth()}function c(e){let t=new wt(e.placementBy().place());for(;e.fitsSheetColumn(t,i.max_width());)t.push(e.fitsSheetColumn(t,i.max_width()).place());return t.ascendingHeight()}function u(e){let t=new wt(e.placementBy().place());for(;e.fitsSheetRow(t,i.max_height());)t.push(e.fitsSheetRow(t,i.max_height()).place());return t.ascendingWidth()}function h(e){let t=i.margins-o/2,n=new wt;e.forEach(((l,o)=>{0===o?n.push(s?t:i.height-t-l.height):n.push(s?n.last()+e[o-1].height:n.last()-l.height);let r=new wt;l.group.forEach(((s,l,i)=>{r.push(f(l)?t:r.last()+i[l-1].columnWidth());let a=f(o)&&e.length>1;s instanceof mt?(s.y=a?n[o]+e[o].height-s.height:n[o],s.x=r[l]):s.forEach(((t,i)=>{t.y=f(i)?a?n[o]+e[o].height-t.height:n[o]:a?s[i-1].y-t.height:s[i-1].y+s[i-1].height,t.x=r[l]}))}))}))}function g(e){let t=i.margins-o/2,n=new wt;e.forEach(((l,o)=>{0===o?n.push(t):n.push(n.last()+e[o-1].width);let r=new wt;l.group.forEach(((l,a,c)=>{r.push(f(a)?s?t:i.height-t-l.rowHeight():s?r.last()+c[a-1].rowHeight():r.last()-l.rowHeight());let u=f(o)&&e.length>1;l instanceof mt?(l.x=u?n[o]+e[o].width-l.width:n[o],l.y=r[a]):l.forEach(((t,i)=>{t.x=f(i)?u?n[o]+e[o].width-t.width:n[o]:u?l[i-1].x-t.width:l[i-1].x+l[i-1].width,t.y=s?r[a]:r[a-1]-t.height}))}))}))}function f(e){return 0===e}}class pt{constructor(e){this.placed=!1,this.nestOrder=e}place(){return this.placed=!0,this}}class mt extends pt{constructor([e,t,n,s,l]){super(l),this.nestOrder=l,this.quantityID=e,this.id=t,this.width=n,this.height=s,this.area=this.height*this.width,this.x=0,this.y=0}columnWidth(){return this.width}rowHeight(){return this.height}}class dt extends pt{constructor(e,t,n,s,l){super(l),this.width=e,this.height=t,this.area=n,this.group=s}}class vt extends dt{constructor(e,t,n,s,l){super(e,t,n,s,l)}}class $t extends dt{constructor(e,t,n,s,l,o,i){super(e,t,n,s),this.columns=l,this.sheet_width=i.width,this.sheet_height=i.height,this.sheet_area=i.width*i.height,this.waste_area=this.sheet_area-this.area,this.waste_ratio=1-this.area/this.sheet_area,this.id="Feuille "+o,delete this.placed}}class wt extends Array{first(){return this[0]}last(){return this[this.length-1]}flatten(e=1){let t=this;for(;e--;)t=t.flat();return t}ascendingWidth(){return new wt(...this).sort(((e,t)=>t.width!=e.width?t.width-e.width:t.height-e.height))}ascendingHeight(){return new wt(...this).sort(((e,t)=>t.height!=e.height?t.height-e.height:t.width-e.width))}notPlaced(){return this.filter((e=>!e.placed))}widest(){return this.notPlaced().ascendingWidth().first()}narrowest(){return this.notPlaced().ascendingWidth().last()}tallest(){return this.notPlaced().ascendingHeight().first()}shortest(){return this.notPlaced().ascendingHeight().last()}biggest(){return this.sort(((e,t)=>t.area-e.area)).notPlaced().first()}smallest(){return this.sort(((e,t)=>e.area-t.area)).notPlaced().first()}placementBy(){return{widest:this.widest(),tallest:this.tallest(),biggest:this.biggest()}[this.length?this[0].nestOrder:""]}totalWidth(){return this.reduce(((e,t)=>t instanceof wt?e+t.ascendingWidth().first().width:e+t.width),0)}totalHeight(){return this.reduce(((e,t)=>t instanceof wt?e+t.ascendingHeight().first().height:e+t.height),0)}totalArea(){return this.flatten(3).reduce(((e,t)=>e+t.area),0)}columnWidth(){return this.flat().ascendingWidth().first().width}columnHeight(){return this.totalHeight()}rowWidth(){return this.totalWidth()}rowHeight(){return this.flat().ascendingHeight().first().height}remainingWidth(e){return e-this.totalWidth()}remainingHeight(e){return e-this.totalHeight()}fitsColumn(e,t){return this.filter((t=>t.width<=e[0].width)).fitsSheetRow(e,t)}fitsRow(e,t){return this.filter((t=>t.height<=e[0].height)).fitsSheetColumn(e,t)}fitsSheetColumn(e,t){return this.notPlaced().filter((n=>n.width<e.remainingWidth(t))).placementBy()}fitsSheetRow(e,t){return this.notPlaced().filter((n=>n.height<e.remainingHeight(t))).placementBy()}}const xt={A:[[0,0],[0,1],[1,4],[2,1],[2,0],[2,1],[0,1]],B:[[0,0],[0,4],[1,4],[2,3],[1,2],[2,1],[1,0],[0,0]],C:[[2,1],[1,0],[0,1],[0,3],[1,4],[2,3]],D:[[0,0],[0,4],[1,4],[2,3],[2,1],[1,0],[0,0]],E:[[2,0],[0,0],[0,2],[1,2],[0,2],[0,4],[2,4]],F:[[0,0],[0,2],[1,2],[0,2],[0,4],[2,4]],G:[[1,2],[2,2],[2,1],[1,0],[0,1],[0,3],[1,4],[2,3]],H:[[0,0],[0,4],[0,2],[2,2],[2,4],[2,0]],I:[[0,0],[2,0],[1,0],[1,4],[0,4],[2,4]],J:[[0,1],[1,0],[2,1],[2,4],[1,4]],K:[[0,0],[0,4],[0,2],[1,2],[2,4],[1,2],[2,0]],L:[[2,1],[2,0],[0,0],[0,4]],M:[[0,0],[0,4],[1,2],[2,4],[2,0]],N:[[0,0],[0,4],[2,0],[2,4]],O:[[2,1],[1,0],[0,1],[0,3],[1,4],[2,3],[2,1]],P:[[0,0],[0,4],[1,4],[2,3],[1,2],[0,2]],Q:[[1,2],[2,1],[1,0],[0,1],[0,3],[1,4],[2,3],[2,1]],R:[[0,0],[0,4],[1,4],[2,3],[1,2],[2,0]],S:[[0,1],[1,0],[2,1],[0,3],[1,4],[2,3]],T:[[1,0],[1,4],[0,4],[2,4]],U:[[0,4],[0,1],[1,0],[2,1],[2,4]],V:[[0,4],[0,3],[1,0],[2,3],[2,4]],W:[[0,4],[0,0],[1,2],[2,0],[2,4]],X:[[0,0],[2,4],[1,2],[0,4],[2,0]],Y:[[1,0],[1,2],[0,4],[1,2],[2,4]],Z:[[2,0],[0,0],[2,4],[0,4]],1:[[0,0],[2,0],[1,0],[1,4],[0,3]],2:[[0,3],[1,4],[2,3],[0,0],[2,0]],3:[[0,1],[1,0],[2,1],[1,2],[2,3],[1,4],[0,3]],4:[[2,0],[2,4],[0,1],[2,1]],5:[[0,1],[1,0],[2,1],[2,2],[1,3],[0,2],[0,4],[2,4]],6:[[0,2],[1,2],[2,1],[1,0],[0,1],[0,3],[1,4],[2,3]],7:[[0,0],[2,4],[0,4],[0,3]],8:[[1,0],[0,1],[2,3],[1,4],[0,3],[2,1],[1,0]],9:[[0,1],[1,0],[2,1],[2,3],[1,4],[0,3],[1,2],[2,2]],0:[[0,1],[0,3],[1,4],[2,3],[2,1],[1,0],[0,1],[2,3]],"=":[[[0,1],[1,3],[2,3],[2,1],[0,1]]],"-":[[0,2],[2,2]],"[":[[0,1],[0,3],[1,3,"+"],[1,3,"-"],[2,3],[2,1],[1,1],[1,3]],"]":[[0,1],[0,3],[1,3],[1,1],[0,1],[2,1,"+"],[2,1,"-"],[2,3]],"'":[[0,1],[0,2],[2,2],[2,1],[0,1],[0,3,"+"],[0,3,"-"],[2,3]],",":[[0,1],[2,1],[2,2,"+"],[2,2,"-"],[0,2],[0,3],[2,3],[2,2]]};function yt(e,t){let n=9;const s=e.sheets,l="00",o="01",i=()=>t.cnc[n].feed,r=()=>t.cnc[n].plunge,a=t.material.width/2||30,c=Math.min(t.material.height+10,122),u=t.material.thickness+.25||2,h=t.material.thickness,g=he(Math.max(h-e.tools.profile.cut_depth,0)),f=t.cnc[n].pass_depth,p=g+e.tools.profile.link,m=e.tools.profile.min_size,d=t.tools.profile,v=e.tools.engraver.engrave,$=t.tools.engraver;let w=function(){let[,,,t,,n]=e.csv.contents[0];return`( ${pe(new Date,"dd.mm.yyyy HH:MM")} )\n( ${e.name} )\n`+(n?`( ${n} )\n`:"")+"( ------------------ )\nG40 G80 G70\n( ------------------ )\n"+`( ${s.length}: [] ${t||""} )\n`}();return s.forEach(((s,_,b)=>{w+=`( []: ${_+1} )\n`,v&&(w+=y($),s.columns.forEach(((n,s)=>{n.group.flat().sort(((e,n)=>bt(t.nestTypeColumn,e,n,s))).forEach((t=>w+=function({label:e,engravingDepth:t=.005,xStart:n=1,yStart:s=1,size:i=.3,spacing:r=.1,direction:a="ltr"}){return c();function c(){return t().map(((e,t)=>g(e,t))).join("");function t(){return n(e).split("")}function n(e){return e+"".toUpperCase().replace(/[^A-Z0-9\[\]\,\'\s\-\=]/gi,"")}}function g(e,c){if(c&&g()," "!==e)return`( ------------------ )\n( ${e} )\n`+f()+p();function g(){"ltr"===a?n+=r+i/2:s-=r+i}function f(){return xt[e].map((([e,t,n=""],s)=>s?x({x:m(e),y:d(t),z:v(n)}):x({g:l,x:m(e),y:d(t)})+x({g:o,z:v("-"),f:200}))).join("")}function p(){return x({g:l,z:u})}function m(e){return he(n+$(e))}function d(e){return he(s+$(e))}function v(e){return"+"===e?u:"-"===e?h-t:e}function $(e){return.25*e*i}}}({label:t.id,engravingDepth:e.tools.engraver.cut_depth,xStart:t.x+1,yStart:t.y+1,size:e.tools.engraver.size,spacing:e.tools.engraver.spacing,direction:e.tools.engraver.direction})))}))),w+=y(d),s.columns.forEach(((e,s)=>{e.group.flat().sort(((e,n)=>bt(t.nestTypeColumn,e,n,s))).forEach((e=>w+=function(e){const s=he(e.x),a=he(e.y),c=he(s+e.width),d=he(a+e.height),v=he(d-t.cnc[n].ramp);return`( ------------------ )\n( ${e.id} )\n`+x({x:s,y:v,z:u})+x({z:h+.005})+$()+x({g:l,z:u});function $(){const t=e=>x({g:o,y:d,z:e,f:r()})+x({x:c,f:i()})+x({y:a})+x({x:s})+x({y:e===g?d:v});let n=!1,l="",u=h,$=()=>u===g&&(e.width<m||e.height<m);for(;!n;)u=Math.max(u-f,g),$()&&(l+=t(p)),l+=t(u),u===g&&(n=!0);return l}}(e)))})),_!==b.length-1&&(w+="( ------------------ )\nM05 M104\n"+x({g:"90",x:a,y:c})+"M00\nM103 M03 G00\n( ------------------ )\n( CYCLE START :)\n")})),w+="( ------------------ )\nG40 G80 G91 G28 Z0 M5\nG90\n"+x({g:l,x:a,y:c})+"M30",w;function x({g:e="",x:t="",y:n="",z:s="",f:l=""}){return(""===e?e:`G${e} `)+(""===t?t:`X${_t(t)} `)+(""===n?n:`Y${_t(n)} `)+(""===s?s:`Z${_t(s)} `)+(""===l?l:"F"+l)+"\n"}function y(e){return n===e?"":(n=e,`( ------------------ )\nM05\nM06 T${n}\nG43 H${n}\nS${t.cnc[n].spindle} M03\nG54 G90 G00\n`)}}function _t(e){return/\./.test(e)||0===e?e:e.toFixed(1)}function bt(e,t,n,s){return e?s%2==0?n.y!==t.y?n.y-t.y:t.x-n.x:t.y!==n.y?t.y-n.y:n.x-t.x:s%2==0?t.x!==n.x?t.x-n.x:t.y-n.y:n.x!==t.x?n.x-t.x:n.y-t.y}function kt(e){let t;return{c(){t=f("div"),t.innerHTML='<div class="splash-img svelte-gujsac"></div> \n        <h1 class="svelte-gujsac"><span>Ahhh! Nest:</span></h1> \n        <h6 class="svelte-gujsac"><span>sauver une feuille, peut-être deux</span></h6>',w(t,"class","splash svelte-gujsac")},m(e,n){u(e,t,n)},d(e){e&&h(t)}}}function jt(e){let t,n,l,o,i,r,a,g,p,m,v,x,y,_,b,k;o=new _e({}),o.$on("update",e[2]),a=new ht({}),a.$on("update",e[2]),p=new Le({}),p.$on("update",e[2]),x=new Qe({});let j=!e[0].sheets.length&&kt();return{c(){t=d(),n=f("div"),l=f("div"),V(o.$$.fragment),i=d(),r=f("div"),V(a.$$.fragment),g=d(),V(p.$$.fragment),m=d(),v=f("div"),V(x.$$.fragment),y=d(),j&&j.c(),w(l,"class","import svelte-gujsac"),w(r,"class","controls svelte-gujsac"),w(v,"class","main svelte-gujsac"),w(n,"class","container svelte-gujsac")},m(s,h){u(s,t,h),u(s,n,h),c(n,l),Y(o,l,null),c(n,i),c(n,r),Y(a,r,null),c(r,g),Y(p,r,null),c(n,m),c(n,v),Y(x,v,null),c(v,y),j&&j.m(v,null),_=!0,b||(k=[$(document.body,"change",e[2]),$(v,"click",e[3])],b=!0)},p(e,[t]){e[0].sheets.length?j&&(j.d(1),j=null):j||(j=kt(),j.c(),j.m(v,null))},i(e){_||(J(o.$$.fragment,e),J(a.$$.fragment,e),J(p.$$.fragment,e),J(x.$$.fragment,e),_=!0)},o(e){K(o.$$.fragment,e),K(a.$$.fragment,e),K(p.$$.fragment,e),K(x.$$.fragment,e),_=!1},d(e){e&&h(t),e&&h(n),Z(o),Z(a),Z(p),Z(x),j&&j.d(),b=!1,s(k)}}}function St(e,t,n){let s,l;function o(){a(ae,s.name=s.csv.contents[0][1],s),a(ae,s.csv.panels=s.csv.contents.slice(s.csv.headerRows),s),function(){let e=ft(t(),l);function t(){return l.units?s.csv.panels.map((e=>[e[0],e[1],fe(e[2]),fe(e[3])])):s.csv.panels}a(ae,s.sheets=e.sheets,s),a(ae,s.errors=e.errors,s)}(),a(ae,s.csv.output=s.csv.contents.join("\n"),s),a(ae,s.cnc=yt(s,l),s)}i(e,ae,(e=>n(0,s=e))),i(e,re,(e=>n(1,l=e))),o();return[s,l,o,()=>a(re,l.show=!1,l)]}return new class extends te{constructor(e){super(),ee(this,e,St,jt,o,{})}}({target:document.body})}();
//# sourceMappingURL=app.js.map
