var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function s(e){e.forEach(t)}function l(e){return"function"==typeof e}function o(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function i(t,n,s){t.$$.on_destroy.push(function(t,...n){if(null==t)return e;const s=t.subscribe(...n);return s.unsubscribe?()=>s.unsubscribe():s}(n,s))}function r(e){return null==e?"":e}function a(e,t,n=t){return e.set(n),t}function c(e,t){e.appendChild(t)}function u(e,t,n){e.insertBefore(t,n||null)}function h(e){e.parentNode.removeChild(e)}function f(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function g(e){return document.createElement(e)}function m(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function p(e){return document.createTextNode(e)}function d(){return p(" ")}function v(){return p("")}function $(e,t,n,s){return e.addEventListener(t,n,s),()=>e.removeEventListener(t,n,s)}function w(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function x(e){return""===e?void 0:+e}function y(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function _(e,t){e.value=null==t?"":t}function b(e,t,n,s){e.style.setProperty(t,n,s?"important":"")}function k(e,t){for(let n=0;n<e.options.length;n+=1){const s=e.options[n];if(s.__value===t)return void(s.selected=!0)}}function j(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}function S(e,t,n){e.classList[n?"add":"remove"](t)}let P;function C(e){P=e}function M(){if(!P)throw new Error("Function called outside component initialization");return P}function H(){const e=M();return(t,n)=>{const s=e.$$.callbacks[t];if(s){const l=function(e,t){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}(t,n);s.slice().forEach((t=>{t.call(e,l)}))}}}const E=[],O=[],N=[],R=[],T=Promise.resolve();let z=!1;function B(e){N.push(e)}function W(e){R.push(e)}let q=!1;const A=new Set;function L(){if(!q){q=!0;do{for(let e=0;e<E.length;e+=1){const t=E[e];C(t),D(t.$$)}for(E.length=0;O.length;)O.pop()();for(let e=0;e<N.length;e+=1){const t=N[e];A.has(t)||(A.add(t),t())}N.length=0}while(E.length);for(;R.length;)R.pop()();z=!1,q=!1,A.clear()}}function D(e){if(null!==e.fragment){e.update(),s(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(B)}}const G=new Set;let I;function F(){I={r:0,c:[],p:I}}function U(){I.r||s(I.c),I=I.p}function Y(e,t){e&&e.i&&(G.delete(e),e.i(t))}function J(e,t,n,s){if(e&&e.o){if(G.has(e))return;G.add(e),I.c.push((()=>{G.delete(e),s&&(n&&e.d(1),s())})),e.o(t)}}function K(e,t,n){const s=e.$$.props[t];void 0!==s&&(e.$$.bound[s]=n,n(e.$$.ctx[s]))}function Q(e){e&&e.c()}function V(e,n,o){const{fragment:i,on_mount:r,on_destroy:a,after_update:c}=e.$$;i&&i.m(n,o),B((()=>{const n=r.map(t).filter(l);a?a.push(...n):s(n),e.$$.on_mount=[]})),c.forEach(B)}function X(e,t){const n=e.$$;null!==n.fragment&&(s(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Z(e,t){-1===e.$$.dirty[0]&&(E.push(e),z||(z=!0,T.then(L)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function ee(t,l,o,i,r,a,c=[-1]){const u=P;C(t);const f=l.props||{},g=t.$$={fragment:null,ctx:null,props:a,update:e,not_equal:r,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:[]),callbacks:n(),dirty:c,skip_bound:!1};let m=!1;if(g.ctx=o?o(t,f,((e,n,...s)=>{const l=s.length?s[0]:n;return g.ctx&&r(g.ctx[e],g.ctx[e]=l)&&(!g.skip_bound&&g.bound[e]&&g.bound[e](l),m&&Z(t,e)),n})):[],g.update(),m=!0,s(g.before_update),g.fragment=!!i&&i(g.ctx),l.target){if(l.hydrate){const e=function(e){return Array.from(e.childNodes)}(l.target);g.fragment&&g.fragment.l(e),e.forEach(h)}else g.fragment&&g.fragment.c();l.intro&&Y(t.$$.fragment),V(t,l.target,l.anchor),L()}C(u)}class te{$destroy(){X(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const ne=[];function se(t,n=e){let s;const l=[];function i(e){if(o(t,e)&&(t=e,s)){const e=!ne.length;for(let e=0;e<l.length;e+=1){const n=l[e];n[1](),ne.push(n,t)}if(e){for(let e=0;e<ne.length;e+=2)ne[e][0](ne[e+1]);ne.length=0}}}return{set:i,update:function(e){i(e(t))},subscribe:function(o,r=e){const a=[o,r];return l.push(a),1===l.length&&(s=n(i)||e),o(t),()=>{const e=l.indexOf(a);-1!==e&&l.splice(e,1),0===l.length&&(s(),s=null)}}}}const le={BETA3:"< update key to update settings",language:"fr"===(navigator.language.slice(0,2)||navigator.userLanguage.slice(0,2)).slice(0,2)?"fr":"en",material:{width:49,height:97,thickness:.75,margins:.3},nestTypeColumn:!1,nestOrder:"widest",nestDirectionBottom:!0,units:!1,tools:{profile:"9",engraver:"3",tool:"9"},cnc:{1:{type:"End mill",diameter:.1875,mm:!1,spindle:12e3,feed:150,plunge:100,ramp:1,max_depth:.875,pass_depth:.125,step_over:.125},2:{type:"End mill",diameter:.75,mm:!1,spindle:15e3,feed:200,plunge:75,ramp:5,max_depth:3,pass_depth:.25,step_over:.625},3:{type:"Ball-nose",diameter:.125,mm:!1,spindle:12e3,feed:50,plunge:50,ramp:1,max_depth:.75,pass_depth:.0625,step_over:.0625},4:{type:"Edge Finisher",diameter:.75,mm:!1,spindle:2e4,feed:75,plunge:30,ramp:4,max_depth:2.25,pass_depth:2.25,step_over:.05},5:{type:"Drill",diameter:5,mm:!0,spindle:8500,feed:0,plunge:75,ramp:0,max_depth:1,pass_depth:1,step_over:0},6:{type:"End mill",diameter:.25,mm:!1,spindle:18e3,feed:150,plunge:40,ramp:1,max_depth:1,pass_depth:.25,step_over:.2},7:{type:"Drill",diameter:8,mm:!0,spindle:8500,feed:0,plunge:75,ramp:0,max_depth:1,pass_depth:1,step_over:0},8:{type:"Surfacing",diameter:32,mm:!0,spindle:12e3,feed:200,plunge:30,ramp:5,max_depth:1,pass_depth:.125,step_over:0},9:{type:"End mill",diameter:.375,mm:!1,spindle:18e3,feed:400,plunge:70,ramp:1,max_depth:.875,pass_depth:.875,step_over:.3},10:{type:"End mill",diameter:.5,mm:!1,spindle:18e3,feed:400,plunge:70,ramp:1,max_depth:.875,pass_depth:.875,step_over:.4},11:{type:"Drill",diameter:10,mm:!0,spindle:18e3,feed:0,plunge:75,ramp:0,max_depth:1,pass_depth:1,step_over:0},12:{type:"V-groove",diameter:1.5,mm:!1,spindle:12e3,feed:75,plunge:30,ramp:1,max_depth:.75,pass_depth:.25,step_over:.125}},subsettings:{show:!1,project:!0,profile:!1,engraver:!1,library:!1,sheet:!1,nest:!0,offset:!1},activePanel:""},oe={en:[["Project","New","Material","Plywood","Project Info","doors"],["Borders","Top","Right","Bottom","Left"],[0,0,0,0,0],["Metric?",!1],["Panel","Quantity","Width","Height"],[1,0,0,0]],fr:[["Projét","Nouveau","Matèriaux","Plaquage","Modèle Portes",""],["Borders","haut","droit","bas","gauche"],[0,0,0,0,0],["Metrique?",!1],["Panneaux","Quantité","Largeur","Hauteur"],[1,0,0,0]]},ie={name:"",sheets:[],errors:[],offset:{X:0,Y:0,Z:0},tools:{engraver:{tool:3,engrave:!1,cut_depth:.005,xStart:1,yStart:1,size:.3,spacing:.1,direction:"ltr"},profile:{tool:9,cut_depth:.75,link:.02,min_size:12}},csv:{new:[...oe[le.language]],contents:[...oe[le.language]],panels:[],headerRows:5,output:""},svg:"",cnc:""},re=((e,t)=>{const n=e=>JSON.stringify(e,null,2);function s(){return JSON.parse(localStorage.getItem(e))}var l,o;localStorage.getItem(e)||localStorage.setItem(e,n(t)),l=s(),o=t,Object.keys(l).join()!==Object.keys(o).join()&&(console.log(s(),t),localStorage.setItem(e,n(t)));const{subscribe:i,set:r,update:a}=se(s());return{subscribe:i,set:t=>(localStorage.setItem(e,n(t)),r(t)),update:a}})("settings",le),ae=((e,t)=>{const n=e=>JSON.stringify(e,null,2);sessionStorage.getItem(e)||sessionStorage.setItem(e,n(t));const{subscribe:s,set:l,update:o}=se(JSON.parse(sessionStorage.getItem(e)));return{subscribe:s,set:t=>(sessionStorage.setItem(e,n(t)),l(t)),update:o}})("data",ie);function ce(e){return isNaN(e)?e.includes("/")&&!e.includes(".")?e.split(" ").filter((e=>""!==e)).reduce(((e,t)=>{if(t.includes("/")){let n=t.split("/").filter((e=>""!==e));return e+he(n[0]/n[1])}return e+he(t)}),0):e:he(e)}function ue(e,t){return Math.round(parseFloat(e)*10**t)/10**t}function he(e,t=5){return ue(e,t)}function fe(e){return he(25.4*e,3)}function ge(e){return he(e/25.4)}function me(e,t){const n=e=>("0"+e).slice(-2),s={mm:n(e.getMonth()+1),dd:n(e.getDate()),yy:e.getFullYear().toString().slice(-2),yyyy:e.getFullYear(),HH:n(e.getHours()),MM:n(e.getMinutes()),SS:n(e.getSeconds()),T:"T",h:"h"};return t.replace(/mm|dd|yyyy|yy|HH|MM|SS/gi,(e=>s[e]))}function pe(t){let n,s,l,o,i,r=(t[3].language.includes("fr")?t[1]:t[0])+"";return{c(){n=g("div"),s=g("div"),l=d(),o=g("div"),i=p(r),w(s,"class","pointer svelte-1pkt9tg"),w(o,"class","tip svelte-1pkt9tg"),w(n,"class","tooltip svelte-1pkt9tg"),S(n,"under",t[2])},m(e,t){u(e,n,t),c(n,s),c(n,l),c(n,o),c(o,i)},p(e,[t]){11&t&&r!==(r=(e[3].language.includes("fr")?e[1]:e[0])+"")&&y(i,r),4&t&&S(n,"under",e[2])},i:e,o:e,d(e){e&&h(n)}}}function de(e,t,n){let s;i(e,re,(e=>n(3,s=e)));let{english:l=""}=t,{french:o=""}=t,{under:r=!1}=t;return e.$$set=e=>{"english"in e&&n(0,l=e.english),"french"in e&&n(1,o=e.french),"under"in e&&n(2,r=e.under)},[l,o,r,s]}class ve extends te{constructor(e){super(),ee(this,e,de,pe,o,{english:0,french:1,under:2})}}function $e(t){let n,s,l,o,i;return{c(){n=g("div"),s=d(),l=g("div"),o=d(),i=g("div"),w(n,"class","file-icon dl-csv-block blocked svelte-1k162vj"),w(l,"class","file-icon dl-svg-block blocked svelte-1k162vj"),w(i,"class","file-icon dl-cnc-block blocked svelte-1k162vj")},m(e,t){u(e,n,t),u(e,s,t),u(e,l,t),u(e,o,t),u(e,i,t)},p:e,i:e,o:e,d(e){e&&h(n),e&&h(s),e&&h(l),e&&h(o),e&&h(i)}}}function we(e){let t,n,s,l,o,i,r,a,c,f,m,p,v,$,x;return n=new ve({props:{french:"téléchargez le fichier .csv  (alt + v)",english:"download .csv file (alt + v)"}}),r=new ve({props:{french:"telechargez le fichier .svg (alt + g)",english:"download .svg file (alt + g)"}}),p=new ve({props:{french:"ntelechargez le fichier .cnc (alt + c)",english:"download .cnc file (alt + c)"}}),{c(){t=g("a"),Q(n.$$.fragment),o=d(),i=g("a"),Q(r.$$.fragment),f=d(),m=g("a"),Q(p.$$.fragment),w(t,"href",s="data:text/plain;charset=utf-8,"+encodeURIComponent(e[5].csv.output)),w(t,"download",l=e[5].name+e[6]()+".csv"),w(t,"role","button"),w(t,"class","file-icon dl-csv svelte-1k162vj"),w(i,"href",a="data:text/plain;charset=utf-8,"+encodeURIComponent(e[5].svg)),w(i,"download",c=e[5].name+e[6]()+".svg"),w(i,"alt","download svg file"),w(i,"role","button"),w(i,"class","file-icon dl-svg svelte-1k162vj"),w(m,"href",v="data:text/plain;charset=utf-8,"+encodeURIComponent(e[5].cnc)),w(m,"download",$=e[5].name+e[6]()+".cnc"),w(m,"role","button"),w(m,"class","file-icon dl-cnc svelte-1k162vj")},m(s,l){u(s,t,l),V(n,t,null),e[13](t),u(s,o,l),u(s,i,l),V(r,i,null),e[14](i),u(s,f,l),u(s,m,l),V(p,m,null),e[15](m),x=!0},p(e,n){(!x||32&n&&s!==(s="data:text/plain;charset=utf-8,"+encodeURIComponent(e[5].csv.output)))&&w(t,"href",s),(!x||32&n&&l!==(l=e[5].name+e[6]()+".csv"))&&w(t,"download",l),(!x||32&n&&a!==(a="data:text/plain;charset=utf-8,"+encodeURIComponent(e[5].svg)))&&w(i,"href",a),(!x||32&n&&c!==(c=e[5].name+e[6]()+".svg"))&&w(i,"download",c),(!x||32&n&&v!==(v="data:text/plain;charset=utf-8,"+encodeURIComponent(e[5].cnc)))&&w(m,"href",v),(!x||32&n&&$!==($=e[5].name+e[6]()+".cnc"))&&w(m,"download",$)},i(e){x||(Y(n.$$.fragment,e),Y(r.$$.fragment,e),Y(p.$$.fragment,e),x=!0)},o(e){J(n.$$.fragment,e),J(r.$$.fragment,e),J(p.$$.fragment,e),x=!1},d(s){s&&h(t),X(n),e[13](null),s&&h(o),s&&h(i),X(r),e[14](null),s&&h(f),s&&h(m),X(p),e[15](null)}}}function xe(e){let t,n,l,o,i,r,a,f,m,p,v,x,y,_,b,k,j;document.title=t="Ahhh Nest: "+e[5].csv.contents[0][1]||"Ahhh! Nest",a=new ve({props:{french:"ouvrir fichier .csv (alt + o)",english:"open .csv file (alt + o)"}}),v=new ve({props:{french:"nouveau fichier (alt + n)",english:"new file (alt + n)"}});const S=[we,$e],P=[];function C(e,t){return e[5].sheets.length?0:1}return y=C(e),_=P[y]=S[y](e),{c(){n=d(),l=g("div"),o=g("input"),i=d(),r=g("label"),Q(a.$$.fragment),m=d(),p=g("div"),Q(v.$$.fragment),x=d(),_.c(),w(o,"class","inputfile svelte-1k162vj"),w(o,"name","file"),w(o,"id","file"),w(o,"type","file"),w(r,"for","file"),w(r,"class",f="file-icon "+(e[0]?"badfile":"upload")+" svelte-1k162vj"),w(p,"tabindex","0"),w(p,"role","button"),w(p,"class","file-icon new svelte-1k162vj"),w(l,"class","file-mgmt svelte-1k162vj")},m(t,s){u(t,n,s),u(t,l,s),c(l,o),e[11](o),c(l,i),c(l,r),V(a,r,null),c(l,m),c(l,p),V(v,p,null),c(l,x),P[y].m(l,null),b=!0,k||(j=[$(window,"keydown",e[7]),$(window,"keyup",e[8]),$(o,"change",e[10]),$(r,"mouseover",e[12]),$(p,"click",e[9])],k=!0)},p(e,[n]){(!b||32&n)&&t!==(t="Ahhh Nest: "+e[5].csv.contents[0][1]||"Ahhh! Nest")&&(document.title=t),(!b||1&n&&f!==(f="file-icon "+(e[0]?"badfile":"upload")+" svelte-1k162vj"))&&w(r,"class",f);let s=y;y=C(e),y===s?P[y].p(e,n):(F(),J(P[s],1,1,(()=>{P[s]=null})),U(),_=P[y],_||(_=P[y]=S[y](e),_.c()),Y(_,1),_.m(l,null))},i(e){b||(Y(a.$$.fragment,e),Y(v.$$.fragment,e),Y(_),b=!0)},o(e){J(a.$$.fragment,e),J(v.$$.fragment,e),J(_),b=!1},d(t){t&&h(n),t&&h(l),e[11](null),X(a),X(v),P[y].d(),k=!1,s(j)}}}function ye(e,t,n){let s,l;i(e,re,(e=>n(17,s=e))),i(e,ae,(e=>n(5,l=e)));const o=H();let r,c,u,h,f=!1,g={};function m(){a(re,s.units=JSON.parse(l.csv.contents[3][1]),s),o("update")}function p(){a(ae,l.csv.contents=[...l.csv.new],l),m(),o("name")}return[f,r,c,u,h,l,()=>me(new Date,"-HHhMM"),function(e){g[e.code]=!0;const t=e=>(g.AltLeft||g.AltRight)&&g[e];t("KeyO")&&setTimeout((()=>file.click()),140),t("KeyN")&&p(),t("KeyV")&&r.click(),t("KeyG")&&c.click(),t("KeyC")&&u.click(),t("KeyP")&&a(re,s.subsettings.show=!s.subsettings.show,s)},function(e){delete g[e.code]},p,function(){if(h.files[0]){if(h.files[0].name.includes(".csv")){let e=new FileReader;e.readAsText(h.files[0]),e.onload=function(e){a(ae,l.csv.contents=function(e,t=1,n=","){for(var s=new RegExp("(\\"+n+'|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\'+n+"\\r\\n]*))","gi"),l=[[]],o=null;o=s.exec(e);){var i=o[1];if(i.length&&i!=n&&l.push([]),o[2])var r=o[2].replace(new RegExp('""',"g"),'"');else r=o[3];/\d/.test(r)&&(r=ce(r)),l[l.length-1].push(r)}return l.filter(((e,n)=>n<t||e.filter((e=>""!==e)).length))}(e.target.result,l.csv.headerRows),l),n(0,f=!1),m()}}n(0,f=!0)}},function(e){O[e?"unshift":"push"]((()=>{h=e,n(4,h)}))},()=>n(0,f=!1),function(e){O[e?"unshift":"push"]((()=>{r=e,n(1,r)}))},function(e){O[e?"unshift":"push"]((()=>{c=e,n(2,c)}))},function(e){O[e?"unshift":"push"]((()=>{u=e,n(3,u)}))}]}class _e extends te{constructor(e){super(),ee(this,e,ye,xe,o,{})}}function be(t){let n,l,o,i,r,a,f=(t[3].language.includes("fr")?t[2]:t[1])+"";return{c(){n=g("h5"),l=p(f),o=p(":\n  "),i=g("input"),w(i,"type","text"),w(i,"class","svelte-1k7s5l6"),w(n,"class","svelte-1k7s5l6")},m(e,s){u(e,n,s),c(n,l),c(n,o),c(n,i),_(i,t[0]),r||(a=[$(i,"click",ke),$(i,"input",t[4])],r=!0)},p(e,[t]){14&t&&f!==(f=(e[3].language.includes("fr")?e[2]:e[1])+"")&&y(l,f),1&t&&i.value!==e[0]&&_(i,e[0])},i:e,o:e,d(e){e&&h(n),r=!1,s(a)}}}function ke(){this.select()}function je(e,t,n){let s;i(e,re,(e=>n(3,s=e)));let{value:l}=t,{english:o=""}=t,{french:r=""}=t;return e.$$set=e=>{"value"in e&&n(0,l=e.value),"english"in e&&n(1,o=e.english),"french"in e&&n(2,r=e.french)},[l,o,r,s,function(){l=this.value,n(0,l)}]}class Se extends te{constructor(e){super(),ee(this,e,je,be,o,{value:0,english:1,french:2})}}function Pe(t){let n,l,o,i,r,a,f,m,v,x,_,b=(t[6].language.includes("fr")?t[5]:t[4])+"";return{c(){n=g("h5"),l=p(b),o=p(t[3]),i=d(),r=g("label"),a=g("input"),f=d(),m=g("div"),w(a,"type","checkbox"),w(a,"class","svelte-13h5iuk"),w(m,"class","slider svelte-13h5iuk"),w(m,"data-content",v=t[0]?t[1]:t[2]),w(r,"class","switch svelte-13h5iuk"),w(n,"class","svelte-13h5iuk")},m(e,s){u(e,n,s),c(n,l),c(n,o),c(n,i),c(n,r),c(r,a),a.checked=t[0],c(r,f),c(r,m),x||(_=[$(a,"click",t[7]),$(a,"change",t[8])],x=!0)},p(e,[t]){112&t&&b!==(b=(e[6].language.includes("fr")?e[5]:e[4])+"")&&y(l,b),8&t&&y(o,e[3]),1&t&&(a.checked=e[0]),7&t&&v!==(v=e[0]?e[1]:e[2])&&w(m,"data-content",v)},i:e,o:e,d(e){e&&h(n),x=!1,s(_)}}}function Ce(e,t,n){let s;i(e,re,(e=>n(6,s=e)));const l=H();let{checked:o}=t,{on:r}=t,{off:a}=t,{separator:c=":"}=t,{english:u=""}=t,{french:h=""}=t;return e.$$set=e=>{"checked"in e&&n(0,o=e.checked),"on"in e&&n(1,r=e.on),"off"in e&&n(2,a=e.off),"separator"in e&&n(3,c=e.separator),"english"in e&&n(4,u=e.english),"french"in e&&n(5,h=e.french)},[o,r,a,c,u,h,s,function(){l("toggle")},function(){o=this.checked,n(0,o)}]}class Me extends te{constructor(e){super(),ee(this,e,Ce,Pe,o,{checked:0,on:1,off:2,separator:3,english:4,french:5})}}function He(t){let n,l,o,i,r,a,f,m,v,x,_,b=(t[4].language.includes("fr")?t[2]:t[1])+"",k=t[0]?"⩓":"⩔";return{c(){n=g("div"),l=g("h3"),o=g("span"),i=p(t[3]),r=d(),a=p(b),f=d(),m=g("span"),v=p(k),w(o,"class","svelte-l11dgs"),w(l,"class","svelte-l11dgs"),w(m,"class","end svelte-l11dgs"),w(n,"class","drop svelte-l11dgs"),S(n,"open",t[0])},m(e,s){u(e,n,s),c(n,l),c(l,o),c(o,i),c(l,r),c(l,a),c(n,f),c(n,m),c(m,v),x||(_=[$(n,"click",t[5]),$(n,"focus",t[6])],x=!0)},p(e,[t]){8&t&&y(i,e[3]),22&t&&b!==(b=(e[4].language.includes("fr")?e[2]:e[1])+"")&&y(a,b),1&t&&k!==(k=e[0]?"⩓":"⩔")&&y(v,k),1&t&&S(n,"open",e[0])},i:e,o:e,d(e){e&&h(n),x=!1,s(_)}}}function Ee(e,t,n){let s;i(e,re,(e=>n(4,s=e)));const l=H();let{open:o}=t,{english:r=""}=t,{french:a=""}=t,{icon:c=""}=t;return e.$$set=e=>{"open"in e&&n(0,o=e.open),"english"in e&&n(1,r=e.english),"french"in e&&n(2,a=e.french),"icon"in e&&n(3,c=e.icon)},[o,r,a,c,s,function(){l("toggle")},function(){l("focused")}]}class Oe extends te{constructor(e){super(),ee(this,e,Ee,He,o,{open:0,english:1,french:2,icon:3})}}function Ne(e,t,n){const s=e.slice();return s[19]=t[n],s[20]=t,s[21]=n,s}function Re(e,t,n){const s=e.slice();return s[22]=t[n],s}function Te(e){let t,n,s,l,o,i,r=e[1].errors.length>1?"S":"",a=e[1].errors,m=[];for(let t=0;t<a.length;t+=1)m[t]=ze(Re(e,a,t));return{c(){t=g("h5"),n=p("ERROR"),s=p(r),l=p(":"),o=d();for(let e=0;e<m.length;e+=1)m[e].c();i=v(),w(t,"class","error svelte-jpjmaq")},m(e,r){u(e,t,r),c(t,n),c(t,s),c(t,l),u(e,o,r);for(let t=0;t<m.length;t+=1)m[t].m(e,r);u(e,i,r)},p(e,t){if(2&t&&r!==(r=e[1].errors.length>1?"S":"")&&y(s,r),2&t){let n;for(a=e[1].errors,n=0;n<a.length;n+=1){const s=Re(e,a,n);m[n]?m[n].p(s,t):(m[n]=ze(s),m[n].c(),m[n].m(i.parentNode,i))}for(;n<m.length;n+=1)m[n].d(1);m.length=a.length}},d(e){e&&h(t),e&&h(o),f(m,e),e&&h(i)}}}function ze(e){let t,n,s=e[22]+"";return{c(){t=g("p"),n=p(s),w(t,"class","svelte-jpjmaq")},m(e,s){u(e,t,s),c(t,n)},p(e,t){2&t&&s!==(s=e[22]+"")&&y(n,s)},d(e){e&&h(t)}}}function Be(e){let t,n,l,o,i,a,f,m,p,v,y,b,k,j,S,P,C,M,H,E,O,N,R,T,z,B,W,q;function A(){e[11].call(l,e[20],e[21])}function L(){e[12].call(m,e[20],e[21])}function D(){e[13].call(k,e[20],e[21])}function G(){e[14].call(E,e[20],e[21])}function I(...t){return e[15](e[19],...t)}return i=new ve({props:{under:!0,french:"Nom de panneau",english:"Panel Name"}}),v=new ve({props:{under:!0,french:"Quantité",english:"Quantity"}}),C=new ve({props:{under:!0,french:"Largeur ("+(e[0]?"mm":"po")+")",english:"Width ("+(e[0]?"mm":"in")+")"}}),T=new ve({props:{under:!0,french:"Hauteur ("+(e[0]?"mm":"po")+")",english:"Height ("+(e[0]?"mm":"in")+")"}}),{c(){t=g("ul"),n=g("li"),l=g("input"),o=d(),Q(i.$$.fragment),a=d(),f=g("li"),m=g("input"),p=d(),Q(v.$$.fragment),y=d(),b=g("li"),k=g("input"),P=d(),Q(C.$$.fragment),M=d(),H=g("li"),E=g("input"),R=d(),Q(T.$$.fragment),w(l,"type","text"),w(l,"class","svelte-jpjmaq"),w(n,"class","svelte-jpjmaq"),w(m,"type","number"),w(m,"min","0"),w(m,"max","100"),w(m,"class","svelte-jpjmaq"),w(f,"class","svelte-jpjmaq"),w(k,"type","number"),w(k,"min","0"),w(k,"max",j=e[2]("width")),w(k,"step",S=e[0]?.25:.03125),w(k,"class","svelte-jpjmaq"),w(b,"class","svelte-jpjmaq"),w(E,"type","number"),w(E,"min","0"),w(E,"max",O=e[2]("height")),w(E,"step",N=e[0]?.25:.03125),w(E,"class","svelte-jpjmaq"),w(H,"class","svelte-jpjmaq"),w(t,"class",z=r(e[3].activePanel==e[19][0]?"active":"")+" svelte-jpjmaq")},m(s,r){u(s,t,r),c(t,n),c(n,l),_(l,e[19][0]),c(n,o),V(i,n,null),c(t,a),c(t,f),c(f,m),_(m,e[19][1]),c(f,p),V(v,f,null),c(t,y),c(t,b),c(b,k),_(k,e[19][2]),c(b,P),V(C,b,null),c(t,M),c(t,H),c(H,E),_(E,e[19][3]),c(H,R),V(T,H,null),B=!0,W||(q=[$(l,"input",A),$(l,"focus",qe),$(m,"input",L),$(m,"focus",qe),$(k,"input",D),$(k,"focus",qe),$(E,"input",G),$(E,"focus",qe),$(t,"mouseenter",I),$(t,"mouseleave",e[16])],W=!0)},p(n,s){e=n,2&s&&l.value!==e[19][0]&&_(l,e[19][0]),2&s&&x(m.value)!==e[19][1]&&_(m,e[19][1]),(!B||4&s&&j!==(j=e[2]("width")))&&w(k,"max",j),(!B||1&s&&S!==(S=e[0]?.25:.03125))&&w(k,"step",S),2&s&&x(k.value)!==e[19][2]&&_(k,e[19][2]);const o={};1&s&&(o.french="Largeur ("+(e[0]?"mm":"po")+")"),1&s&&(o.english="Width ("+(e[0]?"mm":"in")+")"),C.$set(o),(!B||4&s&&O!==(O=e[2]("height")))&&w(E,"max",O),(!B||1&s&&N!==(N=e[0]?.25:.03125))&&w(E,"step",N),2&s&&x(E.value)!==e[19][3]&&_(E,e[19][3]);const i={};1&s&&(i.french="Hauteur ("+(e[0]?"mm":"po")+")"),1&s&&(i.english="Height ("+(e[0]?"mm":"in")+")"),T.$set(i),(!B||10&s&&z!==(z=r(e[3].activePanel==e[19][0]?"active":"")+" svelte-jpjmaq"))&&w(t,"class",z)},i(e){B||(Y(i.$$.fragment,e),Y(v.$$.fragment,e),Y(C.$$.fragment,e),Y(T.$$.fragment,e),B=!0)},o(e){J(i.$$.fragment,e),J(v.$$.fragment,e),J(C.$$.fragment,e),J(T.$$.fragment,e),B=!1},d(e){e&&h(t),X(i),X(v),X(C),X(T),W=!1,s(q)}}}function We(e){let t,n,l,o,i,r,a,m,v,x,y,_,b,k,j,S,P,C,M,H,E,O,N,R,T,z,B,W,q,A=e[1].errors.length&&Te(e);m=new ve({props:{under:!0,french:"Nom de panneau",english:"Panel Name"}}),b=new ve({props:{under:!0,french:"Quantité",english:"Quantity"}}),C=new ve({props:{under:!0,french:"Largeur ("+(e[0]?"mm":"po")+")",english:"Width ("+(e[0]?"mm":"in")+")"}}),N=new ve({props:{under:!0,french:"Hauteur ("+(e[0]?"mm":"po")+")",english:"Height ("+(e[0]?"mm":"in")+")"}});let L=e[1].csv.panels,D=[];for(let t=0;t<L.length;t+=1)D[t]=Be(Ne(e,L,t));const G=e=>J(D[e],1,1,(()=>{D[e]=null}));return{c(){t=g("div"),n=g("div"),A&&A.c(),l=d(),o=g("ul"),i=g("li"),r=g("h1"),a=p("⊛\n          "),Q(m.$$.fragment),v=d(),x=g("li"),y=g("h1"),_=p("⧉\n          "),Q(b.$$.fragment),k=d(),j=g("li"),S=g("h1"),P=p("⍈\n          "),Q(C.$$.fragment),M=d(),H=g("li"),E=g("h1"),O=p("⍗\n          "),Q(N.$$.fragment),R=d();for(let e=0;e<D.length;e+=1)D[e].c();T=d(),z=g("ul"),z.textContent="+",w(i,"class","svelte-jpjmaq"),w(x,"class","svelte-jpjmaq"),w(j,"class","svelte-jpjmaq"),w(H,"class","svelte-jpjmaq"),w(o,"class","header svelte-jpjmaq"),w(z,"class","new-row svelte-jpjmaq"),w(z,"role","button"),w(n,"class","svelte-jpjmaq"),w(t,"class","wrapper svelte-jpjmaq")},m(s,h){u(s,t,h),c(t,n),A&&A.m(n,null),c(n,l),c(n,o),c(o,i),c(i,r),c(r,a),V(m,r,null),c(o,v),c(o,x),c(x,y),c(y,_),V(b,y,null),c(o,k),c(o,j),c(j,S),c(S,P),V(C,S,null),c(o,M),c(o,H),c(H,E),c(E,O),V(N,E,null),c(n,R);for(let e=0;e<D.length;e+=1)D[e].m(n,null);c(n,T),c(n,z),B=!0,W||(q=[$(i,"click",e[7]),$(x,"click",e[8]),$(j,"click",e[9]),$(H,"click",e[10]),$(z,"click",e[4])],W=!0)},p(e,[t]){e[1].errors.length?A?A.p(e,t):(A=Te(e),A.c(),A.m(n,l)):A&&(A.d(1),A=null);const s={};1&t&&(s.french="Largeur ("+(e[0]?"mm":"po")+")"),1&t&&(s.english="Width ("+(e[0]?"mm":"in")+")"),C.$set(s);const o={};if(1&t&&(o.french="Hauteur ("+(e[0]?"mm":"po")+")"),1&t&&(o.english="Height ("+(e[0]?"mm":"in")+")"),N.$set(o),15&t){let s;for(L=e[1].csv.panels,s=0;s<L.length;s+=1){const l=Ne(e,L,s);D[s]?(D[s].p(l,t),Y(D[s],1)):(D[s]=Be(l),D[s].c(),Y(D[s],1),D[s].m(n,T))}for(F(),s=L.length;s<D.length;s+=1)G(s);U()}},i(e){if(!B){Y(m.$$.fragment,e),Y(b.$$.fragment,e),Y(C.$$.fragment,e),Y(N.$$.fragment,e);for(let e=0;e<L.length;e+=1)Y(D[e]);B=!0}},o(e){J(m.$$.fragment,e),J(b.$$.fragment,e),J(C.$$.fragment,e),J(N.$$.fragment,e),D=D.filter(Boolean);for(let e=0;e<D.length;e+=1)J(D[e]);B=!1},d(e){e&&h(t),A&&A.d(),X(m),X(b),X(C),X(N),f(D,e),W=!1,s(q)}}}function qe(){this.select()}function Ae(e,t,n){let s,l;i(e,ae,(e=>n(1,s=e))),i(e,re,(e=>n(3,l=e)));const o=H();function r(e){a(ae,s.csv.panels=s.csv.panels.sort(((t,n)=>t[e]-n[e])),s)}function c(e){a(ae,s.csv.panels=s.csv.panels.sort(((t,n)=>n[e]-t[e])),s)}let u,h;return e.$$.update=()=>{2&e.$$.dirty&&n(0,u=JSON.parse(s.csv.contents[3][1])),9&e.$$.dirty&&n(2,h=e=>{let t=l.material[e]-2*l.material.margins;return u?fe(t):t})},[u,s,h,l,function(){let e=[s.csv.panels.length+1,0,0,0];a(ae,s.csv.contents=[...s.csv.contents,e],s),o("update")},r,c,()=>r(0),()=>c(1),()=>c(2),()=>c(3),function(e,t){e[t][0]=this.value},function(e,t){e[t][1]=x(this.value)},function(e,t){e[t][2]=x(this.value)},function(e,t){e[t][3]=x(this.value)},e=>a(re,l.activePanel=e[0],l),()=>a(re,l.activePanel="",l)]}class Le extends te{constructor(e){super(),ee(this,e,Ae,We,o,{})}}function De(e,t,n){const s=e.slice();return s[18]=t[n],s}function Ge(e,t,n){const s=e.slice();return s[15]=t[n],s[17]=n,s}function Ie(e){let t,n,s,l,o,i,r,a,f,m,v,$,x,_,k,j,S,P,C,M,H=e[5].sheets[e[0]].id+"",E=ue(e[5].sheets[e[0]].area/144,2)+"",O=ue(e[5].sheets[e[0]].waste_area/144,2)+"",N=ue(100*e[5].sheets[e[0]].waste_ratio,2)+"";return{c(){t=g("div"),n=g("h4"),s=p(H),l=d(),o=g("p"),i=p("area des panneaux:\n      "),r=p(E),a=p("\n      pi"),f=g("sup"),f.textContent="2",m=d(),v=g("p"),$=p("area de perte:\n      "),x=p(O),_=p("\n      pi"),k=g("sup"),k.textContent="2",j=d(),S=g("p"),P=p("% de perte: "),C=p(N),M=p("%"),w(f,"class","svelte-98uac4"),w(k,"class","svelte-98uac4"),w(t,"class","infocard svelte-98uac4"),b(t,"left",e[3]+"px"),b(t,"top",e[2]+"px")},m(e,h){u(e,t,h),c(t,n),c(n,s),c(t,l),c(t,o),c(o,i),c(o,r),c(o,a),c(o,f),c(t,m),c(t,v),c(v,$),c(v,x),c(v,_),c(v,k),c(t,j),c(t,S),c(S,P),c(S,C),c(S,M)},p(e,n){33&n&&H!==(H=e[5].sheets[e[0]].id+"")&&y(s,H),33&n&&E!==(E=ue(e[5].sheets[e[0]].area/144,2)+"")&&y(r,E),33&n&&O!==(O=ue(e[5].sheets[e[0]].waste_area/144,2)+"")&&y(x,O),33&n&&N!==(N=ue(100*e[5].sheets[e[0]].waste_ratio,2)+"")&&y(C,N),8&n&&b(t,"left",e[3]+"px"),4&n&&b(t,"top",e[2]+"px")},d(e){e&&h(t)}}}function Fe(e){let t,n,l,o,i,r,a,f,g,d,v,x,_,k,j=e[18].id+"";return{c(){t=m("rect"),f=m("text"),g=p(j),b(t,"stroke-width",e[6].cnc[e[6].tools.profile].diameter*e[7]+"px"),w(t,"class",n="panel "+(e[6].activePanel==e[18].id?"active":"")+" print svelte-98uac4"),w(t,"id",l=e[18].id),w(t,"x",o=(e[18].x+e[13](e[17]).x)*e[7]),w(t,"y",i=(e[12](e[18].y,e[18].height)+e[13](e[17]).y)*e[7]),w(t,"width",r=e[18].width*e[7]),w(t,"height",a=e[18].height*e[7]),b(f,"font-size",e[7]*(e[18].id.length>6?Math.min(.4*e[18].height,2.5):Math.min(.8*e[18].height,5))+"px"),w(f,"class",d="id "+(e[6].activePanel==e[18].id?"active":"")+" print svelte-98uac4"),w(f,"x",v=(e[18].x+e[13](e[17]).x+e[18].width/2)*e[7]),w(f,"y",x=(e[12](e[18].y,e[18].height)+e[13](e[17]).y+Math.min(.8*e[18].height,5)/3+e[18].height/2)*e[7])},m(n,s){u(n,t,s),u(n,f,s),c(f,g),_||(k=[$(t,"mouseover",e[8]),$(t,"mouseleave",e[9])],_=!0)},p(e,s){64&s&&b(t,"stroke-width",e[6].cnc[e[6].tools.profile].diameter*e[7]+"px"),96&s&&n!==(n="panel "+(e[6].activePanel==e[18].id?"active":"")+" print svelte-98uac4")&&w(t,"class",n),32&s&&l!==(l=e[18].id)&&w(t,"id",l),32&s&&o!==(o=(e[18].x+e[13](e[17]).x)*e[7])&&w(t,"x",o),32&s&&i!==(i=(e[12](e[18].y,e[18].height)+e[13](e[17]).y)*e[7])&&w(t,"y",i),32&s&&r!==(r=e[18].width*e[7])&&w(t,"width",r),32&s&&a!==(a=e[18].height*e[7])&&w(t,"height",a),32&s&&j!==(j=e[18].id+"")&&y(g,j),32&s&&b(f,"font-size",e[7]*(e[18].id.length>6?Math.min(.4*e[18].height,2.5):Math.min(.8*e[18].height,5))+"px"),96&s&&d!==(d="id "+(e[6].activePanel==e[18].id?"active":"")+" print svelte-98uac4")&&w(f,"class",d),32&s&&v!==(v=(e[18].x+e[13](e[17]).x+e[18].width/2)*e[7])&&w(f,"x",v),32&s&&x!==(x=(e[12](e[18].y,e[18].height)+e[13](e[17]).y+Math.min(.8*e[18].height,5)/3+e[18].height/2)*e[7])&&w(f,"y",x)},d(e){e&&h(t),e&&h(f),_=!1,s(k)}}}function Ue(e){let t,n,l,o,i,r,a,g,p,d,v=e[15].group,x=[];for(let t=0;t<v.length;t+=1)x[t]=Fe(De(e,v,t));return{c(){t=m("g"),n=m("rect"),g=m("g");for(let e=0;e<x.length;e+=1)x[e].c();b(n,"stroke-width",e[6].material.margins*e[7]+"px"),w(n,"class","sheet print svelte-98uac4"),w(n,"id",l=e[17]),w(n,"x",o=(e[13](e[17]).x+e[6].material.margins/2-e[5].offset.X)*e[7]),w(n,"y",i=(e[13](e[17]).y+e[6].material.margins/2+e[5].offset.Y)*e[7]),w(n,"width",r=(e[15].sheet_width-e[6].material.margins)*e[7]),w(n,"height",a=(e[15].sheet_height-e[6].material.margins)*e[7]),w(t,"id","sheets"),w(g,"id","panels")},m(s,l){u(s,t,l),c(t,n),u(s,g,l);for(let e=0;e<x.length;e+=1)x[e].m(g,null);p||(d=[$(n,"mouseover",e[10]),$(n,"mouseleave",e[11])],p=!0)},p(e,t){if(64&t&&b(n,"stroke-width",e[6].material.margins*e[7]+"px"),96&t&&o!==(o=(e[13](e[17]).x+e[6].material.margins/2-e[5].offset.X)*e[7])&&w(n,"x",o),96&t&&i!==(i=(e[13](e[17]).y+e[6].material.margins/2+e[5].offset.Y)*e[7])&&w(n,"y",i),96&t&&r!==(r=(e[15].sheet_width-e[6].material.margins)*e[7])&&w(n,"width",r),96&t&&a!==(a=(e[15].sheet_height-e[6].material.margins)*e[7])&&w(n,"height",a),13280&t){let n;for(v=e[15].group,n=0;n<v.length;n+=1){const s=De(e,v,n);x[n]?x[n].p(s,t):(x[n]=Fe(s),x[n].c(),x[n].m(g,null))}for(;n<x.length;n+=1)x[n].d(1);x.length=v.length}},d(e){e&&h(t),e&&h(g),f(x,e),p=!1,s(d)}}}function Ye(t){let n,s,l,o,i,r,a,v=t[1]&&Ie(t),$=t[5].sheets,x=[];for(let e=0;e<$.length;e+=1)x[e]=Ue(Ge(t,$,e));return{c(){v&&v.c(),n=d(),s=g("div"),l=m("svg");for(let e=0;e<x.length;e+=1)x[e].c();o=p(">"),w(l,"class","print svelte-98uac4"),w(l,"version","1.1"),w(l,"xmlns","http://www.w3.org/2000/svg"),w(l,"xmlns:xlink","http://www.w3.org/1999/xlink"),w(l,"width",i=t[13](t[5].sheets.length-1).w*t[7]||0),w(l,"height",r=t[13](t[5].sheets.length-1).h*t[7]||0),w(l,"viewBox",a="0 0 "+(t[13](t[5].sheets.length-1).w*t[7]||0)+" "+(t[13](t[5].sheets.length-1).h*t[7]||0)),w(l,"preserveAspectRatio","xMidYMid meet"),w(s,"class","viewer svelte-98uac4")},m(e,i){v&&v.m(e,i),u(e,n,i),u(e,s,i),c(s,l);for(let e=0;e<x.length;e+=1)x[e].m(l,null);c(l,o),t[14](s)},p(e,[t]){if(e[1]?v?v.p(e,t):(v=Ie(e),v.c(),v.m(n.parentNode,n)):v&&(v.d(1),v=null),16352&t){let n;for($=e[5].sheets,n=0;n<$.length;n+=1){const s=Ge(e,$,n);x[n]?x[n].p(s,t):(x[n]=Ue(s),x[n].c(),x[n].m(l,o))}for(;n<x.length;n+=1)x[n].d(1);x.length=$.length}32&t&&i!==(i=e[13](e[5].sheets.length-1).w*e[7]||0)&&w(l,"width",i),32&t&&r!==(r=e[13](e[5].sheets.length-1).h*e[7]||0)&&w(l,"height",r),32&t&&a!==(a="0 0 "+(e[13](e[5].sheets.length-1).w*e[7]||0)+" "+(e[13](e[5].sheets.length-1).h*e[7]||0))&&w(l,"viewBox",a)},i:e,o:e,d(e){v&&v.d(e),e&&h(n),e&&h(s),f(x,e),t[14](null)}}}function Je(e,t,n){let s,l;i(e,ae,(e=>n(5,s=e))),i(e,re,(e=>n(6,l=e)));let o,r,c=!1,u=0,h=0;var f;return f=()=>{a(ae,s.svg=r.innerHTML.toString(),s)},M().$$.after_update.push(f),[o,c,u,h,r,s,l,90,function(){a(re,l.activePanel=this.id,l)},function(){a(re,l.activePanel="",l)},function(){n(1,c=!0);let e=this.getBoundingClientRect();n(2,u=(e.bottom-e.top)/2+e.top),n(3,h=(e.right-e.left)/2+e.left),n(0,o=this.id)},function(){n(1,c=!1)},function(e,t){return l.material.height-t-e},function(e){let t=Math.ceil(s.sheets.length/5),n=Math.ceil(s.sheets.length/t),o=Math.ceil((e+1)/n)-1;return{x:e%n*l.material.width,y:o*l.material.height,w:n*l.material.width,h:t*l.material.height}},function(e){O[e?"unshift":"push"]((()=>{r=e,n(4,r)}))}]}class Ke extends te{constructor(e){super(),ee(this,e,Je,Ye,o,{})}}function Qe(t){let n,l,o,i,r,a,f,m,v,b=(t[7].language.includes("fr")?t[5]:t[4])+"";return{c(){n=g("h5"),l=p(b),o=p(":\n  "),i=g("input"),r=d(),a=g("span"),f=p(t[6]),w(i,"type","number"),w(i,"min",t[1]),w(i,"max",t[2]),w(i,"step",t[3]),w(i,"class","svelte-17gjz45"),w(a,"class","svelte-17gjz45"),w(n,"class","svelte-17gjz45")},m(e,s){u(e,n,s),c(n,l),c(n,o),c(n,i),_(i,t[0]),c(n,r),c(n,a),c(a,f),m||(v=[$(i,"click",Ve),$(i,"change",t[8]),$(i,"input",t[11]),$(a,"click",t[9])],m=!0)},p(e,[t]){176&t&&b!==(b=(e[7].language.includes("fr")?e[5]:e[4])+"")&&y(l,b),2&t&&w(i,"min",e[1]),4&t&&w(i,"max",e[2]),8&t&&w(i,"step",e[3]),1&t&&x(i.value)!==e[0]&&_(i,e[0]),64&t&&y(f,e[6])},i:e,o:e,d(e){e&&h(n),m=!1,s(v)}}}function Ve(){this.select()}function Xe(e,t,n){let s;i(e,re,(e=>n(7,s=e)));const l=H();let{value:o}=t,{min:r=0}=t,{max:a}=t,{step:c}=t,{english:u=""}=t,{french:h=""}=t,{measurement:f=""}=t,{unit:g=""}=t;return e.$$set=e=>{"value"in e&&n(0,o=e.value),"min"in e&&n(1,r=e.min),"max"in e&&n(2,a=e.max),"step"in e&&n(3,c=e.step),"english"in e&&n(4,u=e.english),"french"in e&&n(5,h=e.french),"measurement"in e&&n(6,f=e.measurement),"unit"in e&&n(10,g=e.unit)},[o,r,a,c,u,h,f,s,function(){l("changed")},function(){l("convert"),n(10,g=!g)},g,function(){o=x(this.value),n(0,o)}]}class Ze extends te{constructor(e){super(),ee(this,e,Xe,Qe,o,{value:0,min:1,max:2,step:3,english:4,french:5,measurement:6,unit:10})}}function et(e,t,n){const s=e.slice();return s[54]=t[n],s}function tt(e,t,n){const s=e.slice();return s[57]=t[n],s[58]=t,s[59]=n,s}function nt(e,t,n){const s=e.slice();return s[54]=t[n],s}function st(e,t,n){const s=e.slice();return s[54]=t[n],s}function lt(e){let t,n,s,l,o,i,r,a,f,m=e[54]+"",v=e[0].cnc[e[54]].diameter+"",$=e[0].cnc[e[54]].type+"";return{c(){t=g("option"),n=p("("),s=p(m),l=p(") -\n                "),o=p(v),i=d(),r=p($),a=d(),t.__value=f=e[54],t.value=t.__value,w(t,"class","svelte-137mxmo")},m(e,h){u(e,t,h),c(t,n),c(t,s),c(t,l),c(t,o),c(t,i),c(t,r),c(t,a)},p(e,n){1&n[0]&&m!==(m=e[54]+"")&&y(s,m),1&n[0]&&v!==(v=e[0].cnc[e[54]].diameter+"")&&y(o,v),1&n[0]&&$!==($=e[0].cnc[e[54]].type+"")&&y(r,$),1&n[0]&&f!==(f=e[54])&&(t.__value=f,t.value=t.__value)},d(e){e&&h(t)}}}function ot(e){let t,n=e[0].cnc[e[54]].type.includes("mill"),s=n&&lt(e);return{c(){s&&s.c(),t=v()},m(e,n){s&&s.m(e,n),u(e,t,n)},p(e,l){1&l[0]&&(n=e[0].cnc[e[54]].type.includes("mill")),n?s?s.p(e,l):(s=lt(e),s.c(),s.m(t.parentNode,t)):s&&(s.d(1),s=null)},d(e){s&&s.d(e),e&&h(t)}}}function it(e){let t,n,s,l,o,i,r,a,f,m=e[54]+"",v=e[0].cnc[e[54]].diameter+"",$=e[0].cnc[e[54]].type+"";return{c(){t=g("option"),n=p("("),s=p(m),l=p(") -\n                "),o=p(v),i=d(),r=p($),a=d(),t.__value=f=e[54],t.value=t.__value,w(t,"class","svelte-137mxmo")},m(e,h){u(e,t,h),c(t,n),c(t,s),c(t,l),c(t,o),c(t,i),c(t,r),c(t,a)},p(e,n){1&n[0]&&m!==(m=e[54]+"")&&y(s,m),1&n[0]&&v!==(v=e[0].cnc[e[54]].diameter+"")&&y(o,v),1&n[0]&&$!==($=e[0].cnc[e[54]].type+"")&&y(r,$),1&n[0]&&f!==(f=e[54])&&(t.__value=f,t.value=t.__value)},d(e){e&&h(t)}}}function rt(e){let t,n=e[0].cnc[e[54]].type.includes("nose")||e[0].cnc[e[54]].type.includes("V-"),s=n&&it(e);return{c(){s&&s.c(),t=v()},m(e,n){s&&s.m(e,n),u(e,t,n)},p(e,l){1&l[0]&&(n=e[0].cnc[e[54]].type.includes("nose")||e[0].cnc[e[54]].type.includes("V-")),n?s?s.p(e,l):(s=it(e),s.c(),s.m(t.parentNode,t)):s&&(s.d(1),s=null)},d(e){s&&s.d(e),e&&h(t)}}}function at(e){let t,n,s,l;function o(t){e[37].call(null,t,e[57])}function i(t){e[38].call(null,t)}let r={english:e[57],french:e[57],max:e[0].units?2800:121,step:e[0].units?.5:.03125,measurement:e[0].units?"mm":'"'};return void 0!==e[1].offset[e[57]]&&(r.value=e[1].offset[e[57]]),void 0!==e[0].units&&(r.unit=e[0].units),t=new Ze({props:r}),O.push((()=>K(t,"value",o))),O.push((()=>K(t,"unit",i))),{c(){Q(t.$$.fragment)},m(e,n){V(t,e,n),l=!0},p(l,o){e=l;const i={};2&o[0]&&(i.english=e[57]),2&o[0]&&(i.french=e[57]),1&o[0]&&(i.max=e[0].units?2800:121),1&o[0]&&(i.step=e[0].units?.5:.03125),1&o[0]&&(i.measurement=e[0].units?"mm":'"'),!n&&2&o[0]&&(n=!0,i.value=e[1].offset[e[57]],W((()=>n=!1))),!s&&1&o[0]&&(s=!0,i.unit=e[0].units,W((()=>s=!1))),t.$set(i)},i(e){l||(Y(t.$$.fragment,e),l=!0)},o(e){J(t.$$.fragment,e),l=!1},d(e){X(t,e)}}}function ct(e){let t,n,s,l,o,i,r,a,f,m,v=e[54]+"",$=e[0].cnc[e[54]].diameter+"",x=e[0].cnc[e[54]].mm?"mm":'"',_=e[0].cnc[e[54]].type+"";return{c(){t=g("option"),n=p("("),s=p(v),l=p(") -\n                "),o=p($),i=p(x),r=d(),a=p(_),f=d(),t.__value=m=e[54],t.value=t.__value,w(t,"class","svelte-137mxmo")},m(e,h){u(e,t,h),c(t,n),c(t,s),c(t,l),c(t,o),c(t,i),c(t,r),c(t,a),c(t,f)},p(e,n){1&n[0]&&v!==(v=e[54]+"")&&y(s,v),1&n[0]&&$!==($=e[0].cnc[e[54]].diameter+"")&&y(o,$),1&n[0]&&x!==(x=e[0].cnc[e[54]].mm?"mm":'"')&&y(i,x),1&n[0]&&_!==(_=e[0].cnc[e[54]].type+"")&&y(a,_),1&n[0]&&m!==(m=e[54])&&(t.__value=m,t.value=t.__value)},d(e){e&&h(t)}}}function ut(e){let t,n=e[0].cnc[e[54]]&&ct(e);return{c(){n&&n.c(),t=v()},m(e,s){n&&n.m(e,s),u(e,t,s)},p(e,s){e[0].cnc[e[54]]?n?n.p(e,s):(n=ct(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&h(t)}}}function ht(e){let t,n,l,o,i,r,a,m,v,x,_,b,j,P,C,M,H,E,N,R,T,z,q,A,L,D,G,I,Z,ee,te,ne,se,le,oe,ie,re,ae,ce,ue,he,fe,ge,me,pe,de,ve,$e,we,xe,ye,_e,be,ke,je,Pe,Ce,He,Ee,Ne,Re,Te,ze,Be,We,qe,Ae,Le,De,Ge,Ie,Fe,Ue,Ye,Je,Ke,Qe,Ve,Xe,lt,it,ct,ht,ft,gt,mt,pt,dt,vt,$t,wt,xt,yt,_t,bt,kt,jt,St,Pt,Ct,Mt,Ht,Et,Ot,Nt,Rt,Tt,zt,Bt,Wt,qt,At,Lt,Dt,Gt,It,Ft,Ut,Yt,Jt,Kt,Qt,Vt,Xt,Zt,en,tn,nn,sn,ln,on,rn,an,cn,un,hn,fn,gn,mn,pn,dn,vn,$n,wn,xn,yn,_n,bn,kn,jn,Sn,Pn,Cn=e[0].subsettings.show?"⩚":"⩛",Mn=e[2]?"Classé par le:":"Sorted by:",Hn=e[2]?"Outil:":"Tool:",En=e[2]?"Outil:":"Tool:",On=e[2]?"Outil #":"Tool #";function Nn(t){e[10].call(null,t)}v=new Oe({props:{open:e[0].subsettings.project,icon:"⟐",french:"Projet",english:"Project"}}),v.$on("toggle",e[9]);let Rn={english:"Billing #",french:"Facture #"};function Tn(t){e[11].call(null,t)}void 0!==e[1].csv.contents[0][1]&&(Rn.value=e[1].csv.contents[0][1]),b=new Se({props:Rn}),O.push((()=>K(b,"value",Nn)));let zn={english:e[1].csv.contents[0][4]?e[1].csv.contents[0][4]:"Product",french:e[1].csv.contents[0][4]?e[1].csv.contents[0][4]:"Produit"};function Bn(t){e[12].call(null,t)}void 0!==e[1].csv.contents[0][5]&&(zn.value=e[1].csv.contents[0][5]),C=new Se({props:zn}),O.push((()=>K(C,"value",Tn)));let Wn={on:"☑︎",off:"☐",french:"Graver les noms des panneaux",english:"Engrave the panel names"};function qn(t){e[13].call(null,t)}void 0!==e[1].tools.engraver.engrave&&(Wn.checked=e[1].tools.engraver.engrave),E=new Me({props:Wn}),O.push((()=>K(E,"checked",Bn)));let An={on:"mm",off:e[0].language.includes("fr")?"po":"in",french:"Unites",english:"Units"};function Ln(t){e[15].call(null,t)}void 0!==e[0].units&&(An.checked=e[0].units),T=new Me({props:An}),O.push((()=>K(T,"checked",qn))),T.$on("toggle",e[4]),A=new Oe({props:{open:e[0].subsettings.sheet,icon:"☐",english:"Material",french:"Matériau"}}),A.$on("toggle",e[14]);let Dn={english:e[1].csv.contents[0][2]?e[1].csv.contents[0][2]:"Type of panel",french:e[1].csv.contents[0][2]?e[1].csv.contents[0][2]:"Sorte de panneau"};function Gn(t){e[16].call(null,t)}void 0!==e[1].csv.contents[0][3]&&(Dn.value=e[1].csv.contents[0][3]),G=new Se({props:Dn}),O.push((()=>K(G,"value",Ln)));let In={english:"Width",french:"Largeur",max:"61",step:"0.0625",measurement:'"'};function Fn(t){e[17].call(null,t)}void 0!==e[0].material.width&&(In.value=e[0].material.width),ee=new Ze({props:In}),O.push((()=>K(ee,"value",Gn)));let Un={english:"Height",french:"Hauteur",max:"121",step:"0.0625",measurement:'"'};function Yn(t){e[18].call(null,t)}void 0!==e[0].material.height&&(Un.value=e[0].material.height),se=new Ze({props:Un}),O.push((()=>K(se,"value",Fn)));let Jn={english:"Thickness",french:"Épaisseur",max:"5",step:"0.005",measurement:'"'};function Kn(t){e[19].call(null,t)}void 0!==e[0].material.thickness&&(Jn.value=e[0].material.thickness),ie=new Ze({props:Jn}),O.push((()=>K(ie,"value",Yn))),ie.$on("changed",e[3]);let Qn={english:"Margins",french:"Marges",max:"5",step:"0.05",measurement:'"'};function Vn(t){e[21].call(null,t)}void 0!==e[0].material.margins&&(Qn.value=e[0].material.margins),ce=new Ze({props:Qn}),O.push((()=>K(ce,"value",Kn))),fe=new Oe({props:{open:e[0].subsettings.nest,icon:"⊞",english:"Nesting",french:"Nesting"}}),fe.$on("toggle",e[20]);let Xn={english:"Aligned to the",french:"Aligné avec le",on:(e[2]?"bas":"Bottom")+" ⤓",off:(e[2]?"haut":"Top")+" ⤒"};function Zn(t){e[22].call(null,t)}void 0!==e[0].nestDirectionBottom&&(Xn.checked=e[0].nestDirectionBottom),pe=new Me({props:Xn}),O.push((()=>K(pe,"checked",Vn)));let es={english:"Placement direction",french:"Direction de placement",on:(e[2]?"Colonnes":"Columns")+" ⇈",off:(e[2]?"Lignes":"Rows")+" ⇉"};void 0!==e[0].nestTypeColumn&&(es.checked=e[0].nestTypeColumn),$e=new Me({props:es}),O.push((()=>K($e,"checked",Zn))),Le=new Oe({props:{open:e[0].subsettings.profile,icon:"⨆",english:"Profile cut",french:"Coupe profile"}}),Le.$on("toggle",e[24]);let ts=Object.keys(e[0].cnc),ns=[];for(let t=0;t<ts.length;t+=1)ns[t]=ot(st(e,ts,t));function ss(t){e[26].call(null,t)}let ls={english:"Cut depth",french:"Profondeur coupe",max:e[0].cnc[e[0].tools.profile].max_depth,step:"0.05",measurement:'"'};function os(t){e[27].call(null,t)}void 0!==e[1].tools.profile.cut_depth&&(ls.value=e[1].tools.profile.cut_depth),Ve=new Ze({props:ls}),O.push((()=>K(Ve,"value",ss)));let is={english:"Smallest for one pass",french:"Plus petit pour un passe",max:e[0].material.width,step:"0.5",measurement:'"'};function rs(t){e[28].call(null,t)}void 0!==e[1].tools.profile.min_size&&(is.value=e[1].tools.profile.min_size),it=new Ze({props:is}),O.push((()=>K(it,"value",os)));let as={english:"Last pass link",french:"Lien pour dernier passe",max:e[0].material.thickness,step:"0.005",measurement:'"'};void 0!==e[1].tools.profile.link&&(as.value=e[1].tools.profile.link),ft=new Ze({props:as}),O.push((()=>K(ft,"value",rs))),pt=new Oe({props:{open:e[0].subsettings.engraver,icon:"⋁",english:"Engraving",french:"Graver"}}),pt.$on("toggle",e[29]);let cs=Object.keys(e[0].cnc),us=[];for(let t=0;t<cs.length;t+=1)us[t]=rt(nt(e,cs,t));function hs(t){e[31].call(null,t)}let fs={english:"Cut depth",french:"Profondeur coupe",max:e[0].cnc[e[0].tools.engraver].max_depth,step:"0.005",measurement:'"'};function gs(t){e[32].call(null,t)}void 0!==e[1].tools.engraver.cut_depth&&(fs.value=e[1].tools.engraver.cut_depth),jt=new Ze({props:fs}),O.push((()=>K(jt,"value",hs)));let ms={english:"Placement from left",french:"Placement de gauche",max:"10",step:"0.125",measurement:'"'};function ps(t){e[33].call(null,t)}void 0!==e[1].tools.engraver.xStart&&(ms.value=e[1].tools.engraver.xStart),Ct=new Ze({props:ms}),O.push((()=>K(Ct,"value",gs)));let ds={english:"Placement from bottom",french:"Placement de bas",max:"10",step:"0.125",measurement:'"'};function vs(t){e[34].call(null,t)}void 0!==e[1].tools.engraver.yStart&&(ds.value=e[1].tools.engraver.yStart),Et=new Ze({props:ds}),O.push((()=>K(Et,"value",ps)));let $s={english:"Letter height",french:"Hauteur de la lettre",max:"3",step:"0.05",measurement:'"'};function ws(t){e[35].call(null,t)}void 0!==e[1].tools.engraver.size&&($s.value=e[1].tools.engraver.size),Rt=new Ze({props:$s}),O.push((()=>K(Rt,"value",vs)));let xs={english:"Space between letters",french:"Espace entre les lettres",max:"2",step:"0.05",measurement:'"'};void 0!==e[1].tools.engraver.spacing&&(xs.value=e[1].tools.engraver.spacing),Bt=new Ze({props:xs}),O.push((()=>K(Bt,"value",ws))),At=new Oe({props:{open:e[0].subsettings.offset,icon:"⩐",english:"CNC Offset",french:"Offset CNC"}}),At.$on("toggle",e[36]);let ys=Object.keys(e[1].offset),_s=[];for(let t=0;t<ys.length;t+=1)_s[t]=at(tt(e,ys,t));const bs=e=>J(_s[e],1,1,(()=>{_s[e]=null}));It=new Oe({props:{open:e[0].subsettings.library,icon:"⩐",english:"CNC Library",french:"Bibliotheque CNC"}}),It.$on("toggle",e[39]);let ks=Object.keys(e[0].cnc),js=[];for(let t=0;t<ks.length;t+=1)js[t]=ut(et(e,ks,t));function Ss(t){e[41].call(null,t)}function Ps(t){e[42].call(null,t)}let Cs={english:"Diameter",french:"Diametre",max:e[0].cnc[e[0].tools.tool].mm?150:5,step:e[0].cnc[e[0].tools.tool].mm?.5:.03125,measurement:e[0].cnc[e[0].tools.tool].mm?"mm":'"'};function Ms(t){e[43].call(null,t)}void 0!==e[0].cnc[e[0].tools.tool].diameter&&(Cs.value=e[0].cnc[e[0].tools.tool].diameter),void 0!==e[0].cnc[e[0].tools.tool].mm&&(Cs.unit=e[0].cnc[e[0].tools.tool].mm),en=new Ze({props:Cs}),O.push((()=>K(en,"value",Ss))),O.push((()=>K(en,"unit",Ps))),en.$on("convert",e[5]);let Hs={english:"Type",french:"Type"};function Es(t){e[44].call(null,t)}void 0!==e[0].cnc[e[0].tools.tool].type&&(Hs.value=e[0].cnc[e[0].tools.tool].type),ln=new Se({props:Hs}),O.push((()=>K(ln,"value",Ms)));let Os={english:"Spindle speed",french:"Vitesse spindle",max:"30000",step:"100",measurement:"RPM"};function Ns(t){e[45].call(null,t)}void 0!==e[0].cnc[e[0].tools.tool].spindle&&(Os.value=e[0].cnc[e[0].tools.tool].spindle),an=new Ze({props:Os}),O.push((()=>K(an,"value",Es)));let Rs={english:"Plunge rate",french:"Vitesse de plonge",max:"1000",step:"5",measurement:'"/min'};function Ts(t){e[46].call(null,t)}void 0!==e[0].cnc[e[0].tools.tool].plunge&&(Rs.value=e[0].cnc[e[0].tools.tool].plunge),hn=new Ze({props:Rs}),O.push((()=>K(hn,"value",Ns)));let zs={english:"Plunge ramp",french:"Longeur de plonge",max:"5",step:"0.125",measurement:'"'};function Bs(t){e[47].call(null,t)}void 0!==e[0].cnc[e[0].tools.tool].ramp&&(zs.value=e[0].cnc[e[0].tools.tool].ramp),mn=new Ze({props:zs}),O.push((()=>K(mn,"value",Ts)));let Ws={english:"Feed rate",french:"itesse de coupe",max:"1000",step:"10",measurement:'"/min'};function qs(t){e[48].call(null,t)}void 0!==e[0].cnc[e[0].tools.tool].feed&&(Ws.value=e[0].cnc[e[0].tools.tool].feed),vn=new Ze({props:Ws}),O.push((()=>K(vn,"value",Bs)));let As={english:"Max cut depth",french:"Max profondeur coupe",max:"5",step:"0.03125",measurement:'"'};function Ls(t){e[49].call(null,t)}void 0!==e[0].cnc[e[0].tools.tool].max_depth&&(As.value=e[0].cnc[e[0].tools.tool].max_depth),xn=new Ze({props:As}),O.push((()=>K(xn,"value",qs)));let Ds={english:"Max depth/pass",french:"Max profondeur/passe",max:"5",step:"0.03125",measurement:'"'};return void 0!==e[0].cnc[e[0].tools.tool].pass_depth&&(Ds.value=e[0].cnc[e[0].tools.tool].pass_depth),bn=new Ze({props:Ds}),O.push((()=>K(bn,"value",Ls))),{c(){t=g("div"),n=g("div"),l=g("span"),o=p(Cn),i=d(),r=g("span"),r.textContent=""+(e[2]?"Parametre":" Settings"),a=d(),m=g("div"),Q(v.$$.fragment),x=d(),_=g("div"),Q(b.$$.fragment),P=d(),Q(C.$$.fragment),H=d(),Q(E.$$.fragment),R=d(),Q(T.$$.fragment),q=d(),Q(A.$$.fragment),L=d(),D=g("div"),Q(G.$$.fragment),Z=d(),Q(ee.$$.fragment),ne=d(),Q(se.$$.fragment),oe=d(),Q(ie.$$.fragment),ae=d(),Q(ce.$$.fragment),he=d(),Q(fe.$$.fragment),ge=d(),me=g("div"),Q(pe.$$.fragment),ve=d(),Q($e.$$.fragment),xe=d(),ye=g("h5"),_e=p(Mn),be=d(),ke=g("span"),ke.textContent="",je=d(),Pe=g("div"),Pe.textContent="",Ce=d(),He=g("select"),Ee=g("option"),Ne=g("span"),Ne.textContent=(e[2]?"Plus large":"Widest")+" ↔︎",Re=d(),Te=g("option"),ze=g("span"),ze.textContent=(e[2]?"Plus haut":"Tallest")+" ↕︎",Be=d(),We=g("option"),qe=g("span"),qe.textContent=(e[2]?"Plus grand":"Biggest")+" ⤢",Ae=d(),Q(Le.$$.fragment),De=d(),Ge=g("div"),Ie=g("h5"),Fe=p(Hn),Ue=d(),Ye=g("span"),Ye.textContent="",Je=d(),Ke=g("select");for(let e=0;e<ns.length;e+=1)ns[e].c();Qe=d(),Q(Ve.$$.fragment),lt=d(),Q(it.$$.fragment),ht=d(),Q(ft.$$.fragment),mt=d(),Q(pt.$$.fragment),dt=d(),vt=g("div"),$t=g("h5"),wt=p(En),xt=d(),yt=g("span"),yt.textContent="",_t=d(),bt=g("select");for(let e=0;e<us.length;e+=1)us[e].c();kt=d(),Q(jt.$$.fragment),Pt=d(),Q(Ct.$$.fragment),Ht=d(),Q(Et.$$.fragment),Nt=d(),Q(Rt.$$.fragment),zt=d(),Q(Bt.$$.fragment),qt=d(),Q(At.$$.fragment),Lt=d(),Dt=g("div");for(let e=0;e<_s.length;e+=1)_s[e].c();Gt=d(),Q(It.$$.fragment),Ft=d(),Ut=g("div"),Yt=g("h5"),Jt=p(On),Kt=d(),Qt=g("span"),Qt.textContent="",Vt=d(),Xt=g("select");for(let e=0;e<js.length;e+=1)js[e].c();Zt=d(),Q(en.$$.fragment),sn=d(),Q(ln.$$.fragment),rn=d(),Q(an.$$.fragment),un=d(),Q(hn.$$.fragment),gn=d(),Q(mn.$$.fragment),dn=d(),Q(vn.$$.fragment),wn=d(),Q(xn.$$.fragment),_n=d(),Q(bn.$$.fragment),w(l,"class","transparent svelte-137mxmo"),w(n,"class","title svelte-137mxmo"),S(n,"active",e[0].subsettings.show),w(_,"class","subsetting svelte-137mxmo"),S(_,"active",e[0].subsettings.project),w(D,"class","subsetting svelte-137mxmo"),S(D,"active",e[0].subsettings.sheet),w(ke,"class","spread svelte-137mxmo"),w(Pe,"class","filler"),Ee.__value="widest",Ee.value=Ee.__value,w(Ee,"class","svelte-137mxmo"),Te.__value="tallest",Te.value=Te.__value,w(Te,"class","svelte-137mxmo"),We.__value="biggest",We.value=We.__value,w(We,"class","svelte-137mxmo"),w(He,"class","right svelte-137mxmo"),void 0===e[0].nestOrder&&B((()=>e[23].call(He))),w(ye,"class","svelte-137mxmo"),w(me,"class","subsetting svelte-137mxmo"),S(me,"active",e[0].subsettings.nest),w(Ye,"class","spread svelte-137mxmo"),w(Ke,"class","svelte-137mxmo"),void 0===e[0].tools.profile&&B((()=>e[25].call(Ke))),w(Ie,"class","svelte-137mxmo"),w(Ge,"class","subsetting svelte-137mxmo"),S(Ge,"active",e[0].subsettings.profile),w(yt,"class","spread svelte-137mxmo"),w(bt,"class","svelte-137mxmo"),void 0===e[0].tools.engraver&&B((()=>e[30].call(bt))),w($t,"class","svelte-137mxmo"),w(vt,"class","subsetting svelte-137mxmo"),S(vt,"active",e[0].subsettings.engraver),w(Dt,"class","subsetting svelte-137mxmo"),S(Dt,"active",e[0].subsettings.offset),w(Qt,"class","spread svelte-137mxmo"),w(Xt,"class","svelte-137mxmo"),void 0===e[0].tools.tool&&B((()=>e[40].call(Xt))),w(Yt,"class","svelte-137mxmo"),w(Ut,"class","subsetting svelte-137mxmo"),S(Ut,"active",e[0].subsettings.library),w(m,"class","subsetting svelte-137mxmo"),S(m,"active",e[0].subsettings.show),w(t,"class","settings svelte-137mxmo")},m(s,h){u(s,t,h),c(t,n),c(n,l),c(l,o),c(n,i),c(n,r),c(t,a),c(t,m),V(v,m,null),c(m,x),c(m,_),V(b,_,null),c(_,P),V(C,_,null),c(_,H),V(E,_,null),c(_,R),V(T,_,null),c(m,q),V(A,m,null),c(m,L),c(m,D),V(G,D,null),c(D,Z),V(ee,D,null),c(D,ne),V(se,D,null),c(D,oe),V(ie,D,null),c(D,ae),V(ce,D,null),c(m,he),V(fe,m,null),c(m,ge),c(m,me),V(pe,me,null),c(me,ve),V($e,me,null),c(me,xe),c(me,ye),c(ye,_e),c(ye,be),c(ye,ke),c(ye,je),c(ye,Pe),c(ye,Ce),c(ye,He),c(He,Ee),c(Ee,Ne),c(Ee,Re),c(He,Te),c(Te,ze),c(Te,Be),c(He,We),c(We,qe),k(He,e[0].nestOrder),c(m,Ae),V(Le,m,null),c(m,De),c(m,Ge),c(Ge,Ie),c(Ie,Fe),c(Ie,Ue),c(Ie,Ye),c(Ie,Je),c(Ie,Ke);for(let e=0;e<ns.length;e+=1)ns[e].m(Ke,null);k(Ke,e[0].tools.profile),c(Ge,Qe),V(Ve,Ge,null),c(Ge,lt),V(it,Ge,null),c(Ge,ht),V(ft,Ge,null),c(m,mt),V(pt,m,null),c(m,dt),c(m,vt),c(vt,$t),c($t,wt),c($t,xt),c($t,yt),c($t,_t),c($t,bt);for(let e=0;e<us.length;e+=1)us[e].m(bt,null);k(bt,e[0].tools.engraver),c(vt,kt),V(jt,vt,null),c(vt,Pt),V(Ct,vt,null),c(vt,Ht),V(Et,vt,null),c(vt,Nt),V(Rt,vt,null),c(vt,zt),V(Bt,vt,null),c(m,qt),V(At,m,null),c(m,Lt),c(m,Dt);for(let e=0;e<_s.length;e+=1)_s[e].m(Dt,null);c(m,Gt),V(It,m,null),c(m,Ft),c(m,Ut),c(Ut,Yt),c(Yt,Jt),c(Yt,Kt),c(Yt,Qt),c(Yt,Vt),c(Yt,Xt);for(let e=0;e<js.length;e+=1)js[e].m(Xt,null);k(Xt,e[0].tools.tool),c(Ut,Zt),V(en,Ut,null),c(Ut,sn),V(ln,Ut,null),c(Ut,rn),V(an,Ut,null),c(Ut,un),V(hn,Ut,null),c(Ut,gn),V(mn,Ut,null),c(Ut,dn),V(vn,Ut,null),c(Ut,wn),V(xn,Ut,null),c(Ut,_n),V(bn,Ut,null),jn=!0,Sn||(Pn=[$(n,"click",e[8]),$(He,"change",e[23]),$(Ke,"change",e[25]),$(Ke,"change",e[7]),$(bt,"change",e[30]),$(bt,"change",e[6]),$(Xt,"change",e[40])],Sn=!0)},p(e,t){(!jn||1&t[0])&&Cn!==(Cn=e[0].subsettings.show?"⩚":"⩛")&&y(o,Cn),1&t[0]&&S(n,"active",e[0].subsettings.show);const s={};1&t[0]&&(s.open=e[0].subsettings.project),v.$set(s);const l={};!j&&2&t[0]&&(j=!0,l.value=e[1].csv.contents[0][1],W((()=>j=!1))),b.$set(l);const i={};2&t[0]&&(i.english=e[1].csv.contents[0][4]?e[1].csv.contents[0][4]:"Product"),2&t[0]&&(i.french=e[1].csv.contents[0][4]?e[1].csv.contents[0][4]:"Produit"),!M&&2&t[0]&&(M=!0,i.value=e[1].csv.contents[0][5],W((()=>M=!1))),C.$set(i);const r={};!N&&2&t[0]&&(N=!0,r.checked=e[1].tools.engraver.engrave,W((()=>N=!1))),E.$set(r);const a={};1&t[0]&&(a.off=e[0].language.includes("fr")?"po":"in"),!z&&1&t[0]&&(z=!0,a.checked=e[0].units,W((()=>z=!1))),T.$set(a),1&t[0]&&S(_,"active",e[0].subsettings.project);const c={};1&t[0]&&(c.open=e[0].subsettings.sheet),A.$set(c);const u={};2&t[0]&&(u.english=e[1].csv.contents[0][2]?e[1].csv.contents[0][2]:"Type of panel"),2&t[0]&&(u.french=e[1].csv.contents[0][2]?e[1].csv.contents[0][2]:"Sorte de panneau"),!I&&2&t[0]&&(I=!0,u.value=e[1].csv.contents[0][3],W((()=>I=!1))),G.$set(u);const h={};!te&&1&t[0]&&(te=!0,h.value=e[0].material.width,W((()=>te=!1))),ee.$set(h);const f={};!le&&1&t[0]&&(le=!0,f.value=e[0].material.height,W((()=>le=!1))),se.$set(f);const g={};!re&&1&t[0]&&(re=!0,g.value=e[0].material.thickness,W((()=>re=!1))),ie.$set(g);const p={};!ue&&1&t[0]&&(ue=!0,p.value=e[0].material.margins,W((()=>ue=!1))),ce.$set(p),1&t[0]&&S(D,"active",e[0].subsettings.sheet);const d={};1&t[0]&&(d.open=e[0].subsettings.nest),fe.$set(d);const $={};!de&&1&t[0]&&(de=!0,$.checked=e[0].nestDirectionBottom,W((()=>de=!1))),pe.$set($);const w={};!we&&1&t[0]&&(we=!0,w.checked=e[0].nestTypeColumn,W((()=>we=!1))),$e.$set(w),1&t[0]&&k(He,e[0].nestOrder),1&t[0]&&S(me,"active",e[0].subsettings.nest);const x={};if(1&t[0]&&(x.open=e[0].subsettings.profile),Le.$set(x),1&t[0]){let n;for(ts=Object.keys(e[0].cnc),n=0;n<ts.length;n+=1){const s=st(e,ts,n);ns[n]?ns[n].p(s,t):(ns[n]=ot(s),ns[n].c(),ns[n].m(Ke,null))}for(;n<ns.length;n+=1)ns[n].d(1);ns.length=ts.length}1&t[0]&&k(Ke,e[0].tools.profile);const P={};1&t[0]&&(P.max=e[0].cnc[e[0].tools.profile].max_depth),!Xe&&2&t[0]&&(Xe=!0,P.value=e[1].tools.profile.cut_depth,W((()=>Xe=!1))),Ve.$set(P);const H={};1&t[0]&&(H.max=e[0].material.width),!ct&&2&t[0]&&(ct=!0,H.value=e[1].tools.profile.min_size,W((()=>ct=!1))),it.$set(H);const O={};1&t[0]&&(O.max=e[0].material.thickness),!gt&&2&t[0]&&(gt=!0,O.value=e[1].tools.profile.link,W((()=>gt=!1))),ft.$set(O),1&t[0]&&S(Ge,"active",e[0].subsettings.profile);const R={};if(1&t[0]&&(R.open=e[0].subsettings.engraver),pt.$set(R),1&t[0]){let n;for(cs=Object.keys(e[0].cnc),n=0;n<cs.length;n+=1){const s=nt(e,cs,n);us[n]?us[n].p(s,t):(us[n]=rt(s),us[n].c(),us[n].m(bt,null))}for(;n<us.length;n+=1)us[n].d(1);us.length=cs.length}1&t[0]&&k(bt,e[0].tools.engraver);const B={};1&t[0]&&(B.max=e[0].cnc[e[0].tools.engraver].max_depth),!St&&2&t[0]&&(St=!0,B.value=e[1].tools.engraver.cut_depth,W((()=>St=!1))),jt.$set(B);const q={};!Mt&&2&t[0]&&(Mt=!0,q.value=e[1].tools.engraver.xStart,W((()=>Mt=!1))),Ct.$set(q);const L={};!Ot&&2&t[0]&&(Ot=!0,L.value=e[1].tools.engraver.yStart,W((()=>Ot=!1))),Et.$set(L);const J={};!Tt&&2&t[0]&&(Tt=!0,J.value=e[1].tools.engraver.size,W((()=>Tt=!1))),Rt.$set(J);const K={};!Wt&&2&t[0]&&(Wt=!0,K.value=e[1].tools.engraver.spacing,W((()=>Wt=!1))),Bt.$set(K),1&t[0]&&S(vt,"active",e[0].subsettings.engraver);const Q={};if(1&t[0]&&(Q.open=e[0].subsettings.offset),At.$set(Q),3&t[0]){let n;for(ys=Object.keys(e[1].offset),n=0;n<ys.length;n+=1){const s=tt(e,ys,n);_s[n]?(_s[n].p(s,t),Y(_s[n],1)):(_s[n]=at(s),_s[n].c(),Y(_s[n],1),_s[n].m(Dt,null))}for(F(),n=ys.length;n<_s.length;n+=1)bs(n);U()}1&t[0]&&S(Dt,"active",e[0].subsettings.offset);const V={};if(1&t[0]&&(V.open=e[0].subsettings.library),It.$set(V),1&t[0]){let n;for(ks=Object.keys(e[0].cnc),n=0;n<ks.length;n+=1){const s=et(e,ks,n);js[n]?js[n].p(s,t):(js[n]=ut(s),js[n].c(),js[n].m(Xt,null))}for(;n<js.length;n+=1)js[n].d(1);js.length=ks.length}1&t[0]&&k(Xt,e[0].tools.tool);const X={};1&t[0]&&(X.max=e[0].cnc[e[0].tools.tool].mm?150:5),1&t[0]&&(X.step=e[0].cnc[e[0].tools.tool].mm?.5:.03125),1&t[0]&&(X.measurement=e[0].cnc[e[0].tools.tool].mm?"mm":'"'),!tn&&1&t[0]&&(tn=!0,X.value=e[0].cnc[e[0].tools.tool].diameter,W((()=>tn=!1))),!nn&&1&t[0]&&(nn=!0,X.unit=e[0].cnc[e[0].tools.tool].mm,W((()=>nn=!1))),en.$set(X);const Z={};!on&&1&t[0]&&(on=!0,Z.value=e[0].cnc[e[0].tools.tool].type,W((()=>on=!1))),ln.$set(Z);const ne={};!cn&&1&t[0]&&(cn=!0,ne.value=e[0].cnc[e[0].tools.tool].spindle,W((()=>cn=!1))),an.$set(ne);const oe={};!fn&&1&t[0]&&(fn=!0,oe.value=e[0].cnc[e[0].tools.tool].plunge,W((()=>fn=!1))),hn.$set(oe);const ae={};!pn&&1&t[0]&&(pn=!0,ae.value=e[0].cnc[e[0].tools.tool].ramp,W((()=>pn=!1))),mn.$set(ae);const he={};!$n&&1&t[0]&&($n=!0,he.value=e[0].cnc[e[0].tools.tool].feed,W((()=>$n=!1))),vn.$set(he);const ge={};!yn&&1&t[0]&&(yn=!0,ge.value=e[0].cnc[e[0].tools.tool].max_depth,W((()=>yn=!1))),xn.$set(ge);const ve={};!kn&&1&t[0]&&(kn=!0,ve.value=e[0].cnc[e[0].tools.tool].pass_depth,W((()=>kn=!1))),bn.$set(ve),1&t[0]&&S(Ut,"active",e[0].subsettings.library),1&t[0]&&S(m,"active",e[0].subsettings.show)},i(e){if(!jn){Y(v.$$.fragment,e),Y(b.$$.fragment,e),Y(C.$$.fragment,e),Y(E.$$.fragment,e),Y(T.$$.fragment,e),Y(A.$$.fragment,e),Y(G.$$.fragment,e),Y(ee.$$.fragment,e),Y(se.$$.fragment,e),Y(ie.$$.fragment,e),Y(ce.$$.fragment,e),Y(fe.$$.fragment,e),Y(pe.$$.fragment,e),Y($e.$$.fragment,e),Y(Le.$$.fragment,e),Y(Ve.$$.fragment,e),Y(it.$$.fragment,e),Y(ft.$$.fragment,e),Y(pt.$$.fragment,e),Y(jt.$$.fragment,e),Y(Ct.$$.fragment,e),Y(Et.$$.fragment,e),Y(Rt.$$.fragment,e),Y(Bt.$$.fragment,e),Y(At.$$.fragment,e);for(let e=0;e<ys.length;e+=1)Y(_s[e]);Y(It.$$.fragment,e),Y(en.$$.fragment,e),Y(ln.$$.fragment,e),Y(an.$$.fragment,e),Y(hn.$$.fragment,e),Y(mn.$$.fragment,e),Y(vn.$$.fragment,e),Y(xn.$$.fragment,e),Y(bn.$$.fragment,e),jn=!0}},o(e){J(v.$$.fragment,e),J(b.$$.fragment,e),J(C.$$.fragment,e),J(E.$$.fragment,e),J(T.$$.fragment,e),J(A.$$.fragment,e),J(G.$$.fragment,e),J(ee.$$.fragment,e),J(se.$$.fragment,e),J(ie.$$.fragment,e),J(ce.$$.fragment,e),J(fe.$$.fragment,e),J(pe.$$.fragment,e),J($e.$$.fragment,e),J(Le.$$.fragment,e),J(Ve.$$.fragment,e),J(it.$$.fragment,e),J(ft.$$.fragment,e),J(pt.$$.fragment,e),J(jt.$$.fragment,e),J(Ct.$$.fragment,e),J(Et.$$.fragment,e),J(Rt.$$.fragment,e),J(Bt.$$.fragment,e),J(At.$$.fragment,e),_s=_s.filter(Boolean);for(let e=0;e<_s.length;e+=1)J(_s[e]);J(It.$$.fragment,e),J(en.$$.fragment,e),J(ln.$$.fragment,e),J(an.$$.fragment,e),J(hn.$$.fragment,e),J(mn.$$.fragment,e),J(vn.$$.fragment,e),J(xn.$$.fragment,e),J(bn.$$.fragment,e),jn=!1},d(e){e&&h(t),X(v),X(b),X(C),X(E),X(T),X(A),X(G),X(ee),X(se),X(ie),X(ce),X(fe),X(pe),X($e),X(Le),f(ns,e),X(Ve),X(it),X(ft),X(pt),f(us,e),X(jt),X(Ct),X(Et),X(Rt),X(Bt),X(At),f(_s,e),X(It),f(js,e),X(en),X(ln),X(an),X(hn),X(mn),X(vn),X(xn),X(bn),Sn=!1,s(Pn)}}}function ft(e,t,n){let s,l;i(e,re,(e=>n(0,s=e))),i(e,ae,(e=>n(1,l=e)));H();const o="fr"===s.language;let r=s.material.thickness;function c(e,t){return(e?ge:fe)(t)}function u(e){a(re,s.tools.tool=e,s)}return[s,l,o,function(){a(ae,l.tools.profile.cut_depth-=r-s.material.thickness,l),r=s.material.thickness},function(){let e=JSON.parse(l.csv.contents[3][1]);l.csv.panels.forEach((t=>{t[2]=c(e,t[2]),t[3]=c(e,t[3])})),a(ae,l.csv.contents[3][1]=a(re,s.units=!e,s),l)},function(){let e=s.cnc[s.tools.tool];e.diameter=c(e.mm,e.diameter)},function(){u(s.tools.engraver)},function(){u(s.tools.profile)},()=>a(re,s.subsettings.show=!s.subsettings.show,s),()=>a(re,s.subsettings.project=!s.subsettings.project,s),function(e){l.csv.contents[0][1]=e,ae.set(l)},function(e){l.csv.contents[0][5]=e,ae.set(l)},function(e){l.tools.engraver.engrave=e,ae.set(l)},function(e){s.units=e,re.set(s)},()=>a(re,s.subsettings.sheet=!s.subsettings.sheet,s),function(e){l.csv.contents[0][3]=e,ae.set(l)},function(e){s.material.width=e,re.set(s)},function(e){s.material.height=e,re.set(s)},function(e){s.material.thickness=e,re.set(s)},function(e){s.material.margins=e,re.set(s)},()=>a(re,s.subsettings.nest=!s.subsettings.nest,s),function(e){s.nestDirectionBottom=e,re.set(s)},function(e){s.nestTypeColumn=e,re.set(s)},function(){s.nestOrder=j(this),re.set(s)},()=>a(re,s.subsettings.profile=!s.subsettings.profile,s),function(){s.tools.profile=j(this),re.set(s)},function(e){l.tools.profile.cut_depth=e,ae.set(l)},function(e){l.tools.profile.min_size=e,ae.set(l)},function(e){l.tools.profile.link=e,ae.set(l)},()=>a(re,s.subsettings.engraver=!s.subsettings.engraver,s),function(){s.tools.engraver=j(this),re.set(s)},function(e){l.tools.engraver.cut_depth=e,ae.set(l)},function(e){l.tools.engraver.xStart=e,ae.set(l)},function(e){l.tools.engraver.yStart=e,ae.set(l)},function(e){l.tools.engraver.size=e,ae.set(l)},function(e){l.tools.engraver.spacing=e,ae.set(l)},()=>a(re,s.subsettings.offset=!s.subsettings.offset,s),function(e,t){l.offset[t]=e,ae.set(l)},function(e){s.units=e,re.set(s)},()=>a(re,s.subsettings.library=!s.subsettings.library,s),function(){s.tools.tool=j(this),re.set(s)},function(e){s.cnc[s.tools.tool].diameter=e,re.set(s)},function(e){s.cnc[s.tools.tool].mm=e,re.set(s)},function(e){s.cnc[s.tools.tool].type=e,re.set(s)},function(e){s.cnc[s.tools.tool].spindle=e,re.set(s)},function(e){s.cnc[s.tools.tool].plunge=e,re.set(s)},function(e){s.cnc[s.tools.tool].ramp=e,re.set(s)},function(e){s.cnc[s.tools.tool].feed=e,re.set(s)},function(e){s.cnc[s.tools.tool].max_depth=e,re.set(s)},function(e){s.cnc[s.tools.tool].pass_depth=e,re.set(s)}]}class gt extends te{constructor(e){super(),ee(this,e,ft,ht,o,{},[-1,-1,-1])}}let mt="widest";function pt(e,t){mt=t.nestOrder;let n=[],s=t.nestDirectionBottom,l=t.nestTypeColumn,o=t.cnc[t.tools.profile].diameter||.375,i={width:t.material.width||49,height:t.material.height||97,margins:t.material.margins||.25,max_width:()=>i.width-2*i.margins-o,max_height:()=>i.height-2*i.margins-o};return{sheets:function(e){let t=new yt;if(l){let n=function(e){let t=new yt;for(;e.notPlaced().length>0;){let n=a(e);t.push(new $t(n.columnWidth(),n.columnHeight(),n.totalArea(),n,mt))}return t}(e);for(;n.notPlaced().length>0;){let e=c(n);f(e),t.push(new xt(e.rowWidth(),e.rowHeight(),e.totalArea(),e.map((e=>e.group)).flatten(2),e,t.length+1,i))}}else{let n=function(e){let t=new yt;for(;e.notPlaced().length>0;){let n=r(e);t.push(new wt(n.rowWidth(),n.rowHeight(),n.totalArea(),n,mt))}return t}(e);for(;n.notPlaced().length>0;){let e=u(n);h(e),t.push(new xt(e.columnWidth(),e.columnHeight(),e.totalArea(),e.map((e=>e.group)).flatten(2),e,t.length+1,i))}}return t}(new yt(e.flatMap((e=>function([e,t,s,l]){return r();function r(){return s>i.max_width()||l>i.max_height()?(n.push(`Panneau ${e} est trop gros`),[]):s&&l&&t?a():[]}function a(n=0,i=[]){for(s+=o,l+=o;t>n++;){let o="";t>1&&(o=`${n} sur ${t}`),i.push([o,e,s,l,mt])}return i}}(e).map((e=>new vt(e)))))).flat()),errors:n};function r(e){let t=new yt(e.placementBy().place()),n=t[0].height;for(;e.fitsRow(t,i.max_width());){let s=new yt(e.fitsRow(t,i.max_width()).place());for(;e.fitsColumn(s,n);)s.push(e.fitsColumn(s,n).place());1===s.length?t.push(s[0]):t.push(s)}return t.ascendingHeight()}function a(e){let t=new yt(e.placementBy().place()),n=t[0].width;for(;e.fitsColumn(t,i.max_height());){let s=new yt(e.fitsColumn(t,i.max_height()).place());for(;e.fitsRow(s,n);)s.push(e.fitsRow(s,n).place());1===s.length?t.push(s[0]):t.push(s)}return t.ascendingWidth()}function c(e){let t=new yt(e.placementBy().place());for(;e.fitsSheetColumn(t,i.max_width());)t.push(e.fitsSheetColumn(t,i.max_width()).place());return t.ascendingHeight()}function u(e){let t=new yt(e.placementBy().place());for(;e.fitsSheetRow(t,i.max_height());)t.push(e.fitsSheetRow(t,i.max_height()).place());return t.ascendingWidth()}function h(e){let t=i.margins-o/2,n=new yt;e.forEach(((l,o)=>{0===o?n.push(s?t:i.height-t-l.height):n.push(s?n.last()+e[o-1].height:n.last()-l.height);let r=new yt;l.group.forEach(((s,l,i)=>{r.push(g(l)?t:r.last()+i[l-1].columnWidth());let a=g(o)&&e.length>1;s instanceof vt?(s.y=a?n[o]+e[o].height-s.height:n[o],s.x=r[l]):s.forEach(((t,i)=>{t.y=g(i)?a?n[o]+e[o].height-t.height:n[o]:a?s[i-1].y-t.height:s[i-1].y+s[i-1].height,t.x=r[l]}))}))}))}function f(e){let t=i.margins-o/2,n=new yt;e.forEach(((l,o)=>{0===o?n.push(t):n.push(n.last()+e[o-1].width);let r=new yt;l.group.forEach(((l,a,c)=>{r.push(g(a)?s?t:i.height-t-l.rowHeight():s?r.last()+c[a-1].rowHeight():r.last()-l.rowHeight());let u=g(o)&&e.length>1;l instanceof vt?(l.x=u?n[o]+e[o].width-l.width:n[o],l.y=r[a]):l.forEach(((t,i)=>{t.x=g(i)?u?n[o]+e[o].width-t.width:n[o]:u?l[i-1].x-t.width:l[i-1].x+l[i-1].width,t.y=s?r[a]:r[a-1]-t.height}))}))}))}function g(e){return 0===e}}class dt{constructor(e){this.placed=!1,this.nestOrder=e}place(){return this.placed=!0,this}}class vt extends dt{constructor([e,t,n,s,l]){super(l),this.nestOrder=l,this.quantityID=e,this.id=t,this.width=n,this.height=s,this.area=this.height*this.width,this.x=0,this.y=0}columnWidth(){return this.width}rowHeight(){return this.height}}class $t extends dt{constructor(e,t,n,s,l){super(l),this.width=e,this.height=t,this.area=n,this.group=s}}class wt extends $t{constructor(e,t,n,s,l){super(e,t,n,s,l)}}class xt extends $t{constructor(e,t,n,s,l,o,i){super(e,t,n,s),this.columns=l,this.sheet_width=i.width,this.sheet_height=i.height,this.sheet_area=i.width*i.height,this.waste_area=this.sheet_area-this.area,this.waste_ratio=1-this.area/this.sheet_area,this.id="Feuille "+o,delete this.placed}}class yt extends Array{first(){return this[0]}last(){return this[this.length-1]}flatten(e=1){let t=this;for(;e--;)t=t.flat();return t}ascendingWidth(){return new yt(...this).sort(((e,t)=>t.width!=e.width?t.width-e.width:t.height-e.height))}ascendingHeight(){return new yt(...this).sort(((e,t)=>t.height!=e.height?t.height-e.height:t.width-e.width))}notPlaced(){return this.filter((e=>!e.placed))}widest(){return this.notPlaced().ascendingWidth().first()}narrowest(){return this.notPlaced().ascendingWidth().last()}tallest(){return this.notPlaced().ascendingHeight().first()}shortest(){return this.notPlaced().ascendingHeight().last()}biggest(){return this.sort(((e,t)=>t.area-e.area)).notPlaced().first()}smallest(){return this.sort(((e,t)=>e.area-t.area)).notPlaced().first()}placementBy(){return{widest:this.widest(),tallest:this.tallest(),biggest:this.biggest()}[this.length?this[0].nestOrder:""]}totalWidth(){return this.reduce(((e,t)=>t instanceof yt?e+t.ascendingWidth().first().width:e+t.width),0)}totalHeight(){return this.reduce(((e,t)=>t instanceof yt?e+t.ascendingHeight().first().height:e+t.height),0)}totalArea(){return this.flatten(3).reduce(((e,t)=>e+t.area),0)}columnWidth(){return this.flat().ascendingWidth().first().width}columnHeight(){return this.totalHeight()}rowWidth(){return this.totalWidth()}rowHeight(){return this.flat().ascendingHeight().first().height}remainingWidth(e){return e-this.totalWidth()}remainingHeight(e){return e-this.totalHeight()}fitsColumn(e,t){return this.filter((t=>t.width<=e[0].width)).fitsSheetRow(e,t)}fitsRow(e,t){return this.filter((t=>t.height<=e[0].height)).fitsSheetColumn(e,t)}fitsSheetColumn(e,t){return this.notPlaced().filter((n=>n.width<e.remainingWidth(t))).placementBy()}fitsSheetRow(e,t){return this.notPlaced().filter((n=>n.height<e.remainingHeight(t))).placementBy()}}const _t={A:[[0,0],[0,1],[1,4],[2,1],[2,0],[2,1],[0,1]],B:[[0,0],[0,4],[1,4],[2,3],[1,2],[2,1],[1,0],[0,0]],C:[[2,1],[1,0],[0,1],[0,3],[1,4],[2,3]],D:[[0,0],[0,4],[1,4],[2,3],[2,1],[1,0],[0,0]],E:[[2,0],[0,0],[0,2],[1,2],[0,2],[0,4],[2,4]],F:[[0,0],[0,2],[1,2],[0,2],[0,4],[2,4]],G:[[1,2],[2,2],[2,1],[1,0],[0,1],[0,3],[1,4],[2,3]],H:[[0,0],[0,4],[0,2],[2,2],[2,4],[2,0]],I:[[0,0],[2,0],[1,0],[1,4],[0,4],[2,4]],J:[[0,1],[1,0],[2,1],[2,4],[1,4]],K:[[0,0],[0,4],[0,2],[1,2],[2,4],[1,2],[2,0]],L:[[2,1],[2,0],[0,0],[0,4]],M:[[0,0],[0,4],[1,2],[2,4],[2,0]],N:[[0,0],[0,4],[2,0],[2,4]],O:[[2,1],[1,0],[0,1],[0,3],[1,4],[2,3],[2,1]],P:[[0,0],[0,4],[1,4],[2,3],[1,2],[0,2]],Q:[[1,2],[2,1],[1,0],[0,1],[0,3],[1,4],[2,3],[2,1]],R:[[0,0],[0,4],[1,4],[2,3],[1,2],[2,0]],S:[[0,1],[1,0],[2,1],[0,3],[1,4],[2,3]],T:[[1,0],[1,4],[0,4],[2,4]],U:[[0,4],[0,1],[1,0],[2,1],[2,4]],V:[[0,4],[0,3],[1,0],[2,3],[2,4]],W:[[0,4],[0,0],[1,2],[2,0],[2,4]],X:[[0,0],[2,4],[1,2],[0,4],[2,0]],Y:[[1,0],[1,2],[0,4],[1,2],[2,4]],Z:[[2,0],[0,0],[2,4],[0,4]],1:[[0,0],[2,0],[1,0],[1,4],[0,3]],2:[[0,3],[1,4],[2,3],[0,0],[2,0]],3:[[0,1],[1,0],[2,1],[1,2],[2,3],[1,4],[0,3]],4:[[2,0],[2,4],[0,1],[2,1]],5:[[0,1],[1,0],[2,1],[2,2],[1,3],[0,2],[0,4],[2,4]],6:[[0,2],[1,2],[2,1],[1,0],[0,1],[0,3],[1,4],[2,3]],7:[[0,0],[2,4],[0,4],[0,3]],8:[[1,0],[0,1],[2,3],[1,4],[0,3],[2,1],[1,0]],9:[[0,1],[1,0],[2,1],[2,3],[1,4],[0,3],[1,2],[2,2]],0:[[0,1],[0,3],[1,4],[2,3],[2,1],[1,0],[0,1],[2,3]],"=":[[[0,1],[1,3],[2,3],[2,1],[0,1]]],"-":[[0,2],[2,2]],"[":[[0,1],[0,3],[1,3,"+"],[1,3,"-"],[2,3],[2,1],[1,1],[1,3]],"]":[[0,1],[0,3],[1,3],[1,1],[0,1],[2,1,"+"],[2,1,"-"],[2,3]],"'":[[0,1],[0,2],[2,2],[2,1],[0,1],[0,3,"+"],[0,3,"-"],[2,3]],",":[[0,1],[2,1],[2,2,"+"],[2,2,"-"],[0,2],[0,3],[2,3],[2,2]]};function bt(e,t){let n=9;const s=e.sheets,l="00",o="01",i=()=>t.cnc[n].feed,r=()=>t.cnc[n].plunge,a=e.offset.X,c=e.offset.Y,u=e.offset.Z,h=t.material.width/2||30,f=Math.min(t.material.height+10,122),g=t.material.thickness+u,m=g+.25,p=he(Math.max(g-e.tools.profile.cut_depth,0)),d=t.cnc[n].pass_depth,v=p+e.tools.profile.link,$=e.tools.profile.min_size,w=t.tools.profile,x=e.tools.engraver.engrave,y=t.tools.engraver;let _=function(){let[,,,t,,n]=e.csv.contents[0];return`( ${me(new Date,"dd.mm.yyyy HH:MM")} )\n( ${e.name} )\n`+(n?`( ${n} )\n`:"")+"( ------------------ )\nG40 G80 G70\n( ------------------ )\n"+`( ${s.length}: [] ${t||""} )\n`}();return s.forEach(((s,u,j)=>{_+=`( []: ${u+1} )\n`,x&&(_+=k(y),s.columns.forEach(((n,s)=>{n.group.flat().sort(((e,n)=>jt(t.nestTypeColumn,e,n,s))).forEach((t=>_+=function({label:e,engravingDepth:t=.005,xStart:n=1,yStart:s=1,size:i=.3,spacing:r=.1,direction:a="ltr"}){return c();function c(){return t().map(((e,t)=>u(e,t))).join("");function t(){return n(e).split("")}function n(e){return e+"".toUpperCase().replace(/[^A-Z0-9\[\]\,\'\s\-\=]/gi,"")}}function u(e,c){if(c&&u()," "!==e)return`( ------------------ )\n( ${e} )\n`+h()+f();function u(){"ltr"===a?n+=r+i/2:s-=r+i}function h(){return _t[e].map((([e,t,n=""],s)=>s?b({x:p(e),y:d(t),z:v(n)}):b({g:l,x:p(e),y:d(t)})+b({g:o,z:v("-"),f:200}))).join("")}function f(){return b({g:l,z:m})}function p(e){return he(n+$(e))}function d(e){return he(s+$(e))}function v(e){return"+"===e?m:"-"===e?g-t:e}function $(e){return.25*e*i}}}({label:t.id,engravingDepth:e.tools.engraver.cut_depth,xStart:t.x+1+a,yStart:t.y+1+c,size:e.tools.engraver.size,spacing:e.tools.engraver.spacing,direction:e.tools.engraver.direction})))}))),_+=k(w),s.columns.forEach(((e,s)=>{e.group.flat().sort(((e,n)=>jt(t.nestTypeColumn,e,n,s))).forEach((e=>_+=function(e){const s=he(e.x+a),u=he(e.y+c),h=he(s+e.width),f=he(u+e.height),w=he(f-t.cnc[n].ramp);return`( ------------------ )\n( ${e.id} )\n`+b({x:s,y:w,z:m})+b({z:g+.005})+x()+b({g:l,z:m});function x(){const t=e=>b({g:o,y:f,z:e,f:r()})+b({x:h,f:i()})+b({y:u})+b({x:s})+b({y:e===p?f:w});let n=!1,l="",a=g,c=()=>a===p&&(e.width<$||e.height<$);for(;!n;)a=Math.max(a-d,p),c()&&(l+=t(v)),l+=t(a),a===p&&(n=!0);return l}}(e)))})),u!==j.length-1&&(_+="( ------------------ )\nM05 M104\n"+b({g:"90",x:h,y:f})+"M00\nM103 M03 G00\n( ------------------ )\n( CYCLE START :)\n")})),_+="( ------------------ )\nG40 G80 G91 G28 Z0 M5\nG90\n"+b({g:l,x:h,y:f})+"M30",_.replace("M05\n","");function b({g:e="",x:t="",y:n="",z:s="",f:l=""}){return(""===e?e:`G${e} `)+(""===t?t:`X${kt(t)} `)+(""===n?n:`Y${kt(n)} `)+(""===s?s:`Z${kt(s)} `)+(""===l?l:"F"+l)+"\n"}function k(e){return n===e?"":(n=e,`( ------------------ )\nM05\nM06 T${n}\nG43 H${n}\nS${t.cnc[n].spindle} M03\nG54 G90 G00\n`)}}function kt(e){return/\./.test(e)||0===e?e:e.toFixed(1)}function jt(e,t,n,s){return e?s%2==0?n.y!==t.y?n.y-t.y:t.x-n.x:t.y!==n.y?t.y-n.y:n.x-t.x:s%2==0?t.x!==n.x?t.x-n.x:t.y-n.y:n.x!==t.x?n.x-t.x:n.y-t.y}function St(e){let t;return{c(){t=g("div"),t.innerHTML='<div class="splash-img svelte-gujsac"></div> \n        <h1 class="svelte-gujsac"><span>Ahhh! Nest:</span></h1> \n        <h6 class="svelte-gujsac"><span>sauver une feuille, peut-être deux</span></h6>',w(t,"class","splash svelte-gujsac")},m(e,n){u(e,t,n)},d(e){e&&h(t)}}}function Pt(e){let t,n,l,o,i,r,a,f,m,p,v,x,y,_,b,k;o=new _e({}),o.$on("update",e[2]),a=new gt({}),a.$on("update",e[2]),m=new Le({}),m.$on("update",e[2]),x=new Ke({});let j=!e[0].sheets.length&&St();return{c(){t=d(),n=g("div"),l=g("div"),Q(o.$$.fragment),i=d(),r=g("div"),Q(a.$$.fragment),f=d(),Q(m.$$.fragment),p=d(),v=g("div"),Q(x.$$.fragment),y=d(),j&&j.c(),w(l,"class","import svelte-gujsac"),w(r,"class","controls svelte-gujsac"),w(v,"class","main svelte-gujsac"),w(n,"class","container svelte-gujsac")},m(s,h){u(s,t,h),u(s,n,h),c(n,l),V(o,l,null),c(n,i),c(n,r),V(a,r,null),c(r,f),V(m,r,null),c(n,p),c(n,v),V(x,v,null),c(v,y),j&&j.m(v,null),_=!0,b||(k=[$(document.body,"change",e[2]),$(v,"click",e[3])],b=!0)},p(e,[t]){e[0].sheets.length?j&&(j.d(1),j=null):j||(j=St(),j.c(),j.m(v,null))},i(e){_||(Y(o.$$.fragment,e),Y(a.$$.fragment,e),Y(m.$$.fragment,e),Y(x.$$.fragment,e),_=!0)},o(e){J(o.$$.fragment,e),J(a.$$.fragment,e),J(m.$$.fragment,e),J(x.$$.fragment,e),_=!1},d(e){e&&h(t),e&&h(n),X(o),X(a),X(m),X(x),j&&j.d(),b=!1,s(k)}}}function Ct(e,t,n){let s,l;function o(){a(ae,s.name=s.csv.contents[0][1],s),a(ae,s.csv.panels=s.csv.contents.slice(s.csv.headerRows),s),function(){let e=pt(t(),l);function t(){return l.units?s.csv.panels.map((e=>[e[0],e[1],ge(e[2]),ge(e[3])])):s.csv.panels}a(ae,s.sheets=e.sheets,s),a(ae,s.errors=e.errors,s)}(),a(ae,s.csv.output=s.csv.contents.join("\n"),s),a(ae,s.cnc=bt(s,l),s)}i(e,ae,(e=>n(0,s=e))),i(e,re,(e=>n(1,l=e))),o();return[s,l,o,()=>a(re,l.show=!1,l)]}return new class extends te{constructor(e){super(),ee(this,e,Ct,Pt,o,{})}}({target:document.body})}();
//# sourceMappingURL=app.js.map
