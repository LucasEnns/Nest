var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function a(t){t.forEach(e)}function s(t){return"function"==typeof t}function l(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function i(e,n,a){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const a=e.subscribe(...n);return a.unsubscribe?()=>a.unsubscribe():a}(n,a))}function c(t){return null==t?"":t}function r(t,e,n=e){return t.set(n),e}function o(t,e){t.appendChild(e)}function u(t,e,n){t.insertBefore(e,n||null)}function h(t){t.parentNode.removeChild(t)}function p(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function d(t){return document.createElement(t)}function g(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function f(t){return document.createTextNode(t)}function m(){return f(" ")}function v(){return f("")}function w(t,e,n,a){return t.addEventListener(e,n,a),()=>t.removeEventListener(e,n,a)}function x(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function b(t){return""===t?void 0:+t}function y(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function _(t,e){t.value=null==e?"":e}function $(t,e,n,a){t.style.setProperty(e,n,a?"important":"")}function k(t,e){for(let n=0;n<t.options.length;n+=1){const a=t.options[n];if(a.__value===e)return void(a.selected=!0)}}function C(t,e,n){t.classList[n?"add":"remove"](e)}let z;function M(t){z=t}function P(){if(!z)throw new Error("Function called outside component initialization");return z}function S(){const t=P();return(e,n)=>{const a=t.$$.callbacks[e];if(a){const s=function(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}(e,n);a.slice().forEach((e=>{e.call(t,s)}))}}}const E=[],H=[],N=[],R=[],O=Promise.resolve();let j=!1;function W(t){N.push(t)}let B=!1;const D=new Set;function A(){if(!B){B=!0;do{for(let t=0;t<E.length;t+=1){const e=E[t];M(e),I(e.$$)}for(E.length=0;H.length;)H.pop()();for(let t=0;t<N.length;t+=1){const e=N[t];D.has(e)||(D.add(e),e())}N.length=0}while(E.length);for(;R.length;)R.pop()();j=!1,B=!1,D.clear()}}function I(t){if(null!==t.fragment){t.update(),a(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(W)}}const G=new Set;function T(t,e){t&&t.i&&(G.delete(t),t.i(e))}function F(t,e,n,a){if(t&&t.o){if(G.has(t))return;G.add(t),undefined.c.push((()=>{G.delete(t),a&&(n&&t.d(1),a())})),t.o(e)}}function L(t){t&&t.c()}function U(t,n,l){const{fragment:i,on_mount:c,on_destroy:r,after_update:o}=t.$$;i&&i.m(n,l),W((()=>{const n=c.map(e).filter(s);r?r.push(...n):a(n),t.$$.on_mount=[]})),o.forEach(W)}function Y(t,e){const n=t.$$;null!==n.fragment&&(a(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function q(t,e){-1===t.$$.dirty[0]&&(E.push(t),j||(j=!0,O.then(A)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function K(e,s,l,i,c,r,o=[-1]){const u=z;M(e);const p=s.props||{},d=e.$$={fragment:null,ctx:null,props:r,update:t,not_equal:c,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:[]),callbacks:n(),dirty:o,skip_bound:!1};let g=!1;if(d.ctx=l?l(e,p,((t,n,...a)=>{const s=a.length?a[0]:n;return d.ctx&&c(d.ctx[t],d.ctx[t]=s)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](s),g&&q(e,t)),n})):[],d.update(),g=!0,a(d.before_update),d.fragment=!!i&&i(d.ctx),s.target){if(s.hydrate){const t=function(t){return Array.from(t.childNodes)}(s.target);d.fragment&&d.fragment.l(t),t.forEach(h)}else d.fragment&&d.fragment.c();s.intro&&T(e.$$.fragment),U(e,s.target,s.anchor),A()}M(u)}class V{$destroy(){Y(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const X=[];function Z(e,n=t){let a;const s=[];function i(t){if(l(e,t)&&(e=t,a)){const t=!X.length;for(let t=0;t<s.length;t+=1){const n=s[t];n[1](),X.push(n,e)}if(t){for(let t=0;t<X.length;t+=2)X[t][0](X[t+1]);X.length=0}}}return{set:i,update:function(t){i(t(e))},subscribe:function(l,c=t){const r=[l,c];return s.push(r),1===s.length&&(a=n(i)||t),l(e),()=>{const t=s.indexOf(r);-1!==t&&s.splice(t,1),0===s.length&&(a(),a=null)}}}}const J={aaa:"< update key to update settings",language:navigator.language.slice(0,2)||navigator.userLanguage.slice(0,2)||"fr",material:{width:49,height:97,thickness:.75,margins:.3,cut_depth:.75,link:.02},nestTypeColumn:!1,nestOrder:"widest",nestDirectionBottom:!0,units:!1,tool:9,cnc:{1:{name:'3/16" End mill',type:"End mill",diameter:.1875,spindle:12e3,feed:150,plunge:100,ramp:1,max_depth:.875,pass_depth:.125,step_over:.125},2:{name:'3/4" End mill',type:"End mill",diameter:.75,spindle:15e3,feed:200,plunge:75,ramp:5,max_depth:3,pass_depth:.25,step_over:.625},3:{name:'1/8" Engraver/Drill',type:"Ballnose",diameter:.125,spindle:12e3,feed:50,plunge:50,ramp:1,max_depth:.75,pass_depth:.0625,step_over:.0625},4:{name:'3/4" Edge Finisher',type:"Edge Finisher",diameter:.75,spindle:2e4,feed:75,plunge:30,ramp:4,max_depth:2.25,pass_depth:2.25,step_over:.05},5:{name:"5mm Drill",type:"Drill",diameter:.19685,spindle:8500,feed:0,plunge:75,ramp:0,max_depth:1,pass_depth:1,step_over:0},6:{name:'1/4" Endmill',type:"Endmill",diameter:.25,spindle:18e3,feed:150,plunge:40,ramp:1,max_depth:1,pass_depth:.25,step_over:.2},7:{name:"8mm Drill",type:"Drill",diameter:.31496,spindle:8500,feed:0,plunge:75,ramp:0,max_depth:1,pass_depth:1,step_over:0},8:{name:"32mm Surfacing",type:"Surfacing",diameter:1.25985,spindle:12e3,feed:200,plunge:30,ramp:5,max_depth:1,pass_depth:.125,step_over:0},9:{name:'3/8" Endmill',type:"Endmill",diameter:.375,spindle:18e3,feed:400,plunge:70,ramp:1,max_depth:.875,pass_depth:.875,step_over:.3},10:{name:'1/2" Endmill',type:"Endmill",diameter:.5,spindle:18e3,feed:400,plunge:70,ramp:1,max_depth:.875,pass_depth:.875,step_over:.4},11:{name:"10mm Drill",type:"Drill",diameter:.3937,spindle:18e3,feed:0,plunge:75,ramp:0,max_depth:1,pass_depth:1,step_over:0},12:{name:'90deg 1.5" V-bit',type:"V-bit",diameter:1.5,spindle:12e3,feed:75,plunge:30,ramp:1,max_depth:.75,pass_depth:.25,step_over:.125}},show:!0,activePanel:""},Q={en:[["Project","New","Material","Plywood",""],["Borders","Top","Right","Bottom","Left"],[0,0,0,0,0],["Metric?",!1],["Panel","Quantity","Width","Height"],[1,0,0,0]],fr:[["Projét","Nouveau","Matèriaux","Plaquage","Modèle Portes",""],["Borders","haut","droit","bas","gauche"],[0,0,0,0,0],["Metric?",!1],["Panneaux","Quantité","Largeur","Hauteur"],[1,0,0,0]]},tt={name:"",sheets:[],errors:[],csv:{new:[...Q[J.language]],contents:[...Q[J.language]],panels:[],headerRows:5,output:""},svg:"",cnc:""},et=((t,e)=>{const n=t=>JSON.stringify(t,null,2);localStorage.getItem(t)||localStorage.setItem(t,n(e));const a=JSON.parse(localStorage.getItem(t));var s,l;s=a,l=e,Object.keys(s).join()!==Object.keys(l).join()&&localStorage.setItem(t,n(e));const{subscribe:i,set:c,update:r}=Z(a);return{subscribe:i,set:e=>(localStorage.setItem(t,n(e)),c(e)),update:r}})("settings",J),nt=((t,e)=>{const n=t=>JSON.stringify(t,null,2);sessionStorage.getItem(t)||sessionStorage.setItem(t,n(e));const{subscribe:a,set:s,update:l}=Z(JSON.parse(sessionStorage.getItem(t)));return{subscribe:a,set:e=>(sessionStorage.setItem(t,n(e)),s(e)),update:l}})("data",tt);function at(t){return isNaN(t)?t.includes("/")&&!t.includes(".")?t.split(" ").filter((t=>""!==t)).reduce(((t,e)=>{if(e.includes("/")){let n=e.split("/").filter((t=>""!==t));return t+lt(n[0]/n[1])}return t+lt(e)}),0):t:lt(t)}function st(t,e){return Math.round(parseFloat(t)*10**e)/10**e}function lt(t){return st(t,5)}function it(t){return lt(25.4*t)}function ct(t){return lt(t/25.4)}function rt(t,e){const n=t=>("0"+t).slice(-2),a={mm:n(t.getMonth()+1),dd:n(t.getDate()),yy:t.getFullYear().toString().slice(-2),yyyy:t.getFullYear(),HH:n(t.getHours()),MM:n(t.getMinutes()),SS:n(t.getSeconds()),T:"T",h:"h"};return e.replace(/mm|dd|yyyy|yy|HH|MM|SS/gi,(t=>a[t]))}function ot(t,e,n){const a=t.slice();return a[24]=e[n],a[25]=e,a[26]=n,a}function ut(e){let n,a,s,l,i;return{c(){n=d("div"),a=m(),s=d("div"),l=m(),i=d("div"),x(n,"class","file-icon dl-csv-block blocked svelte-1gvaxb4"),x(s,"class","file-icon dl-svg-block blocked svelte-1gvaxb4"),x(i,"class","file-icon dl-cnc-block blocked svelte-1gvaxb4")},m(t,e){u(t,n,e),u(t,a,e),u(t,s,e),u(t,l,e),u(t,i,e)},p:t,d(t){t&&h(n),t&&h(a),t&&h(s),t&&h(l),t&&h(i)}}}function ht(t){let e,n,a,s,l,i,c,r,p,g,f,v,w,b,y,_,$;return{c(){e=d("a"),n=d("span"),n.textContent="download .csv file (alt + v)",i=m(),c=d("a"),r=d("span"),r.textContent="download .svg file (alt + g)",v=m(),w=d("a"),b=d("span"),b.textContent="download .cnc file (alt + c)",x(n,"class","svelte-1gvaxb4"),x(e,"href",a="data:text/plain;charset=utf-8,"+encodeURIComponent(t[7].csv.output)),x(e,"download",s=t[7].name+t[8]()+".csv"),x(e,"role","button"),x(e,"data-lang",l=t[6].language),x(e,"data-fr","téléchargez le fichier .csv  (alt + v)"),x(e,"class","file-icon dl-csv svelte-1gvaxb4"),x(r,"class","svelte-1gvaxb4"),x(c,"href",p="data:text/plain;charset=utf-8,"+encodeURIComponent(t[7].svg)),x(c,"download",g=t[7].name+t[8]()+".svg"),x(c,"alt","download svg file"),x(c,"role","button"),x(c,"data-lang",f=t[6].language),x(c,"data-fr","telechargez le fichier .svg (alt + g)"),x(c,"class","file-icon dl-svg svelte-1gvaxb4"),x(b,"class","svelte-1gvaxb4"),x(w,"href",y="data:text/plain;charset=utf-8,"+encodeURIComponent(t[7].cnc)),x(w,"download",_=t[7].name+t[8]()+".cnc"),x(w,"role","button"),x(w,"data-lang",$=t[6].language),x(w,"data-fr","telechargez le fichier .cnc (alt + c)"),x(w,"class","file-icon dl-cnc svelte-1gvaxb4")},m(a,s){u(a,e,s),o(e,n),t[15](e),u(a,i,s),u(a,c,s),o(c,r),t[16](c),u(a,v,s),u(a,w,s),o(w,b),t[17](w)},p(t,n){128&n&&a!==(a="data:text/plain;charset=utf-8,"+encodeURIComponent(t[7].csv.output))&&x(e,"href",a),128&n&&s!==(s=t[7].name+t[8]()+".csv")&&x(e,"download",s),64&n&&l!==(l=t[6].language)&&x(e,"data-lang",l),128&n&&p!==(p="data:text/plain;charset=utf-8,"+encodeURIComponent(t[7].svg))&&x(c,"href",p),128&n&&g!==(g=t[7].name+t[8]()+".svg")&&x(c,"download",g),64&n&&f!==(f=t[6].language)&&x(c,"data-lang",f),128&n&&y!==(y="data:text/plain;charset=utf-8,"+encodeURIComponent(t[7].cnc))&&x(w,"href",y),128&n&&_!==(_=t[7].name+t[8]()+".cnc")&&x(w,"download",_),64&n&&$!==($=t[6].language)&&x(w,"data-lang",$)},d(n){n&&h(e),t[15](null),n&&h(i),n&&h(c),t[16](null),n&&h(v),n&&h(w),t[17](null)}}}function pt(t){let e,n,a,s,l,i,c,r,p,g=t[7].csv.contents[0][t[24]]+"",v=t[26];function b(){t[19].call(i,t[24])}const $=()=>t[20](i,v),k=()=>t[20](null,v);return{c(){e=d("h6"),n=d("span"),a=f(g),s=f(":"),l=m(),i=d("input"),c=m(),x(i,"type","text"),x(i,"class","svelte-1gvaxb4"),x(e,"class","svelte-1gvaxb4")},m(h,d){u(h,e,d),o(e,n),o(n,a),o(n,s),o(e,l),o(e,i),_(i,t[7].csv.contents[0][t[24]+1]),$(),o(e,c),r||(p=w(i,"input",b),r=!0)},p(e,n){t=e,128&n&&g!==(g=t[7].csv.contents[0][t[24]]+"")&&y(a,g),128&n&&i.value!==t[7].csv.contents[0][t[24]+1]&&_(i,t[7].csv.contents[0][t[24]+1]),v!==t[26]&&(k(),v=t[26],$())},d(t){t&&h(e),k(),r=!1,p()}}}function dt(t){let e,n=t[7].csv.contents[0][t[24]]&&pt(t);return{c(){n&&n.c(),e=v()},m(t,a){n&&n.m(t,a),u(t,e,a)},p(t,a){t[7].csv.contents[0][t[24]]?n?n.p(t,a):(n=pt(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(t){n&&n.d(t),t&&h(e)}}}function gt(e){let n,s,l,i,c,r,g,f,v,b,y,_,$,k,z,M,P,S,E,H,N,R;function O(t,e){return t[7].sheets.length?ht:ut}document.title=n="Ahhh Nest: "+e[7].csv.contents[0][1]||"Ahhh! Nest";let j=O(e),W=j(e),B=[0,2,4],D=[];for(let t=0;t<3;t+=1)D[t]=dt(ot(e,B,t));return{c(){s=m(),l=d("div"),i=d("input"),c=m(),r=d("label"),g=d("span"),g.textContent="open .csv file (alt + o)",b=m(),y=d("div"),_=d("span"),_.textContent="new file (alt + n)",k=m(),W.c(),z=m(),M=d("div"),P=d("span"),P.textContent="cnc + project settings (alt + p)",E=m(),H=d("div");for(let t=0;t<3;t+=1)D[t].c();x(i,"class","inputfile svelte-1gvaxb4"),x(i,"name","file"),x(i,"id","file"),x(i,"type","file"),x(g,"class","svelte-1gvaxb4"),x(r,"for","file"),x(r,"data-lang",f=e[6].language),x(r,"data-fr","ouvrir fichier .csv (alt + o)"),x(r,"class",v="file-icon "+(e[0]?"badfile":"upload")+" svelte-1gvaxb4"),x(_,"class","svelte-1gvaxb4"),x(y,"tabindex","0"),x(y,"role","button"),x(y,"data-lang",$=e[6].language),x(y,"data-fr","nouveau fichier (alt + n)"),x(y,"class","file-icon new svelte-1gvaxb4"),x(P,"class","svelte-1gvaxb4"),x(M,"tabindex","0"),x(M,"role","button"),x(M,"data-lang",S=e[6].language),x(M,"data-fr","cnc + projet parametre  (alt + p)"),x(M,"class","file-icon setting-icon svelte-1gvaxb4"),C(M,"active",e[6].show),x(l,"class","file-mgmt svelte-1gvaxb4"),x(H,"class","project")},m(t,n){u(t,s,n),u(t,l,n),o(l,i),e[13](i),o(l,c),o(l,r),o(r,g),o(l,b),o(l,y),o(y,_),o(l,k),W.m(l,null),o(l,z),o(l,M),o(M,P),u(t,E,n),u(t,H,n);for(let t=0;t<3;t+=1)D[t].m(H,null);N||(R=[w(window,"keydown",e[9]),w(window,"keyup",e[10]),w(i,"change",e[12]),w(r,"mouseover",e[14]),w(y,"click",e[11]),w(M,"click",e[18])],N=!0)},p(t,[e]){if(128&e&&n!==(n="Ahhh Nest: "+t[7].csv.contents[0][1]||"Ahhh! Nest")&&(document.title=n),64&e&&f!==(f=t[6].language)&&x(r,"data-lang",f),1&e&&v!==(v="file-icon "+(t[0]?"badfile":"upload")+" svelte-1gvaxb4")&&x(r,"class",v),64&e&&$!==($=t[6].language)&&x(y,"data-lang",$),j===(j=O(t))&&W?W.p(t,e):(W.d(1),W=j(t),W&&(W.c(),W.m(l,z))),64&e&&S!==(S=t[6].language)&&x(M,"data-lang",S),64&e&&C(M,"active",t[6].show),144&e){let n;for(B=[0,2,4],n=0;n<3;n+=1){const a=ot(t,B,n);D[n]?D[n].p(a,e):(D[n]=dt(a),D[n].c(),D[n].m(H,null))}for(;n<3;n+=1)D[n].d(1)}},i:t,o:t,d(t){t&&h(s),t&&h(l),e[13](null),W.d(),t&&h(E),t&&h(H),p(D,t),N=!1,a(R)}}}function ft(t,e,n){let a,s;i(t,et,(t=>n(6,a=t))),i(t,nt,(t=>n(7,s=t)));const l=S();let c,o,u,h,p=!1,d={},g=[];function f(){r(et,a.units=s.csv.contents[3][1],a),l("update")}function m(){r(nt,s.csv.contents=[...s.csv.new],s),f(),g[0].focus()}return[p,c,o,u,g,h,a,s,()=>rt(new Date,"-HHhMM"),function(t){d[t.code]=!0;const e=t=>(d.AltLeft||d.AltRight)&&d[t];e("KeyO")&&setTimeout((()=>file.click()),140),e("KeyN")&&m(),e("KeyV")&&c.click(),e("KeyG")&&o.click(),e("KeyC")&&u.click(),e("KeyP")&&r(et,a.show=!a.show,a)},function(t){delete d[t.code]},m,function(){if(h.files[0]){if(h.files[0].name.includes(".csv")){let t=new FileReader;t.readAsText(h.files[0]),t.onload=function(t){r(nt,s.csv.contents=function(t,e=1,n=","){for(var a=new RegExp("(\\"+n+'|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\'+n+"\\r\\n]*))","gi"),s=[[]],l=null;l=a.exec(t);){var i=l[1];if(i.length&&i!=n&&s.push([]),l[2])var c=l[2].replace(new RegExp('""',"g"),'"');else c=l[3];/\d/.test(c)&&(c=at(c)),s[s.length-1].push(c)}return s.filter(((t,n)=>n<e||t.filter((t=>""!==t)).length))}(t.target.result,s.csv.headerRows),s),n(0,p=!1),f()}}n(0,p=!0)}},function(t){H[t?"unshift":"push"]((()=>{h=t,n(5,h)}))},()=>n(0,p=!1),function(t){H[t?"unshift":"push"]((()=>{c=t,n(1,c)}))},function(t){H[t?"unshift":"push"]((()=>{o=t,n(2,o)}))},function(t){H[t?"unshift":"push"]((()=>{u=t,n(3,u)}))},()=>r(et,a.show=!a.show,a),function(t){s.csv.contents[0][t+1]=this.value,nt.set(s)},function(t,e){H[t?"unshift":"push"]((()=>{g[e]=t,n(4,g)}))}]}class mt extends V{constructor(t){super(),K(this,t,ft,gt,l,{})}}function vt(t,e,n){const a=t.slice();return a[21]=e[n],a[22]=e,a[23]=n,a}function wt(t,e,n){const a=t.slice();return a[24]=e[n],a}function xt(t){let e,n,a,s,l,i,c=t[1].errors.length>1?"S":"",r=t[1].errors,g=[];for(let e=0;e<r.length;e+=1)g[e]=bt(wt(t,r,e));return{c(){e=d("h5"),n=f("ERROR"),a=f(c),s=f(":"),l=m();for(let t=0;t<g.length;t+=1)g[t].c();i=v()},m(t,c){u(t,e,c),o(e,n),o(e,a),o(e,s),u(t,l,c);for(let e=0;e<g.length;e+=1)g[e].m(t,c);u(t,i,c)},p(t,e){if(2&e&&c!==(c=t[1].errors.length>1?"S":"")&&y(a,c),2&e){let n;for(r=t[1].errors,n=0;n<r.length;n+=1){const a=wt(t,r,n);g[n]?g[n].p(a,e):(g[n]=bt(a),g[n].c(),g[n].m(i.parentNode,i))}for(;n<g.length;n+=1)g[n].d(1);g.length=r.length}},d(t){t&&h(e),t&&h(l),p(g,t),t&&h(i)}}}function bt(t){let e,n,a=t[24]+"";return{c(){e=d("p"),n=f(a)},m(t,a){u(t,e,a),o(e,n)},p(t,e){2&e&&a!==(a=t[24]+"")&&y(n,a)},d(t){t&&h(e)}}}function yt(t){let e,n,s,l,i,r,p,g,f,v,y,$,k,C,z,M,P,S,E,H;function N(){t[13].call(s,t[22],t[23])}function R(){t[14].call(r,t[22],t[23])}function O(){t[15].call(f,t[22],t[23])}function j(){t[16].call(C,t[22],t[23])}function W(...e){return t[17](t[21],...e)}return{c(){e=d("ul"),n=d("li"),s=d("input"),l=m(),i=d("li"),r=d("input"),p=m(),g=d("li"),f=d("input"),$=m(),k=d("li"),C=d("input"),P=m(),x(s,"type","text"),x(s,"class","svelte-123a4p7"),x(n,"class","svelte-123a4p7"),x(r,"type","number"),x(r,"min","0"),x(r,"max","100"),x(r,"class","svelte-123a4p7"),x(i,"class","svelte-123a4p7"),x(f,"type","number"),x(f,"min","0"),x(f,"max",v=t[2]("width")),x(f,"step",y=t[0]?.25:.03125),x(f,"class","svelte-123a4p7"),x(g,"class","svelte-123a4p7"),x(C,"type","number"),x(C,"min","0"),x(C,"max",z=t[2]("height")),x(C,"step",M=t[0]?.25:.03125),x(C,"class","svelte-123a4p7"),x(k,"class","svelte-123a4p7"),x(e,"class",S=c(t[3].activePanel==t[21][0]?"active":"")+" svelte-123a4p7")},m(a,c){u(a,e,c),o(e,n),o(n,s),_(s,t[21][0]),o(e,l),o(e,i),o(i,r),_(r,t[21][1]),o(e,p),o(e,g),o(g,f),_(f,t[21][2]),o(e,$),o(e,k),o(k,C),_(C,t[21][3]),o(e,P),E||(H=[w(s,"input",N),w(s,"focus",$t),w(r,"input",R),w(r,"focus",$t),w(f,"input",O),w(f,"focus",$t),w(C,"input",j),w(C,"focus",$t),w(e,"mouseenter",W),w(e,"mouseleave",t[18])],E=!0)},p(n,a){t=n,2&a&&s.value!==t[21][0]&&_(s,t[21][0]),2&a&&b(r.value)!==t[21][1]&&_(r,t[21][1]),4&a&&v!==(v=t[2]("width"))&&x(f,"max",v),1&a&&y!==(y=t[0]?.25:.03125)&&x(f,"step",y),2&a&&b(f.value)!==t[21][2]&&_(f,t[21][2]),4&a&&z!==(z=t[2]("height"))&&x(C,"max",z),1&a&&M!==(M=t[0]?.25:.03125)&&x(C,"step",M),2&a&&b(C.value)!==t[21][3]&&_(C,t[21][3]),10&a&&S!==(S=c(t[3].activePanel==t[21][0]?"active":"")+" svelte-123a4p7")&&x(e,"class",S)},d(t){t&&h(e),E=!1,a(H)}}}function _t(e){let n,s,l,i,c,r,g,v,b,_,$,k,C,z,M,P,S,E,H,N,R,O,j,W,B,D,A,I,G,T,F,L,U,Y,q=e[1].csv.contents[4][0]+"",K=e[1].csv.contents[4][1]+"",V=e[1].csv.contents[4][2]+"",X=e[1].csv.contents[4][3]+"",Z=e[1].errors.length&&xt(e),J=e[1].csv.panels,Q=[];for(let t=0;t<J.length;t+=1)Q[t]=yt(vt(e,J,t));return{c(){n=d("div"),s=d("h6"),l=d("span"),l.textContent="Units:",i=m(),c=d("label"),r=d("input"),g=m(),v=d("div"),$=m(),k=d("div"),Z&&Z.c(),C=m(),z=d("ul"),M=d("li"),P=d("span"),S=f(q),E=m(),H=d("li"),N=d("span"),R=f(K),O=m(),j=d("li"),W=d("span"),B=f(V),D=m(),A=d("li"),I=d("span"),G=f(X),T=m();for(let t=0;t<Q.length;t+=1)Q[t].c();F=m(),L=d("ul"),L.textContent="+",x(r,"type","checkbox"),x(r,"class","svelte-123a4p7"),x(v,"class","slider units svelte-123a4p7"),x(v,"data-lang",b=e[3].language),x(c,"class","switch svelte-123a4p7"),x(s,"data-lang",_=e[3].language),x(s,"data-fr","Unités: "),x(P,"class","svelte-123a4p7"),x(M,"class","svelte-123a4p7"),x(N,"class","svelte-123a4p7"),x(H,"class","svelte-123a4p7"),x(W,"class","svelte-123a4p7"),x(j,"class","svelte-123a4p7"),x(I,"class","svelte-123a4p7"),x(A,"class","svelte-123a4p7"),x(z,"class","header svelte-123a4p7"),x(L,"class","new-row svelte-123a4p7"),x(L,"role","button"),x(k,"class","svelte-123a4p7"),x(n,"class","wrapper svelte-123a4p7")},m(t,a){u(t,n,a),o(n,s),o(s,l),o(s,i),o(s,c),o(c,r),r.checked=e[3].units,o(c,g),o(c,v),o(n,$),o(n,k),Z&&Z.m(k,null),o(k,C),o(k,z),o(z,M),o(M,P),o(P,S),o(z,E),o(z,H),o(H,N),o(N,R),o(z,O),o(z,j),o(j,W),o(W,B),o(z,D),o(z,A),o(A,I),o(I,G),o(k,T);for(let t=0;t<Q.length;t+=1)Q[t].m(k,null);o(k,F),o(k,L),U||(Y=[w(r,"change",e[7]),w(r,"change",e[8]),w(M,"click",e[9]),w(H,"click",e[10]),w(j,"click",e[11]),w(A,"click",e[12]),w(L,"click",e[4])],U=!0)},p(t,[e]){if(8&e&&(r.checked=t[3].units),8&e&&b!==(b=t[3].language)&&x(v,"data-lang",b),8&e&&_!==(_=t[3].language)&&x(s,"data-lang",_),t[1].errors.length?Z?Z.p(t,e):(Z=xt(t),Z.c(),Z.m(k,C)):Z&&(Z.d(1),Z=null),2&e&&q!==(q=t[1].csv.contents[4][0]+"")&&y(S,q),2&e&&K!==(K=t[1].csv.contents[4][1]+"")&&y(R,K),2&e&&V!==(V=t[1].csv.contents[4][2]+"")&&y(B,V),2&e&&X!==(X=t[1].csv.contents[4][3]+"")&&y(G,X),15&e){let n;for(J=t[1].csv.panels,n=0;n<J.length;n+=1){const a=vt(t,J,n);Q[n]?Q[n].p(a,e):(Q[n]=yt(a),Q[n].c(),Q[n].m(k,F))}for(;n<Q.length;n+=1)Q[n].d(1);Q.length=J.length}},i:t,o:t,d(t){t&&h(n),Z&&Z.d(),p(Q,t),U=!1,a(Y)}}}function $t(){this.select()}function kt(t,e,n){let a,s;i(t,nt,(t=>n(1,a=t))),i(t,et,(t=>n(3,s=t)));const l=S();function c(t){r(nt,a.csv.panels=a.csv.panels.sort(((e,n)=>e[t]-n[t])),a)}function o(t){r(nt,a.csv.panels=a.csv.panels.sort(((e,n)=>n[t]-e[t])),a)}let u,h;return t.$$.update=()=>{2&t.$$.dirty&&n(0,u=a.csv.contents[3][1]),t.$$.dirty,9&t.$$.dirty&&n(2,h=t=>{let e=s.material[t]-2*s.material.margins;return u?it(e):e})},[u,a,h,s,function(){let t=[a.csv.panels.length+1,0,0,0];r(nt,a.csv.contents=[...a.csv.contents,t],a),l("update")},c,o,function(){let t=u?ct:it;a.csv.panels.forEach((e=>{e[2]=t(e[2]),e[3]=t(e[3])})),r(nt,a.csv.contents[3][1]=r(et,s.units=!u,s),a)},function(){s.units=this.checked,et.set(s)},()=>c(0),()=>o(1),()=>o(2),()=>o(3),function(t,e){t[e][0]=this.value},function(t,e){t[e][1]=b(this.value)},function(t,e){t[e][2]=b(this.value)},function(t,e){t[e][3]=b(this.value)},t=>r(et,s.activePanel=t[0],s),()=>r(et,s.activePanel="",s)]}class Ct extends V{constructor(t){super(),K(this,t,kt,_t,l,{})}}function zt(t,e,n){const a=t.slice();return a[18]=e[n],a}function Mt(t,e,n){const a=t.slice();return a[15]=e[n],a[17]=n,a}function Pt(t){let e,n,a,s,l,i,c,r,p,g,v,w,b,_,k,C,z,M,P,S,E=t[5].sheets[t[0]].id+"",H=st(t[5].sheets[t[0]].area/144,2)+"",N=st(t[5].sheets[t[0]].waste_area/144,2)+"",R=st(100*t[5].sheets[t[0]].waste_ratio,2)+"";return{c(){e=d("div"),n=d("h4"),a=f(E),s=m(),l=d("p"),i=f("area des panneaux:\n      "),c=f(H),r=f("\n      pi"),p=d("sup"),p.textContent="2",g=m(),v=d("p"),w=f("area de perte:\n      "),b=f(N),_=f("\n      pi"),k=d("sup"),k.textContent="2",C=m(),z=d("p"),M=f("% de perte: "),P=f(R),S=f("%"),x(p,"class","svelte-1nnwdec"),x(k,"class","svelte-1nnwdec"),x(e,"class","infocard svelte-1nnwdec"),$(e,"left",t[3]+"px"),$(e,"top",t[2]+"px")},m(t,h){u(t,e,h),o(e,n),o(n,a),o(e,s),o(e,l),o(l,i),o(l,c),o(l,r),o(l,p),o(e,g),o(e,v),o(v,w),o(v,b),o(v,_),o(v,k),o(e,C),o(e,z),o(z,M),o(z,P),o(z,S)},p(t,n){33&n&&E!==(E=t[5].sheets[t[0]].id+"")&&y(a,E),33&n&&H!==(H=st(t[5].sheets[t[0]].area/144,2)+"")&&y(c,H),33&n&&N!==(N=st(t[5].sheets[t[0]].waste_area/144,2)+"")&&y(b,N),33&n&&R!==(R=st(100*t[5].sheets[t[0]].waste_ratio,2)+"")&&y(P,R),8&n&&$(e,"left",t[3]+"px"),4&n&&$(e,"top",t[2]+"px")},d(t){t&&h(e)}}}function St(t){let e,n,s,l,i,c,r,p,d,m,v,b,_,k,C=t[18].id+"";return{c(){e=g("rect"),p=g("text"),d=f(C),$(e,"stroke-width",t[6].cnc[t[6].tool].diameter*t[7]+"px"),x(e,"class",n="panel "+(t[6].activePanel==t[18].id?"active":"")+" print svelte-1nnwdec"),x(e,"id",s=t[18].id),x(e,"x",l=(t[18].x+t[13](t[17]).x)*t[7]),x(e,"y",i=(t[12](t[18].y,t[18].height)+t[13](t[17]).y)*t[7]),x(e,"width",c=t[18].width*t[7]),x(e,"height",r=t[18].height*t[7]),$(p,"font-size",t[7]*(t[18].id.length>6?Math.min(.4*t[18].height,2.5):Math.min(.8*t[18].height,5))+"px"),x(p,"class",m="id "+(t[6].activePanel==t[18].id?"active":"")+" print svelte-1nnwdec"),x(p,"x",v=(t[18].x+t[13](t[17]).x+t[18].width/2)*t[7]),x(p,"y",b=(t[12](t[18].y,t[18].height)+t[13](t[17]).y+Math.min(.8*t[18].height,5)/3+t[18].height/2)*t[7])},m(n,a){u(n,e,a),u(n,p,a),o(p,d),_||(k=[w(e,"mouseover",t[8]),w(e,"mouseleave",t[9])],_=!0)},p(t,a){64&a&&$(e,"stroke-width",t[6].cnc[t[6].tool].diameter*t[7]+"px"),96&a&&n!==(n="panel "+(t[6].activePanel==t[18].id?"active":"")+" print svelte-1nnwdec")&&x(e,"class",n),32&a&&s!==(s=t[18].id)&&x(e,"id",s),32&a&&l!==(l=(t[18].x+t[13](t[17]).x)*t[7])&&x(e,"x",l),32&a&&i!==(i=(t[12](t[18].y,t[18].height)+t[13](t[17]).y)*t[7])&&x(e,"y",i),32&a&&c!==(c=t[18].width*t[7])&&x(e,"width",c),32&a&&r!==(r=t[18].height*t[7])&&x(e,"height",r),32&a&&C!==(C=t[18].id+"")&&y(d,C),32&a&&$(p,"font-size",t[7]*(t[18].id.length>6?Math.min(.4*t[18].height,2.5):Math.min(.8*t[18].height,5))+"px"),96&a&&m!==(m="id "+(t[6].activePanel==t[18].id?"active":"")+" print svelte-1nnwdec")&&x(p,"class",m),32&a&&v!==(v=(t[18].x+t[13](t[17]).x+t[18].width/2)*t[7])&&x(p,"x",v),32&a&&b!==(b=(t[12](t[18].y,t[18].height)+t[13](t[17]).y+Math.min(.8*t[18].height,5)/3+t[18].height/2)*t[7])&&x(p,"y",b)},d(t){t&&h(e),t&&h(p),_=!1,a(k)}}}function Et(t){let e,n,s,l,i,c,r,d,f,m,v=t[15].group,b=[];for(let e=0;e<v.length;e+=1)b[e]=St(zt(t,v,e));return{c(){e=g("g"),n=g("rect"),d=g("g");for(let t=0;t<b.length;t+=1)b[t].c();$(n,"stroke-width",t[6].material.margins*t[7]+"px"),x(n,"class","sheet print svelte-1nnwdec"),x(n,"id",s=t[17]),x(n,"x",l=(t[13](t[17]).x+t[6].material.margins/2)*t[7]),x(n,"y",i=(t[13](t[17]).y+t[6].material.margins/2)*t[7]),x(n,"width",c=(t[15].sheet_width-t[6].material.margins)*t[7]),x(n,"height",r=(t[15].sheet_height-t[6].material.margins)*t[7]),x(e,"id","sheets"),x(d,"id","panels")},m(a,s){u(a,e,s),o(e,n),u(a,d,s);for(let t=0;t<b.length;t+=1)b[t].m(d,null);f||(m=[w(n,"mouseover",t[10]),w(n,"mouseleave",t[11])],f=!0)},p(t,e){if(64&e&&$(n,"stroke-width",t[6].material.margins*t[7]+"px"),64&e&&l!==(l=(t[13](t[17]).x+t[6].material.margins/2)*t[7])&&x(n,"x",l),64&e&&i!==(i=(t[13](t[17]).y+t[6].material.margins/2)*t[7])&&x(n,"y",i),96&e&&c!==(c=(t[15].sheet_width-t[6].material.margins)*t[7])&&x(n,"width",c),96&e&&r!==(r=(t[15].sheet_height-t[6].material.margins)*t[7])&&x(n,"height",r),13280&e){let n;for(v=t[15].group,n=0;n<v.length;n+=1){const a=zt(t,v,n);b[n]?b[n].p(a,e):(b[n]=St(a),b[n].c(),b[n].m(d,null))}for(;n<b.length;n+=1)b[n].d(1);b.length=v.length}},d(t){t&&h(e),t&&h(d),p(b,t),f=!1,a(m)}}}function Ht(e){let n,a,s,l,i,c,r,v=e[1]&&Pt(e),w=e[5].sheets,b=[];for(let t=0;t<w.length;t+=1)b[t]=Et(Mt(e,w,t));return{c(){v&&v.c(),n=m(),a=d("div"),s=g("svg");for(let t=0;t<b.length;t+=1)b[t].c();l=f(">"),x(s,"class","print svelte-1nnwdec"),x(s,"version","1.1"),x(s,"xmlns","http://www.w3.org/2000/svg"),x(s,"xmlns:xlink","http://www.w3.org/1999/xlink"),x(s,"width",i=e[13](e[5].sheets.length-1).w*e[7]||0),x(s,"height",c=e[13](e[5].sheets.length-1).h*e[7]||0),x(s,"viewBox",r="0 0 "+(e[13](e[5].sheets.length-1).w*e[7]||0)+" "+(e[13](e[5].sheets.length-1).h*e[7]||0)),x(s,"preserveAspectRatio","xMidYMid meet"),x(a,"class","viewer svelte-1nnwdec")},m(t,i){v&&v.m(t,i),u(t,n,i),u(t,a,i),o(a,s);for(let t=0;t<b.length;t+=1)b[t].m(s,null);o(s,l),e[14](a)},p(t,[e]){if(t[1]?v?v.p(t,e):(v=Pt(t),v.c(),v.m(n.parentNode,n)):v&&(v.d(1),v=null),16352&e){let n;for(w=t[5].sheets,n=0;n<w.length;n+=1){const a=Mt(t,w,n);b[n]?b[n].p(a,e):(b[n]=Et(a),b[n].c(),b[n].m(s,l))}for(;n<b.length;n+=1)b[n].d(1);b.length=w.length}32&e&&i!==(i=t[13](t[5].sheets.length-1).w*t[7]||0)&&x(s,"width",i),32&e&&c!==(c=t[13](t[5].sheets.length-1).h*t[7]||0)&&x(s,"height",c),32&e&&r!==(r="0 0 "+(t[13](t[5].sheets.length-1).w*t[7]||0)+" "+(t[13](t[5].sheets.length-1).h*t[7]||0))&&x(s,"viewBox",r)},i:t,o:t,d(t){v&&v.d(t),t&&h(n),t&&h(a),p(b,t),e[14](null)}}}function Nt(t,e,n){let a,s;i(t,nt,(t=>n(5,a=t))),i(t,et,(t=>n(6,s=t)));let l,c,o=!1,u=0,h=0;var p;return p=()=>{r(nt,a.svg=c.innerHTML.toString(),a)},P().$$.after_update.push(p),[l,o,u,h,c,a,s,90,function(){r(et,s.activePanel=this.id,s)},function(){r(et,s.activePanel="",s)},function(){n(1,o=!0);let t=this.getBoundingClientRect();n(2,u=(t.bottom-t.top)/2+t.top),n(3,h=(t.right-t.left)/2+t.left),n(0,l=this.id)},function(){n(1,o=!1)},function(t,e){return s.material.height-e-t},function(t){let e=Math.ceil(a.sheets.length/5),n=Math.ceil(a.sheets.length/e),l=Math.ceil((t+1)/n)-1;return{x:t%n*s.material.width,y:l*s.material.height,w:n*s.material.width,h:e*s.material.height}},function(t){H[t?"unshift":"push"]((()=>{c=t,n(4,c)}))}]}class Rt extends V{constructor(t){super(),K(this,t,Nt,Ht,l,{})}}function Ot(e){let n,s,l,i,c,r,p,g,v,y,$,z,M,P,S,E,H,N,R,O,j,B,D,A,I,G,T,F,L,U,Y,q,K,V,X,Z,J,Q,tt,et,nt,at,st,lt,it,ct,rt,ot,ut,ht,pt,dt,gt,ft,mt,vt,wt,xt,bt,yt,_t,$t,kt,Ct,zt,Mt,Pt,St,Et,Ht,Nt,Rt,Ot,Wt,Bt,Dt,At,It,Gt,Tt,Ft,Lt,Ut,Yt,qt,Kt,Vt,Xt,Zt,Jt,Qt,te,ee,ne,ae,se,le,ie,ce,re,oe,ue,he,pe,de,ge,fe,me,ve,we,xe,be,ye,_e,$e,ke,Ce,ze,Me,Pe,Se,Ee,He,Ne,Re,Oe,je,We,Be,De,Ae,Ie,Ge,Te,Fe,Le,Ue,Ye,qe,Ke,Ve,Xe,Ze,Je,Qe,tn,en,nn,an,sn,ln,cn,rn,on,un,hn,pn,dn,gn,fn,mn,vn;return{c(){n=d("div"),s=d("div"),s.textContent="X",l=m(),i=d("div"),c=d("h2"),r=d("span"),r.textContent="Settings",g=m(),v=d("div"),y=d("div"),$=d("h3"),z=d("span"),z.textContent="Nest from:",P=m(),S=d("label"),E=d("input"),H=m(),N=d("div"),O=m(),j=d("div"),B=d("h3"),D=d("span"),D.textContent="Nest with:",I=m(),G=d("label"),T=d("input"),F=m(),L=d("div"),Y=m(),q=d("div"),K=d("h3"),V=d("span"),V.textContent="Nest by:",Z=m(),J=d("select"),Q=d("option"),tt=d("span"),tt.textContent=""+(e[1]?"plus large":"widest"),et=d("option"),nt=d("span"),nt.textContent=""+(e[1]?"plus haut":"tallest"),at=d("option"),st=d("span"),st.textContent=""+(e[1]?"plus grand":"biggest"),lt=f("\n        \\"),it=m(),ct=d("div"),rt=d("h3"),ot=d("span"),ot.textContent="Sheet info:",ht=m(),pt=d("h5"),dt=d("span"),dt.textContent="Width:",gt=m(),ft=d("input"),vt=m(),wt=d("h5"),xt=d("span"),xt.textContent="Height:",bt=m(),yt=d("input"),$t=m(),kt=d("h5"),Ct=d("span"),Ct.textContent="Thickness:",zt=m(),Mt=d("input"),St=m(),Et=d("div"),Ht=d("h5"),Nt=d("span"),Nt.textContent="Cut depth:",Rt=m(),Ot=d("input"),Bt=m(),Dt=d("div"),At=d("h5"),It=d("span"),It.textContent="Margins:",Gt=m(),Tt=d("input"),Lt=m(),Ut=d("div"),Yt=d("div"),qt=d("h3"),Kt=d("span"),Kt.textContent="Profile cutting tool:",Xt=m(),Zt=d("h5"),Jt=d("span"),Jt.textContent="Tool #:",Qt=m(),te=d("input"),ae=m(),se=d("div"),le=d("h5"),ie=d("span"),ie.textContent="Name:",ce=m(),re=d("input"),ue=m(),he=d("div"),pe=d("h5"),de=d("span"),de.textContent="Diameter:",ge=m(),fe=d("input"),ve=m(),we=d("div"),xe=d("h5"),be=d("span"),be.textContent="Max cut thickness:",ye=m(),_e=d("input"),ke=m(),Ce=d("div"),ze=d("h5"),Me=d("span"),Me.textContent="Max depth/pass:",Pe=m(),Se=d("input"),Ee=m(),He=d("span"),He.textContent="in",Re=m(),Oe=d("div"),je=d("h5"),We=d("span"),We.textContent="Spindle speed:",Be=m(),De=d("input"),Ae=m(),Ie=d("span"),Ie.textContent="RPM",Te=m(),Fe=d("div"),Le=d("h5"),Ue=d("span"),Ue.textContent="Feed rate:",Ye=m(),qe=d("input"),Ke=m(),Ve=d("span"),Ve.textContent="in/min",Ze=m(),Je=d("div"),Qe=d("h5"),tn=d("span"),tn.textContent="Plunge rate:",en=m(),nn=d("input"),an=m(),sn=d("span"),sn.textContent="in/min",cn=m(),rn=d("div"),on=d("h5"),un=d("span"),un.textContent="Plunge ramp:",hn=m(),pn=d("input"),dn=m(),gn=d("span"),gn.textContent="in",x(s,"class","close svelte-b55pza"),x(s,"role","button"),x(c,"data-lang",p=e[0].language),x(c,"data-fr","Parametre"),x(c,"class","svelte-b55pza"),x(i,"class","title"),x($,"data-lang",M=e[0].language),x($,"data-fr","Nest apartir de: "),x($,"class","svelte-b55pza"),x(E,"type","checkbox"),x(E,"class","svelte-b55pza"),x(N,"class","slider direction svelte-b55pza"),x(N,"data-lang",R=e[0].language),x(S,"class","switch svelte-b55pza"),x(y,"class","input-wrapper"),x(B,"data-lang",A=e[0].language),x(B,"data-fr","Nest avec: "),x(B,"class","svelte-b55pza"),x(T,"type","checkbox"),x(T,"class","svelte-b55pza"),x(L,"class","slider type svelte-b55pza"),x(L,"data-lang",U=e[0].language),x(G,"class","switch svelte-b55pza"),x(j,"class","input-wrapper"),x(K,"data-lang",X=e[0].language),x(K,"data-fr","Nest par le: "),x(K,"class","svelte-b55pza"),Q.__value="widest",Q.value=Q.__value,et.__value="tallest",et.value=et.__value,at.__value="biggest",at.value=at.__value,x(J,"class","svelte-b55pza"),void 0===e[0].nestOrder&&W((()=>e[5].call(J))),x(q,"class","input-wrapper"),x(rt,"data-lang",ut=e[0].language),x(rt,"data-fr","Info sur les feuilles: "),x(rt,"class","svelte-b55pza"),x(ft,"class","input svelte-b55pza"),x(ft,"type","number"),x(ft,"step","0.0625"),x(pt,"data-lang",mt=e[0].language),x(pt,"data-fr","Largeur: "),x(pt,"class","svelte-b55pza"),x(yt,"class","input svelte-b55pza"),x(yt,"type","number"),x(yt,"step","0.0625"),x(wt,"data-lang",_t=e[0].language),x(wt,"data-fr","Hauteur: "),x(wt,"class","svelte-b55pza"),x(Mt,"class","input svelte-b55pza"),x(Mt,"type","number"),x(Mt,"step","0.005"),x(kt,"data-lang",Pt=e[0].language),x(kt,"data-fr","Épaisseur: "),x(kt,"class","svelte-b55pza"),x(ct,"class","input-wrapper"),x(Ot,"class","input svelte-b55pza"),x(Ot,"type","number"),x(Ot,"step","0.05"),x(Ht,"data-lang",Wt=e[0].language),x(Ht,"data-fr","Profondeur coupe:: "),x(Ht,"class","svelte-b55pza"),x(Et,"class","input-wrapper"),x(Tt,"class","input svelte-b55pza"),x(Tt,"type","number"),x(Tt,"step","0.05"),x(At,"data-lang",Ft=e[0].language),x(At,"data-fr","Marge: "),x(At,"class","svelte-b55pza"),x(Dt,"class","input-wrapper"),x(v,"class","general svelte-b55pza"),x(qt,"data-lang",Vt=e[0].language),x(qt,"data-fr","Outil pour la decoupe: "),x(qt,"class","svelte-b55pza"),x(te,"class","input svelte-b55pza"),x(te,"type","number"),x(te,"step","1"),x(te,"min","1"),x(te,"max",ee=Object.keys(e[0].cnc).length),x(Zt,"data-lang",ne=e[0].language),x(Zt,"data-fr","Outil #: "),x(Zt,"class","svelte-b55pza"),x(Yt,"class","input-wrapper"),x(re,"class","input svelte-b55pza"),x(re,"type","text"),x(le,"data-lang",oe=e[0].language),x(le,"data-fr","Nom: "),x(le,"class","svelte-b55pza"),x(se,"class","input-wrapper"),x(fe,"class","input svelte-b55pza"),x(fe,"type","number"),x(fe,"step","0.03125"),x(pe,"data-lang",me=e[0].language),x(pe,"data-fr","Diametre: "),x(pe,"class","svelte-b55pza"),x(he,"class","input-wrapper"),x(_e,"class","input svelte-b55pza"),x(_e,"type","number"),x(_e,"step","0.03125"),x(xe,"data-lang",$e=e[0].language),x(xe,"data-fr","Max épaisseur coupe: "),x(xe,"class","svelte-b55pza"),x(we,"class","input-wrapper"),x(Se,"class","input svelte-b55pza"),x(Se,"type","number"),x(Se,"step","10"),x(ze,"data-lang",Ne=e[0].language),x(ze,"data-fr","Max profondeur/passe: "),x(ze,"class","svelte-b55pza"),x(Ce,"class","input-wrapper"),x(De,"class","input svelte-b55pza"),x(De,"type","number"),x(De,"step","10"),x(je,"data-lang",Ge=e[0].language),x(je,"data-fr","Vitesse spindle: "),x(je,"class","svelte-b55pza"),x(Oe,"class","input-wrapper"),x(qe,"class","input svelte-b55pza"),x(qe,"type","number"),x(qe,"step","10"),x(Le,"data-lang",Xe=e[0].language),x(Le,"data-fr","Vitesse de coupe: "),x(Le,"class","svelte-b55pza"),x(Fe,"class","input-wrapper"),x(nn,"class","input svelte-b55pza"),x(nn,"type","number"),x(nn,"step","10"),x(Qe,"data-lang",ln=e[0].language),x(Qe,"data-fr","Vitesse de plonge: "),x(Qe,"class","svelte-b55pza"),x(Je,"class","input-wrapper"),x(pn,"class","input svelte-b55pza"),x(pn,"type","number"),x(pn,"step","10"),x(on,"data-lang",fn=e[0].language),x(on,"data-fr","Longeur de plonge: "),x(on,"class","svelte-b55pza"),x(rn,"class","input-wrapper"),x(Ut,"class","cnc svelte-b55pza"),x(n,"class","settings svelte-b55pza"),C(n,"active",e[0].show)},m(t,a){u(t,n,a),o(n,s),o(n,l),o(n,i),o(i,c),o(c,r),o(n,g),o(n,v),o(v,y),o(y,$),o($,z),o(y,P),o(y,S),o(S,E),E.checked=e[0].nestDirectionBottom,o(S,H),o(S,N),o(v,O),o(v,j),o(j,B),o(B,D),o(j,I),o(j,G),o(G,T),T.checked=e[0].nestTypeColumn,o(G,F),o(G,L),o(v,Y),o(v,q),o(q,K),o(K,V),o(q,Z),o(q,J),o(J,Q),o(Q,tt),o(J,et),o(et,nt),o(J,at),o(at,st),o(J,lt),k(J,e[0].nestOrder),o(v,it),o(v,ct),o(ct,rt),o(rt,ot),o(ct,ht),o(ct,pt),o(pt,dt),o(pt,gt),o(pt,ft),_(ft,e[0].material.width),o(ct,vt),o(ct,wt),o(wt,xt),o(wt,bt),o(wt,yt),_(yt,e[0].material.height),o(ct,$t),o(ct,kt),o(kt,Ct),o(kt,zt),o(kt,Mt),_(Mt,e[0].material.thickness),o(v,St),o(v,Et),o(Et,Ht),o(Ht,Nt),o(Ht,Rt),o(Ht,Ot),_(Ot,e[0].material.cut_depth),o(v,Bt),o(v,Dt),o(Dt,At),o(At,It),o(At,Gt),o(At,Tt),_(Tt,e[0].material.margins),o(n,Lt),o(n,Ut),o(Ut,Yt),o(Yt,qt),o(qt,Kt),o(Yt,Xt),o(Yt,Zt),o(Zt,Jt),o(Zt,Qt),o(Zt,te),_(te,e[0].tool),o(Ut,ae),o(Ut,se),o(se,le),o(le,ie),o(le,ce),o(le,re),_(re,e[0].cnc[e[0].tool].name),o(Ut,ue),o(Ut,he),o(he,pe),o(pe,de),o(pe,ge),o(pe,fe),_(fe,e[0].cnc[e[0].tool].diameter),o(Ut,ve),o(Ut,we),o(we,xe),o(xe,be),o(xe,ye),o(xe,_e),_(_e,e[0].cnc[e[0].tool].max_depth),o(Ut,ke),o(Ut,Ce),o(Ce,ze),o(ze,Me),o(ze,Pe),o(ze,Se),_(Se,e[0].cnc[e[0].tool].pass_depth),o(ze,Ee),o(ze,He),o(Ut,Re),o(Ut,Oe),o(Oe,je),o(je,We),o(je,Be),o(je,De),_(De,e[0].cnc[e[0].tool].spindle),o(je,Ae),o(je,Ie),o(Ut,Te),o(Ut,Fe),o(Fe,Le),o(Le,Ue),o(Le,Ye),o(Le,qe),_(qe,e[0].cnc[e[0].tool].feed),o(Le,Ke),o(Le,Ve),o(Ut,Ze),o(Ut,Je),o(Je,Qe),o(Qe,tn),o(Qe,en),o(Qe,nn),_(nn,e[0].cnc[e[0].tool].plunge),o(Qe,an),o(Qe,sn),o(Ut,cn),o(Ut,rn),o(rn,on),o(on,un),o(on,hn),o(on,pn),_(pn,e[0].cnc[e[0].tool].ramp),o(on,dn),o(on,gn),mn||(vn=[w(s,"click",e[2]),w(E,"change",e[3]),w(T,"change",e[4]),w(J,"change",e[5]),w(ft,"click",jt),w(ft,"input",e[6]),w(yt,"click",jt),w(yt,"input",e[7]),w(Mt,"click",jt),w(Mt,"input",e[8]),w(Ot,"click",jt),w(Ot,"input",e[9]),w(Tt,"click",jt),w(Tt,"input",e[10]),w(te,"click",jt),w(te,"input",e[11]),w(re,"click",jt),w(re,"input",e[12]),w(fe,"click",jt),w(fe,"input",e[13]),w(_e,"click",jt),w(_e,"input",e[14]),w(Se,"click",jt),w(Se,"input",e[15]),w(De,"click",jt),w(De,"input",e[16]),w(qe,"click",jt),w(qe,"input",e[17]),w(nn,"click",jt),w(nn,"input",e[18]),w(pn,"click",jt),w(pn,"input",e[19])],mn=!0)},p(t,[e]){1&e&&p!==(p=t[0].language)&&x(c,"data-lang",p),1&e&&M!==(M=t[0].language)&&x($,"data-lang",M),1&e&&(E.checked=t[0].nestDirectionBottom),1&e&&R!==(R=t[0].language)&&x(N,"data-lang",R),1&e&&A!==(A=t[0].language)&&x(B,"data-lang",A),1&e&&(T.checked=t[0].nestTypeColumn),1&e&&U!==(U=t[0].language)&&x(L,"data-lang",U),1&e&&X!==(X=t[0].language)&&x(K,"data-lang",X),1&e&&k(J,t[0].nestOrder),1&e&&ut!==(ut=t[0].language)&&x(rt,"data-lang",ut),1&e&&b(ft.value)!==t[0].material.width&&_(ft,t[0].material.width),1&e&&mt!==(mt=t[0].language)&&x(pt,"data-lang",mt),1&e&&b(yt.value)!==t[0].material.height&&_(yt,t[0].material.height),1&e&&_t!==(_t=t[0].language)&&x(wt,"data-lang",_t),1&e&&b(Mt.value)!==t[0].material.thickness&&_(Mt,t[0].material.thickness),1&e&&Pt!==(Pt=t[0].language)&&x(kt,"data-lang",Pt),1&e&&b(Ot.value)!==t[0].material.cut_depth&&_(Ot,t[0].material.cut_depth),1&e&&Wt!==(Wt=t[0].language)&&x(Ht,"data-lang",Wt),1&e&&b(Tt.value)!==t[0].material.margins&&_(Tt,t[0].material.margins),1&e&&Ft!==(Ft=t[0].language)&&x(At,"data-lang",Ft),1&e&&Vt!==(Vt=t[0].language)&&x(qt,"data-lang",Vt),1&e&&ee!==(ee=Object.keys(t[0].cnc).length)&&x(te,"max",ee),1&e&&b(te.value)!==t[0].tool&&_(te,t[0].tool),1&e&&ne!==(ne=t[0].language)&&x(Zt,"data-lang",ne),1&e&&re.value!==t[0].cnc[t[0].tool].name&&_(re,t[0].cnc[t[0].tool].name),1&e&&oe!==(oe=t[0].language)&&x(le,"data-lang",oe),1&e&&b(fe.value)!==t[0].cnc[t[0].tool].diameter&&_(fe,t[0].cnc[t[0].tool].diameter),1&e&&me!==(me=t[0].language)&&x(pe,"data-lang",me),1&e&&b(_e.value)!==t[0].cnc[t[0].tool].max_depth&&_(_e,t[0].cnc[t[0].tool].max_depth),1&e&&$e!==($e=t[0].language)&&x(xe,"data-lang",$e),1&e&&b(Se.value)!==t[0].cnc[t[0].tool].pass_depth&&_(Se,t[0].cnc[t[0].tool].pass_depth),1&e&&Ne!==(Ne=t[0].language)&&x(ze,"data-lang",Ne),1&e&&b(De.value)!==t[0].cnc[t[0].tool].spindle&&_(De,t[0].cnc[t[0].tool].spindle),1&e&&Ge!==(Ge=t[0].language)&&x(je,"data-lang",Ge),1&e&&b(qe.value)!==t[0].cnc[t[0].tool].feed&&_(qe,t[0].cnc[t[0].tool].feed),1&e&&Xe!==(Xe=t[0].language)&&x(Le,"data-lang",Xe),1&e&&b(nn.value)!==t[0].cnc[t[0].tool].plunge&&_(nn,t[0].cnc[t[0].tool].plunge),1&e&&ln!==(ln=t[0].language)&&x(Qe,"data-lang",ln),1&e&&b(pn.value)!==t[0].cnc[t[0].tool].ramp&&_(pn,t[0].cnc[t[0].tool].ramp),1&e&&fn!==(fn=t[0].language)&&x(on,"data-lang",fn),1&e&&C(n,"active",t[0].show)},i:t,o:t,d(t){t&&h(n),mn=!1,a(vn)}}}function jt(){this.select()}function Wt(t,e,n){let a;i(t,et,(t=>n(0,a=t)));const s="fr"===a.language;return[a,s,()=>r(et,a.show=!1,a),function(){a.nestDirectionBottom=this.checked,et.set(a)},function(){a.nestTypeColumn=this.checked,et.set(a)},function(){a.nestOrder=function(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}(this),et.set(a)},function(){a.material.width=b(this.value),et.set(a)},function(){a.material.height=b(this.value),et.set(a)},function(){a.material.thickness=b(this.value),et.set(a)},function(){a.material.cut_depth=b(this.value),et.set(a)},function(){a.material.margins=b(this.value),et.set(a)},function(){a.tool=b(this.value),et.set(a)},function(){a.cnc[a.tool].name=this.value,et.set(a)},function(){a.cnc[a.tool].diameter=b(this.value),et.set(a)},function(){a.cnc[a.tool].max_depth=b(this.value),et.set(a)},function(){a.cnc[a.tool].pass_depth=b(this.value),et.set(a)},function(){a.cnc[a.tool].spindle=b(this.value),et.set(a)},function(){a.cnc[a.tool].feed=b(this.value),et.set(a)},function(){a.cnc[a.tool].plunge=b(this.value),et.set(a)},function(){a.cnc[a.tool].ramp=b(this.value),et.set(a)}]}class Bt extends V{constructor(t){super(),K(this,t,Wt,Ot,l,{})}}let Dt="widest";function At(t,e){Dt=e.nestOrder;let n=[],a=e.nestDirectionBottom,s=e.nestTypeColumn,l=e.cnc[e.tool].diameter||.375,i={width:e.material.width||49,height:e.material.height||97,margins:e.material.margins||.25,max_width:()=>i.width-2*i.margins-l,max_height:()=>i.height-2*i.margins-l};return{sheets:function(t){let e=new Ut;if(s){let n=function(t){let e=new Ut;for(;t.notPlaced().length>0;){let n=r(t);e.push(new Tt(n.columnWidth(),n.columnHeight(),n.totalArea(),n,Dt))}return e}(t);for(;n.notPlaced().length>0;){let t=o(n);p(t),e.push(new Lt(t.rowWidth(),t.rowHeight(),t.totalArea(),t.map((t=>t.group)).flatten(2),t,e.length+1,i))}}else{let n=function(t){let e=new Ut;for(;t.notPlaced().length>0;){let n=c(t);e.push(new Ft(n.rowWidth(),n.rowHeight(),n.totalArea(),n,Dt))}return e}(t);for(;n.notPlaced().length>0;){let t=u(n);h(t),e.push(new Lt(t.columnWidth(),t.columnHeight(),t.totalArea(),t.map((t=>t.group)).flatten(2),t,e.length+1,i))}}return e}(new Ut(t.flatMap((t=>function([t,e,a,s]){return c();function c(){return a>i.max_width()||s>i.max_height()?(n.push(`Panneau ${t} est trop gros`),[]):a&&s&&e?r():[]}function r(n=0,i=[]){for(a+=l,s+=l;e>n++;){let l="";e>1&&(l=`${n} sur ${e}`),i.push([l,t,a,s,Dt])}return i}}(t).map((t=>new Gt(t)))))).flat()),errors:n};function c(t){let e=new Ut(t.placementBy().place()),n=e[0].height;for(;t.fitsRow(e,i.max_width());){let a=new Ut(t.fitsRow(e,i.max_width()).place());for(;t.fitsColumn(a,n);)a.push(t.fitsColumn(a,n).place());1===a.length?e.push(a[0]):e.push(a)}return e.ascendingHeight()}function r(t){let e=new Ut(t.placementBy().place()),n=e[0].width;for(;t.fitsColumn(e,i.max_height());){let a=new Ut(t.fitsColumn(e,i.max_height()).place());for(;t.fitsRow(a,n);)a.push(t.fitsRow(a,n).place());1===a.length?e.push(a[0]):e.push(a)}return e.ascendingWidth()}function o(t){let e=new Ut(t.placementBy().place());for(;t.fitsSheetColumn(e,i.max_width());)e.push(t.fitsSheetColumn(e,i.max_width()).place());return e.ascendingHeight()}function u(t){let e=new Ut(t.placementBy().place());for(;t.fitsSheetRow(e,i.max_height());)e.push(t.fitsSheetRow(e,i.max_height()).place());return e.ascendingWidth()}function h(t){let e=i.margins-l/2,n=new Ut;t.forEach(((s,l)=>{0===l?n.push(a?e:i.height-e-s.height):n.push(a?n.last()+t[l-1].height:n.last()-s.height);let c=new Ut;s.group.forEach(((a,s,i)=>{c.push(d(s)?e:c.last()+i[s-1].columnWidth());let r=d(l)&&t.length>1;a instanceof Gt?(a.y=r?n[l]+t[l].height-a.height:n[l],a.x=c[s]):a.forEach(((e,i)=>{e.y=d(i)?r?n[l]+t[l].height-e.height:n[l]:r?a[i-1].y-e.height:a[i-1].y+a[i-1].height,e.x=c[s]}))}))}))}function p(t){let e=i.margins-l/2,n=new Ut;t.forEach(((s,l)=>{0===l?n.push(e):n.push(n.last()+t[l-1].width);let c=new Ut;s.group.forEach(((s,r,o)=>{c.push(d(r)?a?e:i.height-e-s.rowHeight():a?c.last()+o[r-1].rowHeight():c.last()-s.rowHeight());let u=d(l)&&t.length>1;s instanceof Gt?(s.x=u?n[l]+t[l].width-s.width:n[l],s.y=c[r]):s.forEach(((e,i)=>{e.x=d(i)?u?n[l]+t[l].width-e.width:n[l]:u?s[i-1].x-e.width:s[i-1].x+s[i-1].width,e.y=a?c[r]:c[r-1]-e.height}))}))}))}function d(t){return 0===t}}class It{constructor(t){this.placed=!1,this.nestOrder=t}place(){return this.placed=!0,this}}class Gt extends It{constructor([t,e,n,a,s]){super(s),this.nestOrder=s,this.quantityID=t,this.id=e,this.width=n,this.height=a,this.area=this.height*this.width,this.x=0,this.y=0}columnWidth(){return this.width}rowHeight(){return this.height}}class Tt extends It{constructor(t,e,n,a,s){super(s),this.width=t,this.height=e,this.area=n,this.group=a}}class Ft extends Tt{constructor(t,e,n,a,s){super(t,e,n,a,s)}}class Lt extends Tt{constructor(t,e,n,a,s,l,i){super(t,e,n,a),this.columns=s,this.sheet_width=i.width,this.sheet_height=i.height,this.sheet_area=i.width*i.height,this.waste_area=this.sheet_area-this.area,this.waste_ratio=1-this.area/this.sheet_area,this.id="Feuille "+l,delete this.placed}}class Ut extends Array{first(){return this[0]}last(){return this[this.length-1]}flatten(t=1){let e=this;for(;t--;)e=e.flat();return e}ascendingWidth(){return new Ut(...this).sort(((t,e)=>e.width!=t.width?e.width-t.width:e.height-t.height))}ascendingHeight(){return new Ut(...this).sort(((t,e)=>e.height!=t.height?e.height-t.height:e.width-t.width))}notPlaced(){return this.filter((t=>!t.placed))}widest(){return this.notPlaced().ascendingWidth().first()}narrowest(){return this.notPlaced().ascendingWidth().last()}tallest(){return this.notPlaced().ascendingHeight().first()}shortest(){return this.notPlaced().ascendingHeight().last()}biggest(){return this.sort(((t,e)=>e.area-t.area)).notPlaced().first()}smallest(){return this.sort(((t,e)=>t.area-e.area)).notPlaced().first()}placementBy(){return{widest:this.widest(),tallest:this.tallest(),biggest:this.biggest()}[this.length?this[0].nestOrder:""]}totalWidth(){return this.reduce(((t,e)=>e instanceof Ut?t+e.ascendingWidth().first().width:t+e.width),0)}totalHeight(){return this.reduce(((t,e)=>e instanceof Ut?t+e.ascendingHeight().first().height:t+e.height),0)}totalArea(){return this.flatten(3).reduce(((t,e)=>t+e.area),0)}columnWidth(){return this.flat().ascendingWidth().first().width}columnHeight(){return this.totalHeight()}rowWidth(){return this.totalWidth()}rowHeight(){return this.flat().ascendingHeight().first().height}remainingWidth(t){return t-this.totalWidth()}remainingHeight(t){return t-this.totalHeight()}fitsColumn(t,e){return this.filter((e=>e.width<=t[0].width)).fitsSheetRow(t,e)}fitsRow(t,e){return this.filter((e=>e.height<=t[0].height)).fitsSheetColumn(t,e)}fitsSheetColumn(t,e){return this.notPlaced().filter((n=>n.width<t.remainingWidth(e))).placementBy()}fitsSheetRow(t,e){return this.notPlaced().filter((n=>n.height<t.remainingHeight(e))).placementBy()}}function Yt(t,e){const n=t.sheets,a=e.tool,s=e.cnc[a].spindle,l=e.cnc[a].feed,i=e.cnc[a].plunge,c=e.cnc[a].ramp,r=e.material.width/2||30,o=Math.min(e.material.height+10,122),u=e.material.thickness+.25||2,h=e.material.thickness,p=Math.max(h-e.material.cut_depth,0),d=e.cnc[a].pass_depth,g=p+e.material.link,f=e.language.includes("fr");let m=[...function(e,a){let[,,,s,,l]=t.csv.contents[0];return[`( ${rt(new Date,"dd.mm.yyyy HH:MM")} )`,`( ${t.name} )`,l?`( ${l} )`:"",s?`( ${n.length} ${f?"feuilles de":"sheets of"} ${s} )`:`( ${n.length} ${f?"feuilles a couper":"sheets to cut"} )`,"G40 G80 G70","M06 T"+e,"G43 H"+e,`S${a} M03`,"G54 G90"]}(a,s)];return n.forEach((t=>{m.push(`( ${t.id} )`),t.columns.forEach(((t,n)=>{t.group.flat().sort(((t,a)=>e.nestTypeColumn?function(t,e,n){return n%2==0?e.y!==t.y?e.y-t.y:t.x-e.x:t.y!==e.y?t.y-e.y:e.x-t.x}(t,a,n):function(t,e,n){return n%2==0?t.x!==e.x?t.x-e.x:t.y-e.y:e.x!==t.x?e.x-t.x:e.y-t.y}(t,a,n))).forEach((t=>m.push(function(t){const e=lt(t.x),n=lt(t.y),a=lt(e+t.width),s=lt(n+t.height),r=lt(s-c);function o(){const c=t=>[x(e,s,t,i),b(l),y(a),_(n),y(e),_(r)];return!p&&(t.width<5||t.height<5)?c(g):d>=h?"":void 0}return[`( ${f?"coupe panneau":"cutting panel"} ${t.id} )`,t.uniqueID?`( ${t.uniqueID} )`:"",v(e,r,u),$(h+.02),o(),x(e,s,p,i),b(l),y(a),_(n),y(e),_(s),w(u),`( ${f?"fin panneau":"finished panel"} ${t.id} )`]}(t))))})),m.push(["M05 M104",`G90 X${qt(r)} Y${qt(o)}`,"M00","( changez la feuille et )","( cycle start :)","M103 M03"])})),m.pop(),m.push(["G40 G80 G91 G28 Z0 M5",`G00 G90 X${qt(r)} Y${qt(o)}`,"M30"]),m.flat().flat().filter((t=>""!==t)).join("\n");function v(t,e,n){return`G00 X${qt(t)} Y${qt(e)} Z${qt(n)}`}function w(t){return"G00 Z"+qt(t)}function x(t,e,n,a){return`G01 X${qt(t)} Y${qt(e)} Z${qt(n)} F${a}`}function b(t){return"G01 F"+t}function y(t){return"X"+qt(t)}function _(t){return"Y"+qt(t)}function $(t){return"Z"+qt(t)}}function qt(t){return/\./.test(t)||0===t?t:t.toFixed(1)}function Kt(t){let e;return{c(){e=d("div"),e.innerHTML='<div class="splash-img svelte-1skvj2s"></div> \n        <h1 class="svelte-1skvj2s"><span>Ahhh! Nest:</span></h1> \n        <h6 class="svelte-1skvj2s"><span>sauver une feuille, peut-être deux</span></h6>',x(e,"class","splash svelte-1skvj2s")},m(t,n){u(t,e,n)},d(t){t&&h(e)}}}function Vt(t){let e,n,s,l,i,c,r,p,g,f,v,b,y,_,$;l=new mt({}),l.$on("update",t[2]),c=new Ct({}),c.$on("update",t[2]),p=new Bt({}),v=new Rt({});let k=!t[0].sheets.length&&Kt();return{c(){e=m(),n=d("div"),s=d("div"),L(l.$$.fragment),i=m(),L(c.$$.fragment),r=m(),L(p.$$.fragment),g=m(),f=d("div"),L(v.$$.fragment),b=m(),k&&k.c(),x(s,"class","import svelte-1skvj2s"),x(f,"class","main"),x(n,"class","container svelte-1skvj2s")},m(a,h){u(a,e,h),u(a,n,h),o(n,s),U(l,s,null),o(s,i),U(c,s,null),o(s,r),U(p,s,null),o(n,g),o(n,f),U(v,f,null),o(f,b),k&&k.m(f,null),y=!0,_||($=[w(document.body,"change",t[2]),w(f,"click",t[3])],_=!0)},p(t,[e]){t[0].sheets.length?k&&(k.d(1),k=null):k||(k=Kt(),k.c(),k.m(f,null))},i(t){y||(T(l.$$.fragment,t),T(c.$$.fragment,t),T(p.$$.fragment,t),T(v.$$.fragment,t),y=!0)},o(t){F(l.$$.fragment,t),F(c.$$.fragment,t),F(p.$$.fragment,t),F(v.$$.fragment,t),y=!1},d(t){t&&h(e),t&&h(n),Y(l),Y(c),Y(p),Y(v),k&&k.d(),_=!1,a($)}}}function Xt(t,e,n){let a,s;function l(){r(nt,a.name=a.csv.contents[0][1],a),r(nt,a.csv.panels=a.csv.contents.slice(a.csv.headerRows),a),function(){let t=At(e(),s);function e(){return s.units?a.csv.panels.map((t=>[t[0],t[1],ct(t[2]),ct(t[3])])):a.csv.panels}r(nt,a.sheets=t.sheets,a),r(nt,a.errors=t.errors,a)}(),r(nt,a.csv.output=a.csv.contents.join("\n"),a),r(nt,a.cnc=Yt(a,s),a)}i(t,nt,(t=>n(0,a=t))),i(t,et,(t=>n(1,s=t))),l();return[a,s,l,()=>r(et,s.show=!1,s)]}return new class extends V{constructor(t){super(),K(this,t,Xt,Vt,l,{})}}({target:document.body})}();
//# sourceMappingURL=app.js.map
