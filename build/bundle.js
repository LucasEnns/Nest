var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function i(t){t.forEach(e)}function s(t){return"function"==typeof t}function l(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function r(e,n,i){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const i=e.subscribe(...n);return i.unsubscribe?()=>i.unsubscribe():i}(n,i))}function o(t){return null==t?"":t}function a(t,e,n=e){return t.set(n),e}function c(t,e){t.appendChild(e)}function u(t,e,n){t.insertBefore(e,n||null)}function h(t){t.parentNode.removeChild(t)}function d(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function f(t){return document.createElement(t)}function p(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function g(t){return document.createTextNode(t)}function m(){return g(" ")}function v(){return g("")}function w(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function x(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function y(t){return""===t?void 0:+t}function b(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function $(t,e){t.value=null==e?"":e}function _(t,e,n,i){t.style.setProperty(e,n,i?"important":"")}let k;function q(t){k=t}function S(){if(!k)throw new Error("Function called outside component initialization");return k}const E=[],A=[],R=[],H=[],z=Promise.resolve();let C=!1;function W(t){R.push(t)}let O=!1;const N=new Set;function P(){if(!O){O=!0;do{for(let t=0;t<E.length;t+=1){const e=E[t];q(e),L(e.$$)}for(E.length=0;A.length;)A.pop()();for(let t=0;t<R.length;t+=1){const e=R[t];N.has(e)||(N.add(e),e())}R.length=0}while(E.length);for(;H.length;)H.pop()();C=!1,O=!1,N.clear()}}function L(t){if(null!==t.fragment){t.update(),i(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(W)}}const M=new Set;let T;function j(t,e){t&&t.i&&(M.delete(t),t.i(e))}function I(t,e,n,i){if(t&&t.o){if(M.has(t))return;M.add(t),T.c.push((()=>{M.delete(t),i&&(n&&t.d(1),i())})),t.o(e)}}function U(t){t&&t.c()}function B(t,n,l){const{fragment:r,on_mount:o,on_destroy:a,after_update:c}=t.$$;r&&r.m(n,l),W((()=>{const n=o.map(e).filter(s);a?a.push(...n):i(n),t.$$.on_mount=[]})),c.forEach(W)}function F(t,e){const n=t.$$;null!==n.fragment&&(i(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function D(t,e){-1===t.$$.dirty[0]&&(E.push(t),C||(C=!0,z.then(P)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function J(e,s,l,r,o,a,c=[-1]){const u=k;q(e);const d=s.props||{},f=e.$$={fragment:null,ctx:null,props:a,update:t,not_equal:o,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:[]),callbacks:n(),dirty:c,skip_bound:!1};let p=!1;if(f.ctx=l?l(e,d,((t,n,...i)=>{const s=i.length?i[0]:n;return f.ctx&&o(f.ctx[t],f.ctx[t]=s)&&(!f.skip_bound&&f.bound[t]&&f.bound[t](s),p&&D(e,t)),n})):[],f.update(),p=!0,i(f.before_update),f.fragment=!!r&&r(f.ctx),s.target){if(s.hydrate){const t=function(t){return Array.from(t.childNodes)}(s.target);f.fragment&&f.fragment.l(t),t.forEach(h)}else f.fragment&&f.fragment.c();s.intro&&j(e.$$.fragment),B(e,s.target,s.anchor),P()}q(u)}class K{$destroy(){F(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}let V=.375,X=0,G=[],Q={width:49,height:97,margins:.25,max_width:()=>Q.width-2*Q.margins-V,max_height:()=>Q.height-2*Q.margins-V};function Y(t,e=1,n=!1,i=V,s=X,l=Q){G=[];const r=new it(t.slice(e).flatMap((t=>function([t,e,n,i]){if(n>Q.max_width()||i>Q.max_height())return G.push(`Panel ${t} is too big`),[];let s=1,l=[];for(;e>=s;)l.push([`${t} | ${s} of ${e}`,t,parseFloat(n),parseFloat(i)]),s++;return l}(t).map((t=>new tt(t)))))).flat();function o(t){let e=new it(t.widest().place()),n=e[0].width;for(;t.fitsColumn(e);){let i=new it(t.fitsColumn(e).place());for(;t.fitsRow(i,n);)i.push(t.fitsRow(i,n).place());1===i.length?e.push(i[0]):e.push(i)}return e.ascendingWidth()}function a(t){let e=new it(t.widest().place());for(;t.fitsSheet(e);)e.push(t.fitsSheet(e).place());return e}function c(t,e){let n=Q.margins+Q.width*e,i=Q.margins,s=new it;t.forEach(((e,l)=>{0===l?s.push(n):s.push(s.last()+t[l-1].width);let r=new it;e.group.forEach(((t,e,n)=>{0===e?r.push(i):n[e-1]instanceof it?r.push(r.last()+n[e-1].filledHeight()):r.push(r.last()+n[e-1].height),t instanceof tt?(t.x0=s[l],t.y0=r[e]):t.forEach(((n,i)=>{n.x0=0===i?s[l]:t[i-1].x0+t[i-1].width,n.y0=r[e]}))}))}))}return V=i,X=s,Q.width=l.width,Q.height=l.height,Q.margins=l.margins,[r,function(t){let e=function(t){let e=new it;for(;t.notPlaced().length>0;){let n=o(t);e.push(new et(n.columnWidth(),n.columnHeight(),n.columnArea(),n))}return e}(t),n=new it;for(;e.notPlaced().length>0;){let t=a(e);c(t,n.length),n.push(new nt(t.filledWidth(),t.filledHeight(),t.filledArea(),t.map((t=>t.group)).flatten(2),t,n.length+1))}return n}(r),G]}class Z{constructor(){this.placed=!1}place(){return this.placed=!0,this}}class tt extends Z{constructor([t,e,n,i]){super(),this.uniqueID=t,this.id=e,this.width=n+V+X,this.height=i+V+X,this.area=this.height*this.width,this.x0=0,this.y0=0}}class et extends Z{constructor(t,e,n,i){super(),this.width=t,this.height=e,this.area=n,this.group=i}}class nt extends et{constructor(t,e,n,i,s,l){super(t,e,n,i),this.columns=s,this.sheet_width=Q.width,this.sheet_height=Q.height,this.sheet_area=Q.width*Q.height,this.waste_area=this.sheet_area-this.area,this.waste_ratio=1-this.area/this.sheet_area,this.id="Sheet "+l,delete this.placed}}class it extends Array{first(){return this[0]}last(){return this[this.length-1]}flatten(t=1){let e=this;for(;t--;)e=e.flat();return e}shuffle(){return this.length<3?this:new it(...this.slice(1),this.first())}ascendingWidth(){return new it(...this).sort(((t,e)=>e.width!=t.width?e.width-t.width:e.height-t.height))}ascendingHeight(){return new it(...this).sort(((t,e)=>e.height!=t.height?e.height-t.height:e.width-t.width))}notPlaced(){return this.filter((t=>!t.placed))}widest(){return this.notPlaced().ascendingWidth().first()}narrowest(){return this.notPlaced().ascendingWidth().last()}tallest(){return this.notPlaced().ascendingHeight().first()}shortest(){return this.notPlaced().ascendingHeight().last()}biggest(){return this.sort(((t,e)=>e.area-t.area)).notPlaced().first()}totalWidth(){return this.reduce(((t,e)=>e instanceof it?t+e.ascendingWidth().first().width:t+e.width),0)}totalHeight(){return this.reduce(((t,e)=>e instanceof it?t+e.ascendingHeight().first().height:t+e.height),0)}totalArea(){return this.reduce(((t,e)=>t+e.area),0)}columnWidth(){return this.flat().ascendingWidth().first().width}columnHeight(){return this.totalHeight()}columnArea(){return this.flat().totalArea()}filledHeight(){return this.ascendingHeight().first().height}filledWidth(){return this.totalWidth()}filledArea(){return this.flat().totalArea()}remainingWidth(t){return t-this.totalWidth()}remainingHeight(t){return t-this.totalHeight()}fitsColumn(t,e=Q.height){return this.notPlaced().filter((e=>e.width<=t[0].width)).filter((n=>n.height<t.remainingHeight(e))).widest()}fitsRow(t,e){return this.notPlaced().filter((e=>e.height<=t[0].height)).filter((n=>n.width<t.remainingWidth(e))).widest()}fitsSheet(t,e=Q.width){return this.notPlaced().filter((n=>n.width<t.remainingWidth(e))).widest()}}const st=[];function lt(e,n=t){let i;const s=[];function r(t){if(l(e,t)&&(e=t,i)){const t=!st.length;for(let t=0;t<s.length;t+=1){const n=s[t];n[1](),st.push(n,e)}if(t){for(let t=0;t<st.length;t+=2)st[t][0](st[t+1]);st.length=0}}}return{set:r,update:function(t){r(t(e))},subscribe:function(l,o=t){const a=[l,o];return s.push(a),1===s.length&&(i=n(r)||t),l(e),()=>{const t=s.indexOf(a);-1!==t&&s.splice(t,1),0===s.length&&(i(),i=null)}}}}const rt=(t,e)=>{const n=t=>JSON.stringify(t,null,2),i=JSON.parse;null===sessionStorage.getItem(t)&&sessionStorage.setItem(t,n(e));const s=i(sessionStorage.getItem(t)),{subscribe:l,set:r,update:o}=lt(s);return{subscribe:l,set:e=>(sessionStorage.setItem(t,n(e)),r(e)),update:o}};const ot=((t,e)=>{const n=t=>JSON.stringify(t,null,2),i=JSON.parse;null===localStorage.getItem(t)&&localStorage.setItem(t,n(e));const s=i(localStorage.getItem(t)),{subscribe:l,set:r,update:o}=lt(s);return{subscribe:l,set:e=>(localStorage.setItem(t,n(e)),r(e)),update:o}})("settings",{material:{width:49,height:97,margins:.125},cutter:.375,gap:0,units:!1}),at=rt("panels",[]),ct=rt("sheets",[]),ut=rt("csv-file",{}),ht=rt("svg",""),dt=rt("activePanel","");var ft="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var pt,gt;(function(t,e){!function(){function e(t,e){return void 0===e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}function n(t,e,n){var i=new XMLHttpRequest;i.open("GET",t),i.responseType="blob",i.onload=function(){o(i.response,e,n)},i.onerror=function(){console.error("could not download file")},i.send()}function i(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function s(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(n){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var l="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof ft&&ft.global===ft?ft:void 0,r=l.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),o=l.saveAs||("object"!=typeof window||window!==l?function(){}:"download"in HTMLAnchorElement.prototype&&!r?function(t,e,r){var o=l.URL||l.webkitURL,a=document.createElement("a");e=e||t.name||"download",a.download=e,a.rel="noopener","string"==typeof t?(a.href=t,a.origin===location.origin?s(a):i(a.href)?n(t,e,r):s(a,a.target="_blank")):(a.href=o.createObjectURL(t),setTimeout((function(){o.revokeObjectURL(a.href)}),4e4),setTimeout((function(){s(a)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,l,r){if(l=l||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(e(t,r),l);else if(i(t))n(t,l,r);else{var o=document.createElement("a");o.href=t,o.target="_blank",setTimeout((function(){s(o)}))}}:function(t,e,i,s){if((s=s||open("","_blank"))&&(s.document.title=s.document.body.innerText="downloading..."),"string"==typeof t)return n(t,e,i);var o="application/octet-stream"===t.type,a=/constructor/i.test(l.HTMLElement)||l.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||o&&a||r)&&"undefined"!=typeof FileReader){var u=new FileReader;u.onloadend=function(){var t=u.result;t=c?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=t:location=t,s=null},u.readAsDataURL(t)}else{var h=l.URL||l.webkitURL,d=h.createObjectURL(t);s?s.location=d:location.href=d,s=null,setTimeout((function(){h.revokeObjectURL(d)}),4e4)}});l.saveAs=o.saveAs=o,t.exports=o}()})(gt={path:pt,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&gt.path)}},gt.exports),gt.exports;function mt(t){return isNaN(t)?t.includes("/")&&!t.includes(".")?t.split(" ").filter((t=>""!==t)).reduce(((t,e)=>{if(e.includes("/")){let n=e.split("/").filter((t=>""!==t));return t+parseFloat(n[0]/n[1])}return t+parseFloat(e)}),0):t:parseFloat(t)}function vt(t){let e,n,i,s,l;return{c(){e=f("a"),n=f("img"),n.src!==(i="./dl-h.png")&&x(n,"src","./dl-h.png"),x(n,"alt","save svg file"),x(n,"class","svelte-162l9hu"),x(e,"href",s="data:text/plain;charset=utf-8,"+encodeURIComponent(t[4])),x(e,"download",l=t[2].name+".svg"),x(e,"class","svelte-162l9hu")},m(t,i){u(t,e,i),c(e,n)},p(t,n){16&n&&s!==(s="data:text/plain;charset=utf-8,"+encodeURIComponent(t[4]))&&x(e,"href",s),4&n&&l!==(l=t[2].name+".svg")&&x(e,"download",l)},d(t){t&&h(e)}}}function wt(e){let n,s,l,r,o,a,d,p,g,v,b,_,k,q,S,E,A,R,H,z,C,W,O,N,P,L,M,T,j,I,U,B,F,D,J,K;document.title=n=e[2].name;let V=e[4]&&vt(e);return{c(){s=m(),l=f("div"),r=f("input"),o=m(),a=f("label"),d=f("img"),g=m(),V&&V.c(),v=m(),b=f("div"),_=f("div"),k=f("h5"),k.textContent="Material W x H",q=m(),S=f("input"),E=m(),A=f("span"),A.textContent="x",R=m(),H=f("input"),z=m(),C=f("div"),W=f("h5"),W.textContent="Margins",O=m(),N=f("input"),P=m(),L=f("div"),M=f("h5"),M.textContent="Tool Kerf",T=m(),j=f("input"),I=m(),U=f("div"),B=f("h5"),B.textContent="Metric",F=m(),D=f("input"),x(r,"class","inputfile svelte-162l9hu"),x(r,"name","file"),x(r,"id","file"),x(r,"type","file"),d.src!==(p="./"+(e[1]?"bf":"ul-h")+".png")&&x(d,"src",p),x(d,"alt","not a csv file"),x(d,"class","svelte-162l9hu"),x(a,"for","file"),x(a,"class","svelte-162l9hu"),x(l,"class","upload-wrapper svelte-162l9hu"),x(k,"class","svelte-162l9hu"),x(S,"class","input svelte-162l9hu"),x(S,"type","number"),x(A,"class","svelte-162l9hu"),x(H,"class","input svelte-162l9hu"),x(H,"type","number"),x(_,"class","input-wrapper svelte-162l9hu"),x(W,"class","svelte-162l9hu"),x(N,"class","input svelte-162l9hu"),x(N,"type","number"),x(N,"step","0.005"),x(C,"class","input-wrapper svelte-162l9hu"),x(M,"class","svelte-162l9hu"),x(j,"class","input svelte-162l9hu"),x(j,"type","number"),x(j,"step","0.005"),x(L,"class","input-wrapper svelte-162l9hu"),x(B,"class","svelte-162l9hu"),x(D,"class","input svelte-162l9hu"),x(D,"type","checkbox"),x(U,"class","input-wrapper svelte-162l9hu"),x(b,"class","settings svelte-162l9hu")},m(t,n){u(t,s,n),u(t,l,n),c(l,r),e[7](r),c(l,o),c(l,a),c(a,d),c(l,g),V&&V.m(l,null),u(t,v,n),u(t,b,n),c(b,_),c(_,k),c(_,q),c(_,S),$(S,e[3].material.width),c(_,E),c(_,A),c(_,R),c(_,H),$(H,e[3].material.height),c(b,z),c(b,C),c(C,W),c(C,O),c(C,N),$(N,e[3].material.margins),c(b,P),c(b,L),c(L,M),c(L,T),c(L,j),$(j,e[3].cutter),c(b,I),c(b,U),c(U,B),c(U,F),c(U,D),D.checked=e[3].units,J||(K=[w(r,"change",e[6]),w(d,"mouseover",e[8]),w(S,"change",e[5]),w(S,"input",e[9]),w(H,"change",e[5]),w(H,"input",e[10]),w(N,"change",e[5]),w(N,"input",e[11]),w(j,"change",e[5]),w(j,"input",e[12]),w(D,"change",e[13])],J=!0)},p(t,[e]){4&e&&n!==(n=t[2].name)&&(document.title=n),2&e&&d.src!==(p="./"+(t[1]?"bf":"ul-h")+".png")&&x(d,"src",p),t[4]?V?V.p(t,e):(V=vt(t),V.c(),V.m(l,null)):V&&(V.d(1),V=null),8&e&&y(S.value)!==t[3].material.width&&$(S,t[3].material.width),8&e&&y(H.value)!==t[3].material.height&&$(H,t[3].material.height),8&e&&y(N.value)!==t[3].material.margins&&$(N,t[3].material.margins),8&e&&y(j.value)!==t[3].cutter&&$(j,t[3].cutter),8&e&&(D.checked=t[3].units)},i:t,o:t,d(t){t&&h(s),t&&h(l),e[7](null),V&&V.d(),t&&h(v),t&&h(b),J=!1,i(K)}}}function xt(t,e,n){let i,s,l,o,c,u;function h(){let t=Y(i.contents,4,s.units,s.cutter,s.gap,s.material);a(at,l=t[0]),a(ct,o=t[1]),a(ut,i.errors=t[2],i)}r(t,ut,(t=>n(2,i=t))),r(t,ot,(t=>n(3,s=t))),r(t,at,(t=>n(14,l=t))),r(t,ct,(t=>n(15,o=t))),r(t,ht,(t=>n(4,c=t))),function(t){S().$$.before_update.push(t)}((()=>{i.contents&&h()}));let d;return n(1,d=!1),[u,d,i,s,c,h,function(){if(u.files[0].name.includes(".csv")){a(ut,i.name=u.files[0].name.replace(".csv",""),i);let t=new FileReader;t.readAsText(u.files[0]),t.onload=function(t){a(ut,i.contents=function(t,e=","){for(var n=new RegExp("(\\"+e+'|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\'+e+"\\r\\n]*))","gi"),i=[[]],s=null;s=n.exec(t);){var l=s[1];if(l.length&&l!=e&&i.push([]),s[2])var r=s[2].replace(new RegExp('""',"g"),'"');else r=s[3];/\d/.test(r)&&(r=mt(r)),i[i.length-1].push(r)}return i.filter((t=>t.filter((t=>""!==t)).length))}(t.target.result),i),h(),n(1,d=!1)}}else n(1,d=!0)},function(t){A[t?"unshift":"push"]((()=>{u=t,n(0,u)}))},()=>n(1,d=!1),function(){s.material.width=y(this.value),ot.set(s)},function(){s.material.height=y(this.value),ot.set(s)},function(){s.material.margins=y(this.value),ot.set(s)},function(){s.cutter=y(this.value),ot.set(s)},function(){s.units=this.checked,ot.set(s)}]}class yt extends K{constructor(t){super(),J(this,t,xt,wt,l,{})}}function bt(t,e,n){const i=t.slice();return i[20]=e[n],i}function $t(t,e,n){const i=t.slice();return i[23]=e[n],i[25]=n,i}function _t(t){let e,n,i,s,l,r,o,a,d,p,v,w,y=t[1]/t[13]-t[9].cutter+"",$=t[2]/t[13]-t[9].cutter+"";return{c(){e=f("div"),n=f("h4"),i=g("Panel: "),s=g(t[0]),l=m(),r=f("h4"),o=g("Width: "),a=g(y),d=m(),p=f("h4"),v=g("Height: "),w=g($),x(n,"class","sizes"),x(r,"class","sizes"),x(p,"class","sizes"),x(e,"class","infocard svelte-hhkoip"),_(e,"left",t[5]+"px"),_(e,"top",t[4]+"px")},m(t,h){u(t,e,h),c(e,n),c(n,i),c(n,s),c(e,l),c(e,r),c(r,o),c(r,a),c(e,d),c(e,p),c(p,v),c(p,w)},p(t,n){1&n&&b(s,t[0]),514&n&&y!==(y=t[1]/t[13]-t[9].cutter+"")&&b(a,y),516&n&&$!==($=t[2]/t[13]-t[9].cutter+"")&&b(w,$),32&n&&_(e,"left",t[5]+"px"),16&n&&_(e,"top",t[4]+"px")},d(t){t&&h(e)}}}function kt(t){let e,n,i,s,l;return{c(){e=p("rect"),x(e,"class","sheet print svelte-hhkoip"),x(e,"id",n=t[23].id),x(e,"x",i=t[25]*t[23].sheet_width*t[13]),x(e,"y","0"),x(e,"width",s=t[23].sheet_width*t[13]),x(e,"height",l=t[23].sheet_height*t[13])},m(t,n){u(t,e,n)},p(t,r){256&r&&n!==(n=t[23].id)&&x(e,"id",n),256&r&&i!==(i=t[25]*t[23].sheet_width*t[13])&&x(e,"x",i),256&r&&s!==(s=t[23].sheet_width*t[13])&&x(e,"width",s),256&r&&l!==(l=t[23].sheet_height*t[13])&&x(e,"height",l)},d(t){t&&h(e)}}}function qt(t){let e,n,i,s,l=t[20].id+"";return{c(){e=p("text"),n=g(l),x(e,"class","idv print svelte-hhkoip"),x(e,"x",i=(t[20].x0-.25+t[20].width/2)*t[13]),x(e,"y",s=(t[20].y0+1+t[20].height/2)*t[13])},m(t,i){u(t,e,i),c(e,n)},p(t,r){4096&r&&l!==(l=t[20].id+"")&&b(n,l),4096&r&&i!==(i=(t[20].x0-.25+t[20].width/2)*t[13])&&x(e,"x",i),4096&r&&s!==(s=(t[20].y0+1+t[20].height/2)*t[13])&&x(e,"y",s)},d(t){t&&h(e)}}}function St(t){let e,n,i,s,l=t[20].id+"";return{c(){e=p("text"),n=g(l),x(e,"class","idh print svelte-hhkoip"),x(e,"x",i=(t[20].x0+t[20].width/2)*t[13]),x(e,"y",s=(t[20].y0+1+t[20].height/2)*t[13])},m(t,i){u(t,e,i),c(e,n)},p(t,r){4096&r&&l!==(l=t[20].id+"")&&b(n,l),4096&r&&i!==(i=(t[20].x0+t[20].width/2)*t[13])&&x(e,"x",i),4096&r&&s!==(s=(t[20].y0+1+t[20].height/2)*t[13])&&x(e,"y",s)},d(t){t&&h(e)}}}function Et(t){let e,n,s,l,r,o,a,c,d,f;function g(t,e){return t[20].width>t[20].height?St:qt}let m=g(t),y=m(t);return{c(){e=p("rect"),y.c(),c=v(),x(e,"class",n="panel "+(t[11]==t[20].id?"active":"")+" print svelte-hhkoip"),x(e,"id",s=t[20].id),x(e,"x",l=t[20].x0*t[13]),x(e,"y",r=t[20].y0*t[13]),x(e,"width",o=t[20].width*t[13]),x(e,"height",a=t[20].height*t[13])},m(n,i){u(n,e,i),y.m(n,i),u(n,c,i),d||(f=[w(e,"mouseover",t[14]),w(e,"mouseleave",t[15])],d=!0)},p(t,i){6144&i&&n!==(n="panel "+(t[11]==t[20].id?"active":"")+" print svelte-hhkoip")&&x(e,"class",n),4096&i&&s!==(s=t[20].id)&&x(e,"id",s),4096&i&&l!==(l=t[20].x0*t[13])&&x(e,"x",l),4096&i&&r!==(r=t[20].y0*t[13])&&x(e,"y",r),4096&i&&o!==(o=t[20].width*t[13])&&x(e,"width",o),4096&i&&a!==(a=t[20].height*t[13])&&x(e,"height",a),m===(m=g(t))&&y?y.p(t,i):(y.d(1),y=m(t),y&&(y.c(),y.m(c.parentNode,c)))},d(t){t&&h(e),y.d(t),t&&h(c),d=!1,i(f)}}}function At(e){let n,i,s,l,r,o,a,g,v=e[3]&&_t(e),w=e[8],y=[];for(let t=0;t<w.length;t+=1)y[t]=kt($t(e,w,t));let b=e[12],$=[];for(let t=0;t<b.length;t+=1)$[t]=Et(bt(e,b,t));return{c(){v&&v.c(),n=m(),i=f("div"),s=p("svg"),l=p("g");for(let t=0;t<y.length;t+=1)y[t].c();r=p("g");for(let t=0;t<$.length;t+=1)$[t].c();x(l,"id","sheets"),x(l,"class","svelte-hhkoip"),x(r,"id","panels"),x(r,"class","svelte-hhkoip"),x(s,"class","print svelte-hhkoip"),x(s,"version","1.1"),x(s,"xmlns","http://www.w3.org/2000/svg"),x(s,"xmlns:xlink","http://www.w3.org/1999/xlink"),x(s,"width",o=e[7]*e[13]),x(s,"height",a=e[10]*e[13]),x(s,"viewBox",g="0 0 "+e[7]*e[13]+" "+e[10]*e[13]),x(s,"preserveAspectRatio","xMidYMid meet"),x(i,"class","viewer svelte-hhkoip")},m(t,o){v&&v.m(t,o),u(t,n,o),u(t,i,o),c(i,s),c(s,l);for(let t=0;t<y.length;t+=1)y[t].m(l,null);c(s,r);for(let t=0;t<$.length;t+=1)$[t].m(r,null);e[16](i)},p(t,[e]){if(t[3]?v?v.p(t,e):(v=_t(t),v.c(),v.m(n.parentNode,n)):v&&(v.d(1),v=null),8448&e){let n;for(w=t[8],n=0;n<w.length;n+=1){const i=$t(t,w,n);y[n]?y[n].p(i,e):(y[n]=kt(i),y[n].c(),y[n].m(l,null))}for(;n<y.length;n+=1)y[n].d(1);y.length=w.length}if(63488&e){let n;for(b=t[12],n=0;n<b.length;n+=1){const i=bt(t,b,n);$[n]?$[n].p(i,e):($[n]=Et(i),$[n].c(),$[n].m(r,null))}for(;n<$.length;n+=1)$[n].d(1);$.length=b.length}128&e&&o!==(o=t[7]*t[13])&&x(s,"width",o),1024&e&&a!==(a=t[10]*t[13])&&x(s,"height",a),1152&e&&g!==(g="0 0 "+t[7]*t[13]+" "+t[10]*t[13])&&x(s,"viewBox",g)},i:t,o:t,d(t){v&&v.d(t),t&&h(n),t&&h(i),d(y,t),d($,t),e[16](null)}}}function Rt(t,e,n){let i,s,l,o,c;r(t,ct,(t=>n(8,i=t))),r(t,ot,(t=>n(9,s=t))),r(t,ht,(t=>n(17,l=t))),r(t,dt,(t=>n(11,o=t))),r(t,at,(t=>n(12,c=t)));let u,h,d,f,p,g,m=!1,v=0,w=0;return function(t){S().$$.after_update.push(t)}((()=>{i.length&&a(ht,l=f.innerHTML.toString())})),t.$$.update=()=>{768&t.$$.dirty&&n(7,p=i.length*s.material.width),512&t.$$.dirty&&n(10,g=s.material.height)},[u,h,d,m,v,w,f,p,i,s,g,o,c,90,function(){a(dt,o=this.id),n(3,m=!0);let t=this.getBoundingClientRect();n(4,v=t.bottom+12),n(5,w=t.left+12),n(0,u=this.id),n(1,h=this.width.baseVal.valueAsString),n(2,d=this.height.baseVal.valueAsString)},function(t){n(3,m=!1),a(dt,o="")},function(t){A[t?"unshift":"push"]((()=>{f=t,n(6,f)}))}]}class Ht extends K{constructor(t){super(),J(this,t,Rt,At,l,{})}}function zt(t,e){return parseInt(t*10**e)/10**e}function Ct(t,e,n){const i=t.slice();return i[20]=e[n],i[21]=e,i[22]=n,i}function Wt(t,e,n){const i=t.slice();return i[23]=e[n],i}function Ot(t){let e,n,s,l,r,o,a,p,y,$,_,k,q,S,E,A,R,H,z=t[1].contents[0][1]+"",C=t[1].errors.length&&Nt(t),W=t[0],O=[];for(let e=0;e<W.length;e+=1)O[e]=Lt(Ct(t,W,e));return{c(){C&&C.c(),e=m(),n=f("h1"),s=g(z),l=m(),r=f("span"),r.textContent="+",o=m(),a=f("ul"),p=f("li"),p.textContent="Panel",y=m(),$=f("li"),$.textContent="Q",_=m(),k=f("li"),k.textContent="W",q=m(),S=f("li"),S.textContent="H",E=m();for(let t=0;t<O.length;t+=1)O[t].c();A=v(),x(n,"class","svelte-qxzlqn"),x(p,"class","svelte-qxzlqn"),x($,"class","svelte-qxzlqn"),x(k,"class","svelte-qxzlqn"),x(S,"class","svelte-qxzlqn"),x(a,"class","svelte-qxzlqn")},m(i,h){C&&C.m(i,h),u(i,e,h),u(i,n,h),c(n,s),c(n,l),c(n,r),u(i,o,h),u(i,a,h),c(a,p),c(a,y),c(a,$),c(a,_),c(a,k),c(a,q),c(a,S),u(i,E,h);for(let t=0;t<O.length;t+=1)O[t].m(i,h);u(i,A,h),R||(H=[w(r,"click",t[4]),w(p,"click",t[7]),w($,"click",t[8]),w(k,"click",t[9]),w(S,"click",t[10])],R=!0)},p(t,n){if(t[1].errors.length?C?C.p(t,n):(C=Nt(t),C.c(),C.m(e.parentNode,e)):C&&(C.d(1),C=null),2&n&&z!==(z=t[1].contents[0][1]+"")&&b(s,z),13&n){let e;for(W=t[0],e=0;e<W.length;e+=1){const i=Ct(t,W,e);O[e]?O[e].p(i,n):(O[e]=Lt(i),O[e].c(),O[e].m(A.parentNode,A))}for(;e<O.length;e+=1)O[e].d(1);O.length=W.length}},d(t){C&&C.d(t),t&&h(e),t&&h(n),t&&h(o),t&&h(a),t&&h(E),d(O,t),t&&h(A),R=!1,i(H)}}}function Nt(t){let e,n,i,s,l,r,o=t[1].errors.length>1?"S":"",a=t[1].errors,p=[];for(let e=0;e<a.length;e+=1)p[e]=Pt(Wt(t,a,e));return{c(){e=f("h5"),n=g("ERROR"),i=g(o),s=g(":"),l=m();for(let t=0;t<p.length;t+=1)p[t].c();r=v()},m(t,o){u(t,e,o),c(e,n),c(e,i),c(e,s),u(t,l,o);for(let e=0;e<p.length;e+=1)p[e].m(t,o);u(t,r,o)},p(t,e){if(2&e&&o!==(o=t[1].errors.length>1?"S":"")&&b(i,o),2&e){let n;for(a=t[1].errors,n=0;n<a.length;n+=1){const i=Wt(t,a,n);p[n]?p[n].p(i,e):(p[n]=Pt(i),p[n].c(),p[n].m(r.parentNode,r))}for(;n<p.length;n+=1)p[n].d(1);p.length=a.length}},d(t){t&&h(e),t&&h(l),d(p,t),t&&h(r)}}}function Pt(t){let e,n,i=t[23]+"";return{c(){e=f("p"),n=g(i)},m(t,i){u(t,e,i),c(e,n)},p(t,e){2&e&&i!==(i=t[23]+"")&&b(n,i)},d(t){t&&h(e)}}}function Lt(t){let e,n,s,l,r,a,d,p,g,v,b,_,k,q,S,E;function A(){t[11].call(s,t[21],t[22])}function R(){t[12].call(a,t[21],t[22])}function H(){t[13].call(g,t[21],t[22])}function z(){t[14].call(_,t[21],t[22])}function C(...e){return t[15](t[20],...e)}return{c(){e=f("ul"),n=f("li"),s=f("input"),l=m(),r=f("li"),a=f("input"),d=m(),p=f("li"),g=f("input"),v=m(),b=f("li"),_=f("input"),k=m(),x(s,"type","text"),x(s,"class","svelte-qxzlqn"),x(n,"class","svelte-qxzlqn"),x(a,"type","number"),x(a,"class","svelte-qxzlqn"),x(r,"class","svelte-qxzlqn"),x(g,"type","number"),x(g,"class","svelte-qxzlqn"),x(p,"class","svelte-qxzlqn"),x(_,"type","number"),x(_,"class","svelte-qxzlqn"),x(b,"class","svelte-qxzlqn"),x(e,"class",q=o(t[2]==t[20][0]?"active":"")+" svelte-qxzlqn")},m(i,o){u(i,e,o),c(e,n),c(n,s),$(s,t[20][0]),c(e,l),c(e,r),c(r,a),$(a,t[20][1]),c(e,d),c(e,p),c(p,g),$(g,t[20][2]),c(e,v),c(e,b),c(b,_),$(_,t[20][3]),c(e,k),S||(E=[w(s,"input",A),w(s,"keyup",t[3]),w(a,"input",R),w(a,"keyup",t[3]),w(g,"input",H),w(g,"keyup",t[3]),w(_,"input",z),w(_,"keyup",t[3]),w(e,"mouseenter",C),w(e,"mouseleave",t[16])],S=!0)},p(n,i){t=n,1&i&&s.value!==t[20][0]&&$(s,t[20][0]),1&i&&y(a.value)!==t[20][1]&&$(a,t[20][1]),1&i&&y(g.value)!==t[20][2]&&$(g,t[20][2]),1&i&&y(_.value)!==t[20][3]&&$(_,t[20][3]),5&i&&q!==(q=o(t[2]==t[20][0]?"active":"")+" svelte-qxzlqn")&&x(e,"class",q)},d(t){t&&h(e),S=!1,i(E)}}}function Mt(e){let n,i,s=e[1].name&&Ot(e);return{c(){n=f("div"),i=f("div"),s&&s.c(),x(i,"class","svelte-qxzlqn"),x(n,"class","container svelte-qxzlqn")},m(t,e){u(t,n,e),c(n,i),s&&s.m(i,null)},p(t,[e]){t[1].name?s?s.p(t,e):(s=Ot(t),s.c(),s.m(i,null)):s&&(s.d(1),s=null)},i:t,o:t,d(t){t&&h(n),s&&s.d()}}}function Tt(t,e,n){let i,s,l,o,c;function u(t){n(0,d=d.sort(((e,n)=>e[t]-n[t])))}function h(t){n(0,d=d.sort(((e,n)=>n[t]-e[t])))}r(t,ut,(t=>n(1,i=t))),r(t,ot,(t=>n(17,s=t))),r(t,at,(t=>n(18,l=t))),r(t,ct,(t=>n(19,o=t))),r(t,dt,(t=>n(2,c=t)));let d;return t.$$.update=()=>{2&t.$$.dirty&&n(0,d=i.contents.slice(4))},[d,i,c,function(){let t=Y(i.contents,4,s.units,s.cutter,s.gap,s.material);a(at,l=t[0]),a(ct,o=t[1]),a(ut,i.errors=t[2],i)},function(){let t=[i.contents.slice(4).length+1,0,0,0];a(ut,i.contents=[...i.contents,t],i)},u,h,()=>u(0),()=>h(1),()=>h(2),()=>h(3),function(t,e){t[e][0]=this.value,n(0,d),n(1,i)},function(t,e){t[e][1]=y(this.value),n(0,d),n(1,i)},function(t,e){t[e][2]=y(this.value),n(0,d),n(1,i)},function(t,e){t[e][3]=y(this.value),n(0,d),n(1,i)},t=>a(dt,c=t[0]),()=>a(dt,c="")]}class jt extends K{constructor(t){super(),J(this,t,Tt,Mt,l,{})}}function It(t,e,n){const i=t.slice();return i[2]=e[n],i[4]=n,i}function Ut(t){let e,n=t[1].length>1&&Bt(t);return{c(){n&&n.c(),e=v()},m(t,i){n&&n.m(t,i),u(t,e,i)},p(t,i){t[1].length>1?n?n.p(t,i):(n=Bt(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(t){n&&n.d(t),t&&h(e)}}}function Bt(t){let e,n,i,s,l,r,o=parseInt(t[1].slice(0,-1).reduce(Jt,0))+"";return{c(){e=f("p"),e.textContent="filled sheets",n=m(),i=f("p"),s=g("waste: "),l=g(o),r=g("%")},m(t,o){u(t,e,o),u(t,n,o),u(t,i,o),c(i,s),c(i,l),c(i,r)},p(t,e){2&e&&o!==(o=parseInt(t[1].slice(0,-1).reduce(Jt,0))+"")&&b(l,o)},d(t){t&&h(e),t&&h(n),t&&h(i)}}}function Ft(t){let e,n,i,s,l,r,o,a,d,p,v,w,y,$,_,k,q,S,E,A,R,H=t[2].id+"",z=zt(t[2].area/144,2)+"",C=zt(t[2].waste_area/144,2)+"",W=zt(100*t[2].waste_ratio,2)+"";return{c(){e=f("div"),n=f("h4"),i=g(H),s=m(),l=f("p"),r=g("used area: "),o=g(z),a=g(" pi"),d=f("sup"),d.textContent="2",p=m(),v=f("p"),w=g("waste area: "),y=g(C),$=g(" pi"),_=f("sup"),_.textContent="2",k=m(),q=f("p"),S=g("waste: "),E=g(W),A=g("%"),R=m(),x(d,"class","svelte-18pxdu6"),x(_,"class","svelte-18pxdu6"),x(e,"class","svelte-18pxdu6")},m(t,h){u(t,e,h),c(e,n),c(n,i),c(e,s),c(e,l),c(l,r),c(l,o),c(l,a),c(l,d),c(e,p),c(e,v),c(v,w),c(v,y),c(v,$),c(v,_),c(e,k),c(e,q),c(q,S),c(q,E),c(q,A),c(e,R)},p(t,e){2&e&&H!==(H=t[2].id+"")&&b(i,H),2&e&&z!==(z=zt(t[2].area/144,2)+"")&&b(o,z),2&e&&C!==(C=zt(t[2].waste_area/144,2)+"")&&b(y,C),2&e&&W!==(W=zt(100*t[2].waste_ratio,2)+"")&&b(E,W)},d(t){t&&h(e)}}}function Dt(e){let n,i,s,l=e[0].name&&Ut(e),r=e[1],o=[];for(let t=0;t<r.length;t+=1)o[t]=Ft(It(e,r,t));return{c(){n=f("div"),l&&l.c(),i=m();for(let t=0;t<o.length;t+=1)o[t].c();s=v(),x(n,"class","svelte-18pxdu6")},m(t,e){u(t,n,e),l&&l.m(n,null),u(t,i,e);for(let n=0;n<o.length;n+=1)o[n].m(t,e);u(t,s,e)},p(t,[e]){if(t[0].name?l?l.p(t,e):(l=Ut(t),l.c(),l.m(n,null)):l&&(l.d(1),l=null),2&e){let n;for(r=t[1],n=0;n<r.length;n+=1){const i=It(t,r,n);o[n]?o[n].p(i,e):(o[n]=Ft(i),o[n].c(),o[n].m(s.parentNode,s))}for(;n<o.length;n+=1)o[n].d(1);o.length=r.length}},i:t,o:t,d(t){t&&h(n),l&&l.d(),t&&h(i),d(o,t),t&&h(s)}}}const Jt=(t,e,n,i)=>t+100*e.waste_ratio/i.length;function Kt(t,e,n){let i,s;return r(t,ut,(t=>n(0,i=t))),r(t,ct,(t=>n(1,s=t))),[i,s]}class Vt extends K{constructor(t){super(),J(this,t,Kt,Dt,l,{})}}function Xt(t){let e,n,i,s,l,r,o,a;return n=new jt({}),s=new Ht({}),o=new Vt({}),{c(){e=f("div"),U(n.$$.fragment),i=m(),U(s.$$.fragment),l=m(),r=f("div"),U(o.$$.fragment),x(e,"class","main svelte-99m0r7"),x(r,"class","info svelte-99m0r7")},m(t,h){u(t,e,h),B(n,e,null),c(e,i),B(s,e,null),u(t,l,h),u(t,r,h),B(o,r,null),a=!0},i(t){a||(j(n.$$.fragment,t),j(s.$$.fragment,t),j(o.$$.fragment,t),a=!0)},o(t){I(n.$$.fragment,t),I(s.$$.fragment,t),I(o.$$.fragment,t),a=!1},d(t){t&&h(e),F(n),F(s),t&&h(l),t&&h(r),F(o)}}}function Gt(t){let e,n,s,l,r;s=new yt({});let o=t[0].length&&Xt();return{c(){e=f("div"),n=f("div"),U(s.$$.fragment),l=m(),o&&o.c(),x(n,"class","import svelte-99m0r7"),x(e,"class","container svelte-99m0r7")},m(t,i){u(t,e,i),c(e,n),B(s,n,null),c(e,l),o&&o.m(e,null),r=!0},p(t,[n]){t[0].length?o?1&n&&j(o,1):(o=Xt(),o.c(),j(o,1),o.m(e,null)):o&&(T={r:0,c:[],p:T},I(o,1,1,(()=>{o=null})),T.r||i(T.c),T=T.p)},i(t){r||(j(s.$$.fragment,t),j(o),r=!0)},o(t){I(s.$$.fragment,t),I(o),r=!1},d(t){t&&h(e),F(s),o&&o.d()}}}function Qt(t,e,n){let i;return r(t,ct,(t=>n(0,i=t))),[i]}return new class extends K{constructor(t){super(),J(this,t,Qt,Gt,l,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
