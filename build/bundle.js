var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function i(t){t.forEach(e)}function s(t){return"function"==typeof t}function r(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function l(e,n,i){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const i=e.subscribe(...n);return i.unsubscribe?()=>i.unsubscribe():i}(n,i))}function o(t,e,n=e){return t.set(n),e}function a(t,e){t.appendChild(e)}function u(t,e,n){t.insertBefore(e,n||null)}function c(t){t.parentNode.removeChild(t)}function h(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function d(t){return document.createElement(t)}function f(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function p(t){return document.createTextNode(t)}function g(){return p(" ")}function m(){return p("")}function w(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function v(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function x(t){return""===t?void 0:+t}function y(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function b(t,e){t.value=null==e?"":e}function $(t,e,n,i){t.style.setProperty(e,n,i?"important":"")}let _;function q(t){_=t}function E(t){(function(){if(!_)throw new Error("Function called outside component initialization");return _})().$$.after_update.push(t)}const k=[],A=[],R=[],S=[],H=Promise.resolve();let W=!1;function C(t){R.push(t)}let j=!1;const T=new Set;function L(){if(!j){j=!0;do{for(let t=0;t<k.length;t+=1){const e=k[t];q(e),M(e.$$)}for(k.length=0;A.length;)A.pop()();for(let t=0;t<R.length;t+=1){const e=R[t];T.has(e)||(T.add(e),e())}R.length=0}while(k.length);for(;S.length;)S.pop()();W=!1,j=!1,T.clear()}}function M(t){if(null!==t.fragment){t.update(),i(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(C)}}const O=new Set;let P;function I(t,e){t&&t.i&&(O.delete(t),t.i(e))}function N(t,e,n,i){if(t&&t.o){if(O.has(t))return;O.add(t),P.c.push((()=>{O.delete(t),i&&(n&&t.d(1),i())})),t.o(e)}}function B(t){t&&t.c()}function U(t,n,r){const{fragment:l,on_mount:o,on_destroy:a,after_update:u}=t.$$;l&&l.m(n,r),C((()=>{const n=o.map(e).filter(s);a?a.push(...n):i(n),t.$$.on_mount=[]})),u.forEach(C)}function F(t,e){const n=t.$$;null!==n.fragment&&(i(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function z(t,e){-1===t.$$.dirty[0]&&(k.push(t),W||(W=!0,H.then(L)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function D(e,s,r,l,o,a,u=[-1]){const h=_;q(e);const d=s.props||{},f=e.$$={fragment:null,ctx:null,props:a,update:t,not_equal:o,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(h?h.$$.context:[]),callbacks:n(),dirty:u,skip_bound:!1};let p=!1;if(f.ctx=r?r(e,d,((t,n,...i)=>{const s=i.length?i[0]:n;return f.ctx&&o(f.ctx[t],f.ctx[t]=s)&&(!f.skip_bound&&f.bound[t]&&f.bound[t](s),p&&z(e,t)),n})):[],f.update(),p=!0,i(f.before_update),f.fragment=!!l&&l(f.ctx),s.target){if(s.hydrate){const t=function(t){return Array.from(t.childNodes)}(s.target);f.fragment&&f.fragment.l(t),t.forEach(c)}else f.fragment&&f.fragment.c();s.intro&&I(e.$$.fragment),U(e,s.target,s.anchor),L()}q(h)}class G{$destroy(){F(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function J(t){return isNaN(t)?t.includes("/")&&!t.includes(".")?t.split(" ").filter((t=>""!==t)).reduce(((t,e)=>{if(e.includes("/")){let n=e.split("/").filter((t=>""!==t));return t+parseFloat(n[0]/n[1])}return t+parseFloat(e)}),0):t:parseFloat(t)}let K=.375,V=0,X=[],Y={width:49,height:97,margins:.25,max_width:()=>Y.width-2*Y.margins+K,max_height:()=>Y.height-2*Y.margins+K};function Q(t,e=1,n=!1,i=K,s=V,r=Y){X=[];const l=new it(function(t,e=","){for(var n=new RegExp("(\\"+e+'|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\'+e+"\\r\\n]*))","gi"),i=[[]],s=null;s=n.exec(t);){var r=s[1];if(r.length&&r!=e&&i.push([]),s[2])var l=s[2].replace(new RegExp('""',"g"),'"');else l=s[3];/\d/.test(l)&&(l=J(l)),i[i.length-1].push(l)}return i.filter((t=>t.filter((t=>""!==t)).length))}(t).slice(e).flatMap((t=>function([t,e,n,i]){let s=1,r=[];for(;e>=s;)r.push([`${t} (${s}/${e})`,parseFloat(n),parseFloat(i)]),s++;return r}(t).map((t=>new tt(t)))))).flat().filterTooBig();function o(t){let e=new it(t.widest().place()),n=e[0].width;for(;t.fitsColumn(e);){let i=new it(t.fitsColumn(e).place());for(;t.fitsRow(i,n);)i.push(t.fitsRow(i,n).place());1===i.length?e.push(i[0]):e.push(i)}return e.ascendingWidth()}function a(t){let e=new it(t.widest().place());for(;t.fitsSheet(e);)e.push(t.fitsSheet(e).place());return e}function u(t,e){let n=Y.margins+Y.width*e,i=Y.margins,s=new it;t.forEach(((e,r)=>{0===r?s.push(n):s.push(s.last()+t[r-1].width);let l=new it;e.group.forEach(((t,e,n)=>{0===e?l.push(i):n[e-1]instanceof it?l.push(l.last()+n[e-1].filledHeight()):l.push(l.last()+n[e-1].height),t instanceof tt?(t.x0=s[r],t.y0=l[e]):t.forEach(((n,i)=>{n.x0=0===i?s[r]:t[i-1].x0+t[i-1].width,n.y0=l[e]}))}))}))}return K=i,V=s,Y.width=r.width,Y.height=r.height,Y.margins=r.margins,[l,function(t){let e=function(t){let e=new it;for(;t.notPlaced().length>0;){let n=o(t);e.push(new et(n.columnWidth(),n.columnHeight(),n.columnArea(),n))}return e}(t),n=new it;for(;e.notPlaced().length>0;){let t=a(e);u(t,n.length),n.push(new nt(t.filledWidth(),t.filledHeight(),t.filledArea(),t.map((t=>t.group)).flatten(2),t,n.length+1))}return n}(l),X]}class Z{constructor(){this.placed=!1}place(){return this.placed=!0,this}}class tt extends Z{constructor([t,e,n]){super(),this.id=t,this.width=e+K+V,this.height=n+K+V,this.area=this.height*this.width,this.x0=0,this.y0=0}}class et extends Z{constructor(t,e,n,i){super(),this.width=t,this.height=e,this.area=n,this.group=i}}class nt extends et{constructor(t,e,n,i,s,r){super(t,e,n,i),this.columns=s,this.sheet_width=Y.width,this.sheet_height=Y.height,this.sheet_area=Y.width*Y.height,this.waste_area=this.sheet_area-this.area,this.waste_ratio=1-this.area/this.sheet_area,this.id="Sheet "+r,delete this.placed}}class it extends Array{first(){return this[0]}last(){return this[this.length-1]}flatten(t=1){let e=this;for(;t--;)e=e.flat();return e}shuffle(){return this.length<3?this:new it(...this.slice(1),this.first())}ascendingWidth(){return new it(...this).sort(((t,e)=>e.width!=t.width?e.width-t.width:e.height-t.height))}ascendingHeight(){return new it(...this).sort(((t,e)=>e.height!=t.height?e.height-t.height:e.width-t.width))}filterTooBig(){return this.map((t=>t.width>Y.max_width()||t.height>Y.max_height()?(X.push(`Panel ${t.id} is too big`),!1):t)).filter((t=>t))}notPlaced(){return this.filter((t=>!t.placed))}widest(){return this.notPlaced().ascendingWidth().first()}narrowest(){return this.notPlaced().ascendingWidth().last()}tallest(){return this.notPlaced().ascendingHeight().first()}shortest(){return this.notPlaced().ascendingHeight().last()}biggest(){return this.sort(((t,e)=>e.area-t.area)).notPlaced().first()}totalWidth(){return this.reduce(((t,e)=>e instanceof it?t+e.ascendingWidth().first().width:t+e.width),0)}totalHeight(){return this.reduce(((t,e)=>e instanceof it?t+e.ascendingHeight().first().height:t+e.height),0)}totalArea(){return this.reduce(((t,e)=>t+e.area),0)}columnWidth(){return this.flat().ascendingWidth().first().width}columnHeight(){return this.totalHeight()}columnArea(){return this.flat().totalArea()}filledHeight(){return this.ascendingHeight().first().height}filledWidth(){return this.totalWidth()}filledArea(){return this.flat().totalArea()}remainingWidth(t){return t-this.totalWidth()}remainingHeight(t){return t-this.totalHeight()}fitsColumn(t,e=Y.height){return this.notPlaced().filter((e=>e.width<=t[0].width)).filter((n=>n.height<t.remainingHeight(e))).widest()}fitsRow(t,e){return this.notPlaced().filter((e=>e.height<=t[0].height)).filter((n=>n.width<t.remainingWidth(e))).widest()}fitsSheet(t,e=Y.width){return this.notPlaced().filter((n=>n.width<t.remainingWidth(e))).widest()}}const st=[];const rt=(e,n)=>{const i=t=>JSON.stringify(t,null,2),s=JSON.parse;null===sessionStorage.getItem(e)&&sessionStorage.setItem(e,i(n));const l=s(sessionStorage.getItem(e)),{subscribe:o,set:a,update:u}=function(e,n=t){let i;const s=[];function l(t){if(r(e,t)&&(e=t,i)){const t=!st.length;for(let t=0;t<s.length;t+=1){const n=s[t];n[1](),st.push(n,e)}if(t){for(let t=0;t<st.length;t+=2)st[t][0](st[t+1]);st.length=0}}}return{set:l,update:function(t){l(t(e))},subscribe:function(r,o=t){const a=[r,o];return s.push(a),1===s.length&&(i=n(l)||t),r(e),()=>{const t=s.indexOf(a);-1!==t&&s.splice(t,1),0===s.length&&(i(),i=null)}}}}(l);return{subscribe:o,set:t=>(sessionStorage.setItem(e,i(t)),a(t)),update:u}},lt=rt("panels",[]),ot=rt("sheets",[]),at=rt("file-info",{}),ut=rt("svg","");var ct="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var ht,dt;(function(t,e){!function(){function e(t,e){return void 0===e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}function n(t,e,n){var i=new XMLHttpRequest;i.open("GET",t),i.responseType="blob",i.onload=function(){o(i.response,e,n)},i.onerror=function(){console.error("could not download file")},i.send()}function i(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function s(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(n){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var r="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof ct&&ct.global===ct?ct:void 0,l=r.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),o=r.saveAs||("object"!=typeof window||window!==r?function(){}:"download"in HTMLAnchorElement.prototype&&!l?function(t,e,l){var o=r.URL||r.webkitURL,a=document.createElement("a");e=e||t.name||"download",a.download=e,a.rel="noopener","string"==typeof t?(a.href=t,a.origin===location.origin?s(a):i(a.href)?n(t,e,l):s(a,a.target="_blank")):(a.href=o.createObjectURL(t),setTimeout((function(){o.revokeObjectURL(a.href)}),4e4),setTimeout((function(){s(a)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,r,l){if(r=r||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(e(t,l),r);else if(i(t))n(t,r,l);else{var o=document.createElement("a");o.href=t,o.target="_blank",setTimeout((function(){s(o)}))}}:function(t,e,i,s){if((s=s||open("","_blank"))&&(s.document.title=s.document.body.innerText="downloading..."),"string"==typeof t)return n(t,e,i);var o="application/octet-stream"===t.type,a=/constructor/i.test(r.HTMLElement)||r.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||o&&a||l)&&"undefined"!=typeof FileReader){var c=new FileReader;c.onloadend=function(){var t=c.result;t=u?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=t:location=t,s=null},c.readAsDataURL(t)}else{var h=r.URL||r.webkitURL,d=h.createObjectURL(t);s?s.location=d:location.href=d,s=null,setTimeout((function(){h.revokeObjectURL(d)}),4e4)}});r.saveAs=o.saveAs=o,t.exports=o}()})(dt={path:ht,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&dt.path)}},dt.exports),dt.exports;function ft(e){let n,i,s;return{c(){n=d("h1"),n.textContent="ðŸ’©",v(n,"class","svelte-118u7vq")},m(t,r){u(t,n,r),i||(s=w(n,"mouseover",e[10]),i=!0)},p:t,d(t){t&&c(n),i=!1,s()}}}function pt(e){let n,i;return{c(){n=d("img"),n.src!==(i="./favicon.png")&&v(n,"src","./favicon.png"),v(n,"alt","open csv file"),v(n,"class","svelte-118u7vq")},m(t,e){u(t,n,e)},p:t,d(t){t&&c(n)}}}function gt(e){let n,s,r,l,o,h,f,m,y,$,_,q,E,k,A,R,S,H,W,C,j,T,L,M,O,P,I,N,B,U,F,z,D,G,J,K,V,X,Y,Q,Z,tt,et,nt;function it(t,e){return t[1]?ft:pt}let st=it(e),rt=st(e);return{c(){n=d("div"),s=d("input"),r=g(),l=d("label"),rt.c(),o=g(),h=d("div"),f=d("h4"),f.textContent="recalculate",m=g(),y=d("div"),$=d("a"),_=p("save"),k=g(),A=d("div"),R=d("h5"),R.textContent="Material W x H",S=g(),H=d("input"),W=g(),C=d("span"),C.textContent="x",j=g(),T=d("input"),L=g(),M=d("div"),O=d("h5"),O.textContent="Margins",P=g(),I=d("input"),N=g(),B=d("div"),U=d("h5"),U.textContent="Kerf",F=g(),z=d("input"),D=g(),G=d("div"),J=d("h5"),J.textContent="Gap",K=g(),V=d("input"),X=g(),Y=d("div"),Q=d("h5"),Q.textContent="Metric",Z=g(),tt=d("input"),v(s,"class","inputfile svelte-118u7vq"),v(s,"name","file"),v(s,"id","file"),v(s,"type","file"),v(l,"for","file"),v(l,"class","svelte-118u7vq"),v(n,"class","upload-wrapper svelte-118u7vq"),v(f,"class","svelte-118u7vq"),v(h,"class","svelte-118u7vq"),v($,"href",q="data:text/plain;charset=utf-8,"+encodeURIComponent(e[7])),v($,"download",E=e[6].name+".svg"),v($,"class","svelte-118u7vq"),v(y,"class","save svelte-118u7vq"),v(R,"class","svelte-118u7vq"),v(H,"class","input svelte-118u7vq"),v(H,"type","number"),v(C,"class","svelte-118u7vq"),v(T,"class","input svelte-118u7vq"),v(T,"type","number"),v(A,"class","input-wrapper svelte-118u7vq"),v(O,"class","svelte-118u7vq"),v(I,"class","input svelte-118u7vq"),v(I,"type","number"),v(I,"step","0.005"),v(M,"class","input-wrapper svelte-118u7vq"),v(U,"class","svelte-118u7vq"),v(z,"class","input svelte-118u7vq"),v(z,"type","number"),v(z,"step","0.005"),v(B,"class","input-wrapper svelte-118u7vq"),v(J,"class","svelte-118u7vq"),v(V,"class","input svelte-118u7vq"),v(V,"type","number"),v(V,"step","0.005"),v(G,"class","input-wrapper svelte-118u7vq"),v(Q,"class","svelte-118u7vq"),v(tt,"class","input svelte-118u7vq"),v(tt,"type","checkbox"),v(Y,"class","input-wrapper svelte-118u7vq")},m(t,i){u(t,n,i),a(n,s),e[9](s),a(n,r),a(n,l),rt.m(l,null),u(t,o,i),u(t,h,i),a(h,f),u(t,m,i),u(t,y,i),a(y,$),a($,_),u(t,k,i),u(t,A,i),a(A,R),a(A,S),a(A,H),b(H,e[2].width),a(A,W),a(A,C),a(A,j),a(A,T),b(T,e[2].height),u(t,L,i),u(t,M,i),a(M,O),a(M,P),a(M,I),b(I,e[2].margins),u(t,N,i),u(t,B,i),a(B,U),a(B,F),a(B,z),b(z,e[3]),u(t,D,i),u(t,G,i),a(G,J),a(G,K),a(G,V),b(V,e[4]),u(t,X,i),u(t,Y,i),a(Y,Q),a(Y,Z),a(Y,tt),tt.checked=e[5],et||(nt=[w(s,"change",e[8]),w(f,"click",e[8]),w(H,"input",e[11]),w(T,"input",e[12]),w(I,"input",e[13]),w(z,"input",e[14]),w(V,"input",e[15]),w(tt,"change",e[16])],et=!0)},p(t,[e]){st===(st=it(t))&&rt?rt.p(t,e):(rt.d(1),rt=st(t),rt&&(rt.c(),rt.m(l,null))),128&e&&q!==(q="data:text/plain;charset=utf-8,"+encodeURIComponent(t[7]))&&v($,"href",q),64&e&&E!==(E=t[6].name+".svg")&&v($,"download",E),4&e&&x(H.value)!==t[2].width&&b(H,t[2].width),4&e&&x(T.value)!==t[2].height&&b(T,t[2].height),4&e&&x(I.value)!==t[2].margins&&b(I,t[2].margins),8&e&&x(z.value)!==t[3]&&b(z,t[3]),16&e&&x(V.value)!==t[4]&&b(V,t[4]),32&e&&(tt.checked=t[5])},i:t,o:t,d(t){t&&c(n),e[9](null),rt.d(),t&&c(o),t&&c(h),t&&c(m),t&&c(y),t&&c(k),t&&c(A),t&&c(L),t&&c(M),t&&c(N),t&&c(B),t&&c(D),t&&c(G),t&&c(X),t&&c(Y),et=!1,i(nt)}}}function mt(t,e,n){let i,s,r,a,u;l(t,at,(t=>n(6,i=t))),l(t,lt,(t=>n(17,s=t))),l(t,ot,(t=>n(18,r=t))),l(t,ut,(t=>n(7,a=t)));let c,h,d,f,p;return n(1,c=!1),n(2,h={width:49,height:97,margins:.25}),n(3,d=.375),n(4,f=0),n(5,p=!1),[u,c,h,d,f,p,i,a,function(){let t=u.files[0],e=new FileReader;o(at,i.name=t.name.replace(".csv",""),i),e.readAsText(t),t.name.includes(".csv")?e.onload=function(t){let e=Q(t.target.result,4,p,d,f,h);n(1,c=!1),o(lt,s=e[0]),o(ot,r=e[1]),o(at,i.errors=e[2],i)}:n(1,c=!0)},function(t){A[t?"unshift":"push"]((()=>{u=t,n(0,u)}))},()=>n(1,c=!1),function(){h.width=x(this.value),n(2,h)},function(){h.height=x(this.value),n(2,h)},function(){h.margins=x(this.value),n(2,h)},function(){d=x(this.value),n(3,d)},function(){f=x(this.value),n(4,f)},function(){p=this.checked,n(5,p)}]}class wt extends G{constructor(t){super(),D(this,t,mt,gt,r,{})}}function vt(t,e,n){const i=t.slice();return i[18]=e[n],i}function xt(t,e,n){const i=t.slice();return i[21]=e[n],i[23]=n,i}function yt(t){let e,n,i,s,r,l,o,h,f,m,w,x;return{c(){e=d("div"),n=d("h4"),i=p("Panel: "),s=p(t[0]),r=g(),l=d("h4"),o=p("Width: "),h=p(t[1]),f=g(),m=d("h4"),w=p("Height: "),x=p(t[2]),v(n,"class","sizes"),v(l,"class","sizes"),v(m,"class","sizes"),v(e,"class","infocard svelte-1f4wqfu"),$(e,"left",t[5]+"px"),$(e,"top",t[4]+"px")},m(t,c){u(t,e,c),a(e,n),a(n,i),a(n,s),a(e,r),a(e,l),a(l,o),a(l,h),a(e,f),a(e,m),a(m,w),a(m,x)},p(t,n){1&n&&y(s,t[0]),2&n&&y(h,t[1]),4&n&&y(x,t[2]),32&n&&$(e,"left",t[5]+"px"),16&n&&$(e,"top",t[4]+"px")},d(t){t&&c(e)}}}function bt(t){let e,n,i,s,r;return{c(){e=f("rect"),v(e,"class","sheet print svelte-1f4wqfu"),v(e,"id",n=t[21].id),v(e,"x",i=t[23]*t[21].sheet_width*t[11]),v(e,"y","0"),v(e,"width",s=t[21].sheet_width*t[11]),v(e,"height",r=t[21].sheet_height*t[11])},m(t,n){u(t,e,n)},p(t,l){256&l&&n!==(n=t[21].id)&&v(e,"id",n),256&l&&i!==(i=t[23]*t[21].sheet_width*t[11])&&v(e,"x",i),256&l&&s!==(s=t[21].sheet_width*t[11])&&v(e,"width",s),256&l&&r!==(r=t[21].sheet_height*t[11])&&v(e,"height",r)},d(t){t&&c(e)}}}function $t(t){let e,n,i,s,r=t[18].id+"";return{c(){e=f("text"),n=p(r),v(e,"class","idv print svelte-1f4wqfu"),v(e,"x",i=(t[18].x0-.25+t[18].width/2)*t[11]),v(e,"y",s=(t[18].y0+1+t[18].height/2)*t[11])},m(t,i){u(t,e,i),a(e,n)},p(t,l){1024&l&&r!==(r=t[18].id+"")&&y(n,r),1024&l&&i!==(i=(t[18].x0-.25+t[18].width/2)*t[11])&&v(e,"x",i),1024&l&&s!==(s=(t[18].y0+1+t[18].height/2)*t[11])&&v(e,"y",s)},d(t){t&&c(e)}}}function _t(t){let e,n,i,s,r=t[18].id+"";return{c(){e=f("text"),n=p(r),v(e,"class","idh print svelte-1f4wqfu"),v(e,"x",i=(t[18].x0+t[18].width/2)*t[11]),v(e,"y",s=(t[18].y0+1+t[18].height/2)*t[11])},m(t,i){u(t,e,i),a(e,n)},p(t,l){1024&l&&r!==(r=t[18].id+"")&&y(n,r),1024&l&&i!==(i=(t[18].x0+t[18].width/2)*t[11])&&v(e,"x",i),1024&l&&s!==(s=(t[18].y0+1+t[18].height/2)*t[11])&&v(e,"y",s)},d(t){t&&c(e)}}}function qt(t){let e,n,s,r,l,o,a,h,d;function p(t,e){return t[18].width>t[18].height?_t:$t}let g=p(t),x=g(t);return{c(){e=f("rect"),x.c(),a=m(),v(e,"class","panel print svelte-1f4wqfu"),v(e,"id",n=t[18].id),v(e,"x",s=t[18].x0*t[11]),v(e,"y",r=t[18].y0*t[11]),v(e,"width",l=t[18].width*t[11]),v(e,"height",o=t[18].height*t[11])},m(n,i){u(n,e,i),x.m(n,i),u(n,a,i),h||(d=[w(e,"mouseover",t[12]),w(e,"mouseleave",t[13])],h=!0)},p(t,i){1024&i&&n!==(n=t[18].id)&&v(e,"id",n),1024&i&&s!==(s=t[18].x0*t[11])&&v(e,"x",s),1024&i&&r!==(r=t[18].y0*t[11])&&v(e,"y",r),1024&i&&l!==(l=t[18].width*t[11])&&v(e,"width",l),1024&i&&o!==(o=t[18].height*t[11])&&v(e,"height",o),g===(g=p(t))&&x?x.p(t,i):(x.d(1),x=g(t),x&&(x.c(),x.m(a.parentNode,a)))},d(t){t&&c(e),x.d(t),t&&c(a),h=!1,i(d)}}}function Et(e){let n,i,s,r,l,o,p,m,w=e[3]&&yt(e),x=e[8],y=[];for(let t=0;t<x.length;t+=1)y[t]=bt(xt(e,x,t));let b=e[10],$=[];for(let t=0;t<b.length;t+=1)$[t]=qt(vt(e,b,t));return{c(){w&&w.c(),n=g(),i=d("div"),s=f("svg"),r=f("g");for(let t=0;t<y.length;t+=1)y[t].c();l=f("g");for(let t=0;t<$.length;t+=1)$[t].c();v(r,"id","sheets"),v(r,"class","svelte-1f4wqfu"),v(l,"id","panels"),v(l,"class","svelte-1f4wqfu"),v(s,"class","print svelte-1f4wqfu"),v(s,"version","1.1"),v(s,"xmlns","http://www.w3.org/2000/svg"),v(s,"xmlns:xlink","http://www.w3.org/1999/xlink"),v(s,"width",o=e[7]*e[11]),v(s,"height",p=e[9]*e[11]),v(s,"viewBox",m="0 0 "+e[7]*e[11]+" "+e[9]*e[11]),v(s,"preserveAspectRatio","xMidYMid meet"),v(i,"class","viewer svelte-1f4wqfu")},m(t,o){w&&w.m(t,o),u(t,n,o),u(t,i,o),a(i,s),a(s,r);for(let t=0;t<y.length;t+=1)y[t].m(r,null);a(s,l);for(let t=0;t<$.length;t+=1)$[t].m(l,null);e[14](i)},p(t,[e]){if(t[3]?w?w.p(t,e):(w=yt(t),w.c(),w.m(n.parentNode,n)):w&&(w.d(1),w=null),2304&e){let n;for(x=t[8],n=0;n<x.length;n+=1){const i=xt(t,x,n);y[n]?y[n].p(i,e):(y[n]=bt(i),y[n].c(),y[n].m(r,null))}for(;n<y.length;n+=1)y[n].d(1);y.length=x.length}if(15360&e){let n;for(b=t[10],n=0;n<b.length;n+=1){const i=vt(t,b,n);$[n]?$[n].p(i,e):($[n]=qt(i),$[n].c(),$[n].m(l,null))}for(;n<$.length;n+=1)$[n].d(1);$.length=b.length}128&e&&o!==(o=t[7]*t[11])&&v(s,"width",o),512&e&&p!==(p=t[9]*t[11])&&v(s,"height",p),640&e&&m!==(m="0 0 "+t[7]*t[11]+" "+t[9]*t[11])&&v(s,"viewBox",m)},i:t,o:t,d(t){w&&w.d(t),t&&c(n),t&&c(i),h(y,t),h($,t),e[14](null)}}}function kt(t,e,n){let i,s,r;l(t,ot,(t=>n(8,i=t))),l(t,ut,(t=>n(15,s=t))),l(t,lt,(t=>n(10,r=t)));let a,u,c,h,d,f,p=!1,g=0,m=0;return E((()=>{o(ut,s=h.innerHTML.toString())})),t.$$.update=()=>{256&t.$$.dirty&&n(7,d=i.length*i[0].sheet_width||61),256&t.$$.dirty&&n(9,f=i[0].sheet_height||121)},[a,u,c,p,g,m,h,d,i,f,r,90,function(){n(3,p=!0);let t=this.getBoundingClientRect();n(4,g=t.bottom+12),n(5,m=t.left+12),n(0,a=this.id),n(1,u=this.width.baseVal.valueAsString),n(2,c=this.height.baseVal.valueAsString)},function(t){n(3,p=!1)},function(t){A[t?"unshift":"push"]((()=>{h=t,n(6,h)}))}]}class At extends G{constructor(t){super(),D(this,t,kt,Et,r,{})}}function Rt(t,e,n){const i=t.slice();return i[2]=e[n],i}function St(t,e,n){const i=t.slice();return i[5]=e[n],i[7]=n,i}function Ht(t){let e,n,i,s,r=t[0].name+"",l=t[1].length>1&&Wt(t);return{c(){e=d("h2"),n=p(r),i=g(),l&&l.c(),s=m()},m(t,r){u(t,e,r),a(e,n),u(t,i,r),l&&l.m(t,r),u(t,s,r)},p(t,e){1&e&&r!==(r=t[0].name+"")&&y(n,r),t[1].length>1?l?l.p(t,e):(l=Wt(t),l.c(),l.m(s.parentNode,s)):l&&(l.d(1),l=null)},d(t){t&&c(e),t&&c(i),l&&l.d(t),t&&c(s)}}}function Wt(t){let e,n,i,s,r,l,o=parseInt(t[1].slice(0,-1).reduce(Mt,0))+"";return{c(){e=d("p"),e.textContent="filled sheets",n=g(),i=d("p"),s=p("waste: "),r=p(o),l=p("%")},m(t,o){u(t,e,o),u(t,n,o),u(t,i,o),a(i,s),a(i,r),a(i,l)},p(t,e){2&e&&o!==(o=parseInt(t[1].slice(0,-1).reduce(Mt,0))+"")&&y(r,o)},d(t){t&&c(e),t&&c(n),t&&c(i)}}}function Ct(t){let e,n,i,s,r,l,o,h,f,m,w,x,b,$,_,q,E=t[5].id+"",k=parseInt(t[5].area)+"",A=parseInt(t[5].waste_area)+"",R=parseInt(100*t[5].waste_ratio)+"";return{c(){e=d("div"),n=d("h4"),i=p(E),s=g(),r=d("p"),l=p("used area: "),o=p(k),h=g(),f=d("p"),m=p("waste area: "),w=p(A),x=g(),b=d("p"),$=p("waste: "),_=p(R),q=p("%"),v(e,"class","svelte-sf2keo")},m(t,c){u(t,e,c),a(e,n),a(n,i),a(e,s),a(e,r),a(r,l),a(r,o),a(e,h),a(e,f),a(f,m),a(f,w),a(e,x),a(e,b),a(b,$),a(b,_),a(b,q)},p(t,e){2&e&&E!==(E=t[5].id+"")&&y(i,E),2&e&&k!==(k=parseInt(t[5].area)+"")&&y(o,k),2&e&&A!==(A=parseInt(t[5].waste_area)+"")&&y(w,A),2&e&&R!==(R=parseInt(100*t[5].waste_ratio)+"")&&y(_,R)},d(t){t&&c(e)}}}function jt(t){let e,n,i,s,r,l,o=t[0].errors.length>1?"S":"",f=t[0].errors,w=[];for(let e=0;e<f.length;e+=1)w[e]=Tt(Rt(t,f,e));return{c(){e=d("h5"),n=p("ERROR"),i=p(o),s=p(":"),r=g();for(let t=0;t<w.length;t+=1)w[t].c();l=m()},m(t,o){u(t,e,o),a(e,n),a(e,i),a(e,s),u(t,r,o);for(let e=0;e<w.length;e+=1)w[e].m(t,o);u(t,l,o)},p(t,e){if(1&e&&o!==(o=t[0].errors.length>1?"S":"")&&y(i,o),1&e){let n;for(f=t[0].errors,n=0;n<f.length;n+=1){const i=Rt(t,f,n);w[n]?w[n].p(i,e):(w[n]=Tt(i),w[n].c(),w[n].m(l.parentNode,l))}for(;n<w.length;n+=1)w[n].d(1);w.length=f.length}},d(t){t&&c(e),t&&c(r),h(w,t),t&&c(l)}}}function Tt(t){let e,n,i=t[2]+"";return{c(){e=d("p"),n=p(i)},m(t,i){u(t,e,i),a(e,n)},p(t,e){1&e&&i!==(i=t[2]+"")&&y(n,i)},d(t){t&&c(e)}}}function Lt(e){let n,i,s,r,l=e[0].name&&Ht(e),o=e[1],a=[];for(let t=0;t<o.length;t+=1)a[t]=Ct(St(e,o,t));let f=e[0].errors.length&&jt(e);return{c(){n=d("div"),l&&l.c(),i=g();for(let t=0;t<a.length;t+=1)a[t].c();s=g(),r=d("div"),f&&f.c(),v(n,"class","svelte-sf2keo"),v(r,"class","svelte-sf2keo")},m(t,e){u(t,n,e),l&&l.m(n,null),u(t,i,e);for(let n=0;n<a.length;n+=1)a[n].m(t,e);u(t,s,e),u(t,r,e),f&&f.m(r,null)},p(t,[e]){if(t[0].name?l?l.p(t,e):(l=Ht(t),l.c(),l.m(n,null)):l&&(l.d(1),l=null),2&e){let n;for(o=t[1],n=0;n<o.length;n+=1){const i=St(t,o,n);a[n]?a[n].p(i,e):(a[n]=Ct(i),a[n].c(),a[n].m(s.parentNode,s))}for(;n<a.length;n+=1)a[n].d(1);a.length=o.length}t[0].errors.length?f?f.p(t,e):(f=jt(t),f.c(),f.m(r,null)):f&&(f.d(1),f=null)},i:t,o:t,d(t){t&&c(n),l&&l.d(),t&&c(i),h(a,t),t&&c(s),t&&c(r),f&&f.d()}}}const Mt=(t,e,n,i)=>t+100*e.waste_ratio/i.length;function Ot(t,e,n){let i,s;return l(t,at,(t=>n(0,i=t))),l(t,ot,(t=>n(1,s=t))),[i,s]}class Pt extends G{constructor(t){super(),D(this,t,Ot,Lt,r,{})}}function It(t){let e,n,i,s,r;return e=new At({}),s=new Pt({}),{c(){B(e.$$.fragment),n=g(),i=d("div"),B(s.$$.fragment),v(i,"class","info svelte-j2egch")},m(t,l){U(e,t,l),u(t,n,l),u(t,i,l),U(s,i,null),r=!0},i(t){r||(I(e.$$.fragment,t),I(s.$$.fragment,t),r=!0)},o(t){N(e.$$.fragment,t),N(s.$$.fragment,t),r=!1},d(t){F(e,t),t&&c(n),t&&c(i),F(s)}}}function Nt(t){let e,n,s,r,l;s=new wt({});let o=t[0].length&&It();return{c(){e=d("div"),n=d("div"),B(s.$$.fragment),r=g(),o&&o.c(),v(n,"class","import svelte-j2egch"),v(e,"class","container svelte-j2egch")},m(t,i){u(t,e,i),a(e,n),U(s,n,null),a(e,r),o&&o.m(e,null),l=!0},p(t,[n]){t[0].length?o?1&n&&I(o,1):(o=It(),o.c(),I(o,1),o.m(e,null)):o&&(P={r:0,c:[],p:P},N(o,1,1,(()=>{o=null})),P.r||i(P.c),P=P.p)},i(t){l||(I(s.$$.fragment,t),I(o),l=!0)},o(t){N(s.$$.fragment,t),N(o),l=!1},d(t){t&&c(e),F(s),o&&o.d()}}}function Bt(t,e,n){let i;return l(t,ot,(t=>n(0,i=t))),[i]}return new class extends G{constructor(t){super(),D(this,t,Bt,Nt,r,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
